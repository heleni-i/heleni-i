4 lines (3 sloc)  210 KB
(function(){"use strict";function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,s=this,o=s.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,s=this.getListenersAsObject(t),o="object"==typeof i;for(n in s)s.hasOwnProperty(n)&&e(s[n],i)===-1&&s[n].push(o?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,s,o=this.getListenersAsObject(t);for(s in o)o.hasOwnProperty(s)&&(n=e(o[s],i),n!==-1&&o[s].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,s,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)o.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&("function"==typeof s?o.call(this,n,s):r.call(this,n,s));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,s,o,r=this.getListenersAsObject(t);for(s in r)if(r.hasOwnProperty(s))for(n=r[s].length;n--;)i=r[s][n],i.once===!0&&this.removeListener(t,i.listener),o=i.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=o,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var s=function(){};i.removeEventListener?s=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(s=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var o={bind:n,unbind:s};"function"==typeof define&&define.amd?define("eventie/eventie",o):t.eventie=o}(this),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){function n(t,e){for(var i in e)t[i]=e[i];return t}function s(t){return"[object Array]"==h.call(t)}function o(t){var e=[];if(s(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=o(t),this.options=n({},this.options),"function"==typeof e?i=e:n(this.options,e),i&&this.on("always",i),this.getImages(),d&&(this.jqDeferred=new d.Deferred);var s=this;setTimeout(function(){s.check()})}function a(t){this.img=t}function l(t,e){this.url=t,this.element=e,this.img=new Image}var d=t.jQuery,c=t.console,h=Object.prototype.toString;r.prototype=new e,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0;t<this.elements.length;t++){var e=this.elements[t];this.addElementImages(e)}},r.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&u[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var u={1:!0,9:!0,11:!0};r.prototype.addElementBackgroundImages=function(t){for(var e=g(t),i=/url\(['"]*([^'"\)]+)['"]*\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[1];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}};var g=t.getComputedStyle||function(t){return t.currentStyle};return r.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},r.prototype.addBackground=function(t,e){var i=new l(t,e);this.images.push(i)},r.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();for(var i=0;i<this.images.length;i++){var n=this.images[i];n.once("progress",t),n.check()}},r.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emit("progress",this,t,e),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&c&&c.log("progress: "+i,t,e)},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(t,this),this.emit("always",this),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},a.prototype=new e,a.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,i.bind(this.proxyImage,"load",this),i.bind(this.proxyImage,"error",this),i.bind(this.img,"load",this),i.bind(this.img,"error",this),void(this.proxyImage.src=this.img.src))},a.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("progress",this,this.img,e)},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){i.unbind(this.proxyImage,"load",this),i.unbind(this.proxyImage,"error",this),i.unbind(this.img,"load",this),i.unbind(this.img,"error",this)},l.prototype=new a,l.prototype.check=function(){i.bind(this.img,"load",this),i.bind(this.img,"error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},l.prototype.unbindEvents=function(){i.unbind(this.img,"load",this),i.unbind(this.img,"error",this)},l.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("progress",this,this.element,e)},r.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(d=e,d.fn.imagesLoaded=function(t,e){var i=new r(this,t,e);return i.jqDeferred.promise(d(this))})},r.makeJQueryPlugin(),r}),function(t){var e={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};t.fn.bxSlider=function(s){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(s)}),this;var o={},r=this;e.el=this;var a=t(window).width(),l=t(window).height(),d=function(){o.settings=t.extend({},n,s),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=r.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return o.cssPrefix=e[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c()},c=function(){r.wrap('<div class="'+o.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),o.viewport=r.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),r.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?r.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing");f();o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:p()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",v()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:o.settings.slideZIndex,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&k(),o.active.last=o.settings.startSlide==m()-1,o.settings.video&&r.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&w(),o.settings.controls&&E(),o.settings.auto&&o.settings.autoControls&&C(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),h(e,u)},h=function(e,i){var n=e.find("img, iframe").length;if(0==n)return void i();var s=0;e.find("img, iframe").each(function(){t(this).one("load",function(){++s==n&&i()}).each(function(){this.complete&&t(this).load()})})},u=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,e).clone().addClass("bx-clone"),n=o.children.slice(-e).clone().addClass("bx-clone");r.append(i).prepend(n)}o.loader.remove(),y(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(g()),r.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",H),o.settings.auto&&o.settings.autoStart&&(m()>1||o.settings.autoSlideForOnePage)&&q(),o.settings.ticker&&j(),o.settings.pager&&P(o.settings.startSlide),o.settings.controls&&_(),o.settings.touchEnabled&&!o.settings.ticker&&O()},g=function(){var e=0,n=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var s=1==o.settings.moveSlides?o.active.index:o.active.index*x();for(n=o.children.eq(s),i=1;i<=o.settings.maxSlides-1;i++)n=s+i>=o.children.length?n.add(o.children.eq(i-1)):n.add(o.children.eq(s+i))}else n=o.children.eq(o.active.index);else n=o.children;return"vertical"==o.settings.mode?(n.each(function(i){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,n.map(function(){return t(this).outerHeight(!1)}).get()),"border-box"==o.viewport.css("box-sizing")?e+=parseFloat(o.viewport.css("padding-top"))+parseFloat(o.viewport.css("padding-bottom"))+parseFloat(o.viewport.css("border-top-width"))+parseFloat(o.viewport.css("border-bottom-width")):"padding-box"==o.viewport.css("box-sizing")&&(e+=parseFloat(o.viewport.css("padding-top"))+parseFloat(o.viewport.css("padding-bottom"))),e},p=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},v=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width()+o.settings.slideMargin;t=Math.floor((o.viewport.width()+o.settings.slideMargin)/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},m=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=Math.ceil(o.children.length/x());else for(var e=0,i=0;e<o.children.length;)++t,e=i+f(),i+=o.settings.moveSlides<=f()?o.settings.moveSlides:f();else t=Math.ceil(o.children.length/f());return t},x=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=f()?o.settings.moveSlides:f()},y=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();S(-(e.left-(o.viewport.width()-t.outerWidth())),"reset",0)}else if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,e=o.children.eq(i).position();S(-e.top,"reset",0)}}else{var e=o.children.eq(o.active.index*x()).position();o.active.index==m()-1&&(o.active.last=!0),void 0!=e&&("horizontal"==o.settings.mode?S(-e.left,"reset",0):"vertical"==o.settings.mode&&S(-e.top,"reset",0))}},S=function(t,e,i,n){if(o.usingCSS){var s="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";r.css("-"+o.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==e?(r.css(o.animProp,s),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),M()})):"reset"==e?r.css(o.animProp,s):"ticker"==e&&(r.css("-"+o.cssPrefix+"-transition-timing-function","linear"),r.css(o.animProp,s),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),S(n.resetValue,"reset",0),D()}))}else{var a={};a[o.animProp]=t,"slide"==e?r.animate(a,i,o.settings.easing,function(){M()}):"reset"==e?r.css(o.animProp,t):"ticker"==e&&r.animate(a,speed,"linear",function(){S(n.resetValue,"reset",0),D()})}},b=function(){for(var e="",i=m(),n=0;n<i;n++){var s="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(s=o.settings.buildPager(n),o.pagerEl.addClass("bx-custom-pager")):(s=n+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+s+"</a></div>"}o.pagerEl.html(e)},w=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),b()),o.pagerEl.on("click","a",z)},E=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",T),o.controls.prev.bind("click",A),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},C=function(){o.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.on("click",".bx-start",L),o.controls.autoEl.on("click",".bx-stop",I),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),W(o.settings.autoStart?"stop":"start")},k=function(){o.children.each(function(e){var i=t(this).find("img:first").attr("title");void 0!=i&&(""+i).length&&t(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},T=function(t){o.settings.auto&&r.stopAuto(),r.goToNextSlide(),t.preventDefault()},A=function(t){o.settings.auto&&r.stopAuto(),r.goToPrevSlide(),t.preventDefault()},L=function(t){r.startAuto(),t.preventDefault()},I=function(t){r.stopAuto(),t.preventDefault()},z=function(e){o.settings.auto&&r.stopAuto();var i=t(e.currentTarget);if(void 0!==i.attr("data-slide-index")){var n=parseInt(i.attr("data-slide-index"));n!=o.active.index&&r.goToSlide(n),e.preventDefault()}},P=function(e){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),void o.pagerEl.html(e+1+o.settings.pagerShortSeparator+i)):(o.pagerEl.find("a").removeClass("active"),void o.pagerEl.each(function(i,n){t(n).find("a").eq(e).addClass("active")}))},M=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==m()-1&&o.carousel?t=o.children.eq((m()-1)*x()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),t&&("horizontal"==o.settings.mode?S(-t.left,"reset",0):"vertical"==o.settings.mode&&S(-t.top,"reset",0))}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},W=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},_=function(){1==m()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==m()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},q=function(){if(o.settings.autoDelay>0){setTimeout(r.startAuto,o.settings.autoDelay)}else r.startAuto();o.settings.autoHover&&r.hover(function(){o.interval&&(r.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(r.startAuto(!0),o.autoPaused=null)})},j=function(){var e=0;if("next"==o.settings.autoDirection)r.append(o.children.clone().addClass("bx-clone"));else{r.prepend(o.children.clone().addClass("bx-clone"));var i=o.children.first().position();e="horizontal"==o.settings.mode?-i.left:-i.top}S(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){r.stop()},function(){var e=0;o.children.each(function(i){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=o.settings.speed/e,n="horizontal"==o.settings.mode?"left":"top",s=i*(e-Math.abs(parseInt(r.css(n))));D(s)}),D()},D=function(t){speed=t?t:o.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?e=r.find(".bx-clone").first().position():i=o.children.first().position();var n="horizontal"==o.settings.mode?-e.left:-e.top,s="horizontal"==o.settings.mode?-i.left:-i.top,a={resetValue:s};S(n,"ticker",speed,a)},O=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",B)},B=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=r.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",$),o.viewport.bind("touchend",F)}},$=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),n=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*i>n&&o.settings.preventDefaultSwipeX?t.preventDefault():3*n>i&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var s=0;if("horizontal"==o.settings.mode){var r=e.changedTouches[0].pageX-o.touch.start.x;s=o.touch.originalPos.left+r}else{var r=e.changedTouches[0].pageY-o.touch.start.y;s=o.touch.originalPos.top+r}S(s,"reset",0)}},F=function(t){o.viewport.unbind("touchmove",$);var e=t.originalEvent,i=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){var n=Math.abs(o.touch.start.x-o.touch.end.x);n>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var n=0;"horizontal"==o.settings.mode?(n=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(n=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&n>0||o.active.last&&n<0)?S(i,"reset",200):Math.abs(n)>=o.settings.swipeThreshold?(n<0?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):S(i,"reset",200)}o.viewport.unbind("touchend",F)},H=function(e){if(o.initialized){var i=t(window).width(),n=t(window).height();a==i&&l==n||(a=i,l=n,r.redrawSlider(),o.settings.onSliderResize.call(r,o.active.index))}};return r.goToSlide=function(e,i){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,e<0?o.active.index=m()-1:e>=m()?o.active.index=0:o.active.index=e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=m()-1,o.settings.pager&&P(o.active.index),o.settings.controls&&_(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=g()&&o.viewport.animate({height:g()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",o.settings.slideZIndex+1).fadeIn(o.settings.speed,function(){t(this).css("zIndex",o.settings.slideZIndex),M()});else{o.settings.adaptiveHeight&&o.viewport.height()!=g()&&o.viewport.animate({height:g()},o.settings.adaptiveHeightSpeed);var n=0,s={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var a=o.children.eq(o.children.length-1);s=a.position(),n=o.viewport.width()-a.outerWidth()}else{var l=o.children.length-o.settings.minSlides;s=o.children.eq(l).position()}else if(o.carousel&&o.active.last&&"prev"==i){var d=1==o.settings.moveSlides?o.settings.maxSlides-x():(m()-1)*x()-(o.children.length-o.settings.maxSlides),a=r.children(".bx-clone").eq(d);s=a.position()}else if("next"==i&&0==o.active.index)s=r.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var c=e*x();s=o.children.eq(c).position()}if("undefined"!=typeof s){var h="horizontal"==o.settings.mode?-(s.left-n):-s.top;S(h,"slide",o.settings.speed)}}},r.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;r.goToSlide(t,"next")}},r.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=parseInt(o.active.index)-1;r.goToSlide(t,"prev")}},r.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&W("stop"))},r.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&W("start"))},r.getCurrentSlide=function(){return o.active.index},r.getCurrentSlideElement=function(){return o.children.eq(o.active.index)},r.getSlideCount=function(){return o.children.length},r.redrawSlider=function(){o.children.add(r.find(".bx-clone")).width(v()),o.viewport.css("height",g()),o.settings.ticker||y(),o.active.last&&(o.active.index=m()-1),o.active.index>=m()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(b(),P(o.active.index))},r.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.settings.controls&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",H))},r.reloadSlider=function(t){void 0!=t&&(s=t),r.destroySlider(),d()},d(),this}}(jQuery),function(t,e,i){"use strict";var n,s=e.event;s.special.smartresize={setup:function(){e(this).bind("resize",s.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",s.special.smartresize.handler)},handler:function(t,e){var i=this,o=arguments;t.type="smartresize",n&&clearTimeout(n),n=setTimeout(function(){s.dispatch.apply(i,o)},"execAsap"===e?0:100)}},e.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},e.Mason=function(t,i){this.element=e(i),this._create(t),this._init()},e.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},e.Mason.prototype={_filterFindBricks:function(t){var e=this.options.itemSelector;return e?t.filter(e).add(t.find(e)):t},_getBricks:function(t){var e=this._filterFindBricks(t).css({position:"absolute"}).addClass("masonry-brick");return e},_create:function(i){this.options=e.extend(!0,{},e.Mason.settings,i),this.styleQueue=[];var n=this.element[0].style;this.originalStyle={height:n.height||""};var s=this.options.containerStyle;for(var o in s)this.originalStyle[o]=n[o]||"";this.element.css(s),this.horizontalDirection=this.options.isRTL?"right":"left";var r=this.element.css("padding-"+this.horizontalDirection),a=this.element.css("padding-top");this.offset={x:r?parseInt(r,10):0,y:a?parseInt(a,10):0},this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var l=this;setTimeout(function(){l.element.addClass("masonry")},0),this.options.isResizable&&e(t).bind("smartresize.masonry",function(){l.resize()}),this.reloadItems()},_init:function(t){this._getColumns(),this._reLayout(t)},option:function(t,i){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))},layout:function(t,e){for(var i=0,n=t.length;i<n;i++)this._placeBrick(t[i]);var s={};if(s.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){var o=0;for(i=this.cols;--i&&0===this.colYs[i];)o++;s.width=(this.cols-o)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:s});var r,a=this.isLaidOut&&this.options.isAnimated?"animate":"css",l=this.options.animationOptions;for(i=0,n=this.styleQueue.length;i<n;i++)r=this.styleQueue[i],r.$el[a](r.style,l);this.styleQueue=[],e&&e.call(t),this.isLaidOut=!0},_getColumns:function(){var t=this.options.isFitWidth?this.element.parent():this.element,e=t.width();this.columnWidth=this.isFluid?this.options.columnWidth(e):this.options.columnWidth||this.$bricks.outerWidth(!0)||e,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((e+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(t){var i,n,s,o,r,a=e(t);if(i=Math.ceil(a.outerWidth(!0)/this.columnWidth),i=Math.min(i,this.cols),1===i)s=this.colYs;else for(n=this.cols+1-i,s=[],r=0;r<n;r++)o=this.colYs.slice(r,r+i),s[r]=Math.max.apply(Math,o);for(var l=Math.min.apply(Math,s),d=0,c=0,h=s.length;c<h;c++)if(s[c]===l){d=c;break}var u={top:l+this.offset.y};u[this.horizontalDirection]=this.columnWidth*d+this.offset.x,this.styleQueue.push({$el:a,style:u});var g=l+a.outerHeight(!0),p=this.cols+1-h;for(c=0;c<p;c++)this.colYs[d+c]=g},resize:function(){var t=this.cols;this._getColumns(),(this.isFluid||this.cols!==t)&&this._reLayout()},_reLayout:function(t){var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.layout(this.$bricks,t)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(t){this.reloadItems(),this._init(t)},appended:function(t,e,i){if(e){this._filterFindBricks(t).css({top:this.element.height()});var n=this;setTimeout(function(){n._appended(t,i)},1)}else this._appended(t,i)},_appended:function(t,e){var i=this._getBricks(t);this.$bricks=this.$bricks.add(i),this.layout(i,e)},remove:function(t){this.$bricks=this.$bricks.not(t),t.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var i=this.element[0].style;for(var n in this.originalStyle)i[n]=this.originalStyle[n];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),e(t).unbind(".masonry")}},e.fn.imagesLoaded=function(t){function i(){t.call(s,o)}function n(t){var s=t.target;s.src!==a&&e.inArray(s,l)===-1&&(l.push(s),
--r<=0&&(setTimeout(i),o.unbind(".imagesLoaded",n)))}var s=this,o=s.find("img").add(s.filter("img")),r=o.length,a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return r||i(),o.bind("load.imagesLoaded error.imagesLoaded",n).each(function(){var t=this.src;this.src=a,this.src=t}),s};var o=function(e){t.console&&t.console.error(e)};e.fn.masonry=function(t){if("string"==typeof t){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var n=e.data(this,"masonry");return n?e.isFunction(n[t])&&"_"!==t.charAt(0)?void n[t].apply(n,i):void o("no such method '"+t+"' for masonry instance"):void o("cannot call methods on masonry prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){var i=e.data(this,"masonry");i?(i.option(t||{}),i._init()):e.data(this,"masonry",new e.Mason(t,this))});return this}}(window,jQuery),$(function(){function t(){var t=$(".grid");t.imagesLoaded(function(){t.masonry({itemSelector:".grid-item",columnWidth:function(t){return t/3-10},gutterWidth:10})})}function e(){$(".ideas").find("div").remove();var e=$(".search__field").val();$.ajax({url:"https://pixabay.com/api/?key=2650584-e8feab9b11ed644dcec728ac9&q="+e+"&image_type=photo",dataType:"jsonp",success:function(e){var i=$("#container").html(),n=tmpl(i,e);$(".ideas").append(n),t()},error:function(){alert("Error!")}})}$(".bxslider").bxSlider({auto:!0,autoControls:!0}),e(),$(".search__button").on("click",function(t){t.preventDefault(),e(),$(".search__field").val("")})}),function(){var t={};this.tmpl=function e(i,n){var s=/\W/.test(i)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[i]=t[i]||e(document.getElementById(i).innerHTML);return n?s(n):s}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlc2xvYWRlZC5wa2dkLmpzIiwianF1ZXJ5LmJ4c2xpZGVyLmpzIiwianF1ZXJ5Lm1hc29ucnkubWluLmpzIiwic2NyaXB0LmpzIiwidG1wbC5qcyJdLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJpbmRleE9mTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lciIsImkiLCJsZW5ndGgiLCJhbGlhcyIsIm5hbWUiLCJ0aGlzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJwcm90byIsInByb3RvdHlwZSIsImV4cG9ydHMiLCJvcmlnaW5hbEdsb2JhbFZhbHVlIiwiZ2V0TGlzdGVuZXJzIiwiZXZ0IiwicmVzcG9uc2UiLCJrZXkiLCJldmVudHMiLCJfZ2V0RXZlbnRzIiwiaGFzT3duUHJvcGVydHkiLCJ0ZXN0IiwiZmxhdHRlbkxpc3RlbmVycyIsImZsYXRMaXN0ZW5lcnMiLCJwdXNoIiwiZ2V0TGlzdGVuZXJzQXNPYmplY3QiLCJBcnJheSIsImFkZExpc3RlbmVyIiwibGlzdGVuZXJJc1dyYXBwZWQiLCJvbmNlIiwib24iLCJhZGRPbmNlTGlzdGVuZXIiLCJkZWZpbmVFdmVudCIsImRlZmluZUV2ZW50cyIsImV2dHMiLCJyZW1vdmVMaXN0ZW5lciIsImluZGV4Iiwic3BsaWNlIiwib2ZmIiwiYWRkTGlzdGVuZXJzIiwibWFuaXB1bGF0ZUxpc3RlbmVycyIsInJlbW92ZUxpc3RlbmVycyIsInJlbW92ZSIsInZhbHVlIiwic2luZ2xlIiwibXVsdGlwbGUiLCJSZWdFeHAiLCJjYWxsIiwicmVtb3ZlRXZlbnQiLCJ0eXBlIiwiX2V2ZW50cyIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXRFdmVudCIsImFyZ3MiLCJfZ2V0T25jZVJldHVyblZhbHVlIiwidHJpZ2dlciIsImVtaXQiLCJzbGljZSIsInNldE9uY2VSZXR1cm5WYWx1ZSIsIl9vbmNlUmV0dXJuVmFsdWUiLCJub0NvbmZsaWN0IiwiZGVmaW5lIiwiYW1kIiwibW9kdWxlIiwid2luZG93IiwiZ2V0SUVFdmVudCIsIm9iaiIsImV2ZW50IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsImRvY0VsZW0iLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImJpbmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZm4iLCJhdHRhY2hFdmVudCIsImhhbmRsZUV2ZW50IiwidW5iaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwiZXJyIiwidW5kZWZpbmVkIiwiZXZlbnRpZSIsImZhY3RvcnkiLCJyZXF1aXJlIiwiaW1hZ2VzTG9hZGVkIiwiZXh0ZW5kIiwiYSIsImIiLCJwcm9wIiwiaXNBcnJheSIsIm9ialRvU3RyaW5nIiwibWFrZUFycmF5IiwiYXJ5IiwiSW1hZ2VzTG9hZGVkIiwiZWxlbSIsIm9wdGlvbnMiLCJvbkFsd2F5cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtZW50cyIsImdldEltYWdlcyIsIiQiLCJqcURlZmVycmVkIiwiRGVmZXJyZWQiLCJfdGhpcyIsInNldFRpbWVvdXQiLCJjaGVjayIsIkxvYWRpbmdJbWFnZSIsImltZyIsIkJhY2tncm91bmQiLCJ1cmwiLCJlbGVtZW50IiwiSW1hZ2UiLCJqUXVlcnkiLCJjb25zb2xlIiwiT2JqZWN0IiwidG9TdHJpbmciLCJpbWFnZXMiLCJhZGRFbGVtZW50SW1hZ2VzIiwibm9kZU5hbWUiLCJhZGRJbWFnZSIsImJhY2tncm91bmQiLCJhZGRFbGVtZW50QmFja2dyb3VuZEltYWdlcyIsIm5vZGVUeXBlIiwiZWxlbWVudE5vZGVUeXBlcyIsImNoaWxkSW1ncyIsImNoaWxkcmVuIiwiY2hpbGQiLCIxIiwiOSIsIjExIiwic3R5bGUiLCJnZXRTdHlsZSIsInJlVVJMIiwibWF0Y2hlcyIsImV4ZWMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhZGRCYWNrZ3JvdW5kIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImN1cnJlbnRTdHlsZSIsImxvYWRpbmdJbWFnZSIsIm9uUHJvZ3Jlc3MiLCJpbWFnZSIsIm1lc3NhZ2UiLCJwcm9ncmVzcyIsInByb2dyZXNzZWRDb3VudCIsImhhc0FueUJyb2tlbiIsImNvbXBsZXRlIiwiaXNMb2FkZWQiLCJub3RpZnkiLCJkZWJ1ZyIsImxvZyIsImV2ZW50TmFtZSIsImlzQ29tcGxldGUiLCJqcU1ldGhvZCIsImdldElzSW1hZ2VDb21wbGV0ZSIsImNvbmZpcm0iLCJuYXR1cmFsV2lkdGgiLCJwcm94eUltYWdlIiwic3JjIiwibWV0aG9kIiwib25sb2FkIiwidW5iaW5kRXZlbnRzIiwib25lcnJvciIsIm1ha2VKUXVlcnlQbHVnaW4iLCJjYWxsYmFjayIsImluc3RhbmNlIiwicHJvbWlzZSIsInBsdWdpbiIsImRlZmF1bHRzIiwibW9kZSIsInNsaWRlU2VsZWN0b3IiLCJpbmZpbml0ZUxvb3AiLCJoaWRlQ29udHJvbE9uRW5kIiwic3BlZWQiLCJlYXNpbmciLCJzbGlkZU1hcmdpbiIsInN0YXJ0U2xpZGUiLCJyYW5kb21TdGFydCIsImNhcHRpb25zIiwidGlja2VyIiwidGlja2VySG92ZXIiLCJhZGFwdGl2ZUhlaWdodCIsImFkYXB0aXZlSGVpZ2h0U3BlZWQiLCJ2aWRlbyIsInVzZUNTUyIsInByZWxvYWRJbWFnZXMiLCJyZXNwb25zaXZlIiwic2xpZGVaSW5kZXgiLCJ3cmFwcGVyQ2xhc3MiLCJ0b3VjaEVuYWJsZWQiLCJzd2lwZVRocmVzaG9sZCIsIm9uZVRvT25lVG91Y2giLCJwcmV2ZW50RGVmYXVsdFN3aXBlWCIsInByZXZlbnREZWZhdWx0U3dpcGVZIiwicGFnZXIiLCJwYWdlclR5cGUiLCJwYWdlclNob3J0U2VwYXJhdG9yIiwicGFnZXJTZWxlY3RvciIsImJ1aWxkUGFnZXIiLCJwYWdlckN1c3RvbSIsImNvbnRyb2xzIiwibmV4dFRleHQiLCJwcmV2VGV4dCIsIm5leHRTZWxlY3RvciIsInByZXZTZWxlY3RvciIsImF1dG9Db250cm9scyIsInN0YXJ0VGV4dCIsInN0b3BUZXh0IiwiYXV0b0NvbnRyb2xzQ29tYmluZSIsImF1dG9Db250cm9sc1NlbGVjdG9yIiwiYXV0byIsInBhdXNlIiwiYXV0b1N0YXJ0IiwiYXV0b0RpcmVjdGlvbiIsImF1dG9Ib3ZlciIsImF1dG9EZWxheSIsImF1dG9TbGlkZUZvck9uZVBhZ2UiLCJtaW5TbGlkZXMiLCJtYXhTbGlkZXMiLCJtb3ZlU2xpZGVzIiwic2xpZGVXaWR0aCIsIm9uU2xpZGVyTG9hZCIsIm9uU2xpZGVCZWZvcmUiLCJvblNsaWRlQWZ0ZXIiLCJvblNsaWRlTmV4dCIsIm9uU2xpZGVQcmV2Iiwib25TbGlkZXJSZXNpemUiLCJieFNsaWRlciIsImVhY2giLCJzbGlkZXIiLCJlbCIsIndpbmRvd1dpZHRoIiwid2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJoZWlnaHQiLCJpbml0Iiwic2V0dGluZ3MiLCJwYXJzZUludCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImFjdGl2ZSIsImNhcm91c2VsIiwibWluVGhyZXNob2xkIiwibWF4VGhyZXNob2xkIiwid29ya2luZyIsImludGVydmFsIiwiYW5pbVByb3AiLCJ1c2luZ0NTUyIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsImNzc1ByZWZpeCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImRhdGEiLCJhdHRyIiwic2V0dXAiLCJ3cmFwIiwidmlld3BvcnQiLCJwYXJlbnQiLCJsb2FkZXIiLCJwcmVwZW5kIiwiY3NzIiwicG9zaXRpb24iLCJnZXROdW1iZXJTbGlkZXNTaG93aW5nIiwib3ZlcmZsb3ciLCJtYXhXaWR0aCIsImdldFZpZXdwb3J0TWF4V2lkdGgiLCJtYXJnaW4iLCJmbG9hdCIsImxpc3RTdHlsZSIsImdldFNsaWRlV2lkdGgiLCJ6SW5kZXgiLCJkaXNwbGF5IiwiZXEiLCJhcHBlbmRDYXB0aW9ucyIsImxhc3QiLCJnZXRQYWdlclF0eSIsImZpdFZpZHMiLCJwcmVsb2FkU2VsZWN0b3IiLCJhcHBlbmRQYWdlciIsImFwcGVuZENvbnRyb2xzIiwiYXBwZW5kQ29udHJvbHNBdXRvIiwiYWZ0ZXIiLCJsb2FkRWxlbWVudHMiLCJzdGFydCIsInNlbGVjdG9yIiwidG90YWwiLCJmaW5kIiwiY291bnQiLCJvbmUiLCJsb2FkIiwic2xpY2VBcHBlbmQiLCJjbG9uZSIsImFkZENsYXNzIiwic2xpY2VQcmVwZW5kIiwiYXBwZW5kIiwic2V0U2xpZGVQb3NpdGlvbiIsImdldFZpZXdwb3J0SGVpZ2h0IiwicmVkcmF3U2xpZGVyIiwiaW5pdGlhbGl6ZWQiLCJyZXNpemVXaW5kb3ciLCJpbml0QXV0byIsImluaXRUaWNrZXIiLCJ1cGRhdGVQYWdlckFjdGl2ZSIsInVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzIiwiaW5pdFRvdWNoIiwiY3VycmVudEluZGV4IiwiZ2V0TW92ZUJ5IiwiYWRkIiwib3V0ZXJIZWlnaHQiLCJtYXgiLCJtYXAiLCJnZXQiLCJwYXJzZUZsb2F0IiwibmV3RWxXaWR0aCIsIndyYXBXaWR0aCIsInNsaWRlc1Nob3dpbmciLCJjaGlsZFdpZHRoIiwiZmlyc3QiLCJwYWdlclF0eSIsImNlaWwiLCJicmVha1BvaW50IiwiY291bnRlciIsImxhc3RDaGlsZCIsInNldFBvc2l0aW9uUHJvcGVydHkiLCJsZWZ0Iiwib3V0ZXJXaWR0aCIsImxhc3RTaG93aW5nSW5kZXgiLCJ0b3AiLCJkdXJhdGlvbiIsInBhcmFtcyIsInByb3BWYWx1ZSIsInVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uIiwidGlja2VyTG9vcCIsImFuaW1hdGVPYmoiLCJhbmltYXRlIiwicG9wdWxhdGVQYWdlciIsInBhZ2VySHRtbCIsImxpbmtDb250ZW50IiwiaXNGdW5jdGlvbiIsInBhZ2VyRWwiLCJodG1sIiwiY2xpY2tQYWdlckJpbmQiLCJuZXh0IiwicHJldiIsImNsaWNrTmV4dEJpbmQiLCJjbGlja1ByZXZCaW5kIiwiZGlyZWN0aW9uRWwiLCJzdG9wIiwiYXV0b0VsIiwiY2xpY2tTdGFydEJpbmQiLCJjbGlja1N0b3BCaW5kIiwidXBkYXRlQXV0b0NvbnRyb2xzIiwidGl0bGUiLCJlIiwic3RvcEF1dG8iLCJnb1RvTmV4dFNsaWRlIiwicHJldmVudERlZmF1bHQiLCJnb1RvUHJldlNsaWRlIiwic3RhcnRBdXRvIiwicGFnZXJMaW5rIiwiY3VycmVudFRhcmdldCIsInBhZ2VySW5kZXgiLCJnb1RvU2xpZGUiLCJzbGlkZUluZGV4IiwibGVuIiwicmVtb3ZlQ2xhc3MiLCJvbGRJbmRleCIsInN0YXRlIiwiaG92ZXIiLCJhdXRvUGF1c2VkIiwic3RhcnRQb3NpdGlvbiIsInRvdGFsRGltZW5zIiwicmF0aW8iLCJwcm9wZXJ0eSIsIm5ld1NwZWVkIiwiYWJzIiwicmVzdW1lU3BlZWQiLCJyZXNldCIsImFuaW1hdGVQcm9wZXJ0eSIsInJlc2V0VmFsdWUiLCJ0b3VjaCIsIngiLCJ5IiwiZW5kIiwib25Ub3VjaFN0YXJ0Iiwib3JpZ2luYWxQb3MiLCJvcmlnIiwib3JpZ2luYWxFdmVudCIsImNoYW5nZWRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsInhNb3ZlbWVudCIsInlNb3ZlbWVudCIsImNoYW5nZSIsImRpc3RhbmNlIiwid2luZG93V2lkdGhOZXciLCJ3aW5kb3dIZWlnaHROZXciLCJkaXJlY3Rpb24iLCJmaWx0ZXIiLCJmYWRlT3V0IiwiZmFkZUluIiwibW92ZUJ5IiwicmVxdWVzdEVsIiwicHJldmVudENvbnRyb2xVcGRhdGUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJnZXRDdXJyZW50U2xpZGUiLCJnZXRDdXJyZW50U2xpZGVFbGVtZW50IiwiZ2V0U2xpZGVDb3VudCIsImRlc3Ryb3lTbGlkZXIiLCJyZW1vdmVBdHRyIiwidW53cmFwIiwicmVsb2FkU2xpZGVyIiwidCIsIm4iLCJyIiwic3BlY2lhbCIsInNtYXJ0cmVzaXplIiwiaGFuZGxlciIsInRlYXJkb3duIiwicyIsImNsZWFyVGltZW91dCIsImRpc3BhdGNoIiwiTWFzb24iLCJfY3JlYXRlIiwiX2luaXQiLCJpc1Jlc2l6YWJsZSIsImlzQW5pbWF0ZWQiLCJhbmltYXRpb25PcHRpb25zIiwicXVldWUiLCJndXR0ZXJXaWR0aCIsImlzUlRMIiwiaXNGaXRXaWR0aCIsImNvbnRhaW5lclN0eWxlIiwiX2ZpbHRlckZpbmRCcmlja3MiLCJpdGVtU2VsZWN0b3IiLCJfZ2V0QnJpY2tzIiwic3R5bGVRdWV1ZSIsIm9yaWdpbmFsU3R5bGUiLCJob3Jpem9udGFsRGlyZWN0aW9uIiwibyIsInUiLCJvZmZzZXQiLCJpc0ZsdWlkIiwiY29sdW1uV2lkdGgiLCJyZXNpemUiLCJyZWxvYWRJdGVtcyIsIl9nZXRDb2x1bW5zIiwiX3JlTGF5b3V0Iiwib3B0aW9uIiwiaXNQbGFpbk9iamVjdCIsImxheW91dCIsIl9wbGFjZUJyaWNrIiwiY29sWXMiLCJjb2xzIiwiJGVsIiwiaXNMYWlkT3V0IiwiJGJyaWNrcyIsIm1pbiIsImYiLCJsIiwiYyIsImgiLCJwIiwiZCIsInJlbG9hZCIsImFwcGVuZGVkIiwiX2FwcGVuZGVkIiwibm90IiwiZGVzdHJveSIsInJlbW92ZURhdGEiLCJpbkFycmF5IiwiZXJyb3IiLCJtYXNvbnJ5IiwiY2hhckF0IiwiZ3JpZCIsIiRncmlkIiwiY29udGFpbmVyV2lkdGgiLCJzZWFyY2giLCIkc2VhcmNoS2V5IiwidmFsIiwiYWpheCIsImRhdGFUeXBlIiwic3VjY2VzcyIsIiRodG1sIiwiJGNvbnRlbnQiLCJ0bXBsIiwiYWxlcnQiLCJjYWNoZSIsInN0ciIsIkZ1bmN0aW9uIiwic3BsaXQiLCJqb2luIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiXSwibWFwcGluZ3MiOiJDQWFBLFdBQ0EsWUFRQSxTQUFBQSxNQWVBLFFBQUFDLEdBQUFDLEVBQUFDLEdBRUEsSUFEQSxHQUFBQyxHQUFBRixFQUFBRyxPQUNBRCxLQUNBLEdBQUFGLEVBQUFFLEdBQUFELFdBQUFBLEVBQ0EsTUFBQUMsRUFJQSxVQVVBLFFBQUFFLEdBQUFDLEdBQ0EsTUFBQSxZQUNBLE1BQUFDLE1BQUFELEdBQUFFLE1BQUFELEtBQUFFLFlBaENBLEdBQUFDLEdBQUFYLEVBQUFZLFVBQ0FDLEVBQUFMLEtBQ0FNLEVBQUFELEVBQUFiLFlBMkNBVyxHQUFBSSxhQUFBLFNBQUFDLEdBQ0EsR0FDQUMsR0FDQUMsRUFGQUMsRUFBQVgs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WUFBQSxTQUFBaUMsR0FDQSxNQUFBQSxHQUFBLEVBQUEsSUFFQS9DLFlBQUEsT0FLQSxRQUFBZ0QsS0FDQS9YLEVBQUEsVUFBQTZMLEtBQUEsT0FBQXpQLFFBQ0EsSUFBQTRiLEdBQUFoWSxFQUFBLGtCQUFBaVksS0FFQWpZLEdBQUFrWSxNQUNBelgsSUFBQSxvRUFBQXVYLEVBQUEsb0JBQ0FHLFNBQUEsUUFDQUMsUUFBQSxTQUFBek8sR0FFQSxHQUFBME8sR0FBQXJZLEVBQUEsY0FBQW1QLE9BQ0FtSixFQUFBQyxLQUFBRixFQUFBMU8sRUFDQTNKLEdBQUEsVUFBQXFNLE9BQUFpTSxHQUNBVixLQUVBSCxNQUFBLFdBQ0FlLE1BQUEsYUFqQ0F4WSxFQUFBLGFBQUErSCxVQUNBakIsTUFBQSxFQUNBTCxjQUFBLElBb0NBc1IsSUFFQS9YLEVBQUEsbUJBQUF4RSxHQUFBLFFBQUEsU0FBQXdVLEdBQ0FBLEVBQUFHLGlCQUNBNEgsSUFDQS9YLEVBQUEsa0JBQUFpWSxJQUFBLFFDM0NBLFdBQ0EsR0FBQVEsS0FFQXhlLE1BQUFzZSxLQUFBLFFBQUFBLEdBQUFHLEVBQUEvTyxHQUdBLEdBQUF0TCxHQUFBLEtBQUF0RCxLQUFBMmQsR0FNQSxHQUFBQyxVQUFBLE1BQ0EsMkVBTUFELEVBQ0FqUCxRQUFBLFlBQUEsS0FDQW1QLE1BQUEsTUFBQUMsS0FBQSxNQUNBcFAsUUFBQSxtQkFBQSxRQUNBQSxRQUFBLGNBQUEsVUFDQW1QLE1BQUEsTUFBQUMsS0FBQSxPQUNBRCxNQUFBLE1BQUFDLEtBQUEsWUFDQUQsTUFBQSxNQUFBQyxLQUFBLE9BQ0EsMEJBcEJBSixFQUFBQyxHQUFBRCxFQUFBQyxJQUNBSCxFQUFBdGEsU0FBQTZhLGVBQUFKLEdBQUFLLFVBc0JBLE9BQUFwUCxHQUFBdEwsRUFBQXNMLEdBQUF0TCIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBpbWFnZXNMb2FkZWQgUEFDS0FHRUQgdjMuMi4wXG4gKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlIFwiWW91IGltYWdlcyBhcmUgZG9uZSB5ZXQgb3Igd2hhdD9cIlxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4vKiFcbiAqIEV2ZW50RW1pdHRlciB2NC4yLjYgLSBnaXQuaW8vZWVcbiAqIE9saXZlciBDYWxkd2VsbFxuICogTUlUIGxpY2Vuc2VcbiAqIEBwcmVzZXJ2ZVxuICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0ICogQ2xhc3MgZm9yIG1hbmFnaW5nIGV2ZW50cy5cblx0ICogQ2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgZXZlbnQgZnVuY3Rpb25hbGl0eSBpbiBvdGhlciBjbGFzc2VzLlxuXHQgKlxuXHQgKiBAY2xhc3MgRXZlbnRFbWl0dGVyIE1hbmFnZXMgZXZlbnQgcmVnaXN0ZXJpbmcgYW5kIGVtaXR0aW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge31cblxuXHQvLyBTaG9ydGN1dHMgdG8gaW1wcm92ZSBzcGVlZCBhbmQgc2l6ZVxuXHR2YXIgcHJvdG8gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlO1xuXHR2YXIgZXhwb3J0cyA9IHRoaXM7XG5cdHZhciBvcmlnaW5hbEdsb2JhbFZhbHVlID0gZXhwb3J0cy5FdmVudEVtaXR0ZXI7XG5cblx0LyoqXG5cdCAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgbGlzdGVuZXIgZm9yIHRoZSBldmVudCBpbiBpdCdzIHN0b3JhZ2UgYXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gbGlzdGVuZXJzIEFycmF5IG9mIGxpc3RlbmVycyB0byBzZWFyY2ggdGhyb3VnaC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgTWV0aG9kIHRvIGxvb2sgZm9yLlxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IEluZGV4IG9mIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIsIC0xIGlmIG5vdCBmb3VuZFxuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnMsIGxpc3RlbmVyKSB7XG5cdFx0dmFyIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdGlmIChsaXN0ZW5lcnNbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAtMTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBbGlhcyBhIG1ldGhvZCB3aGlsZSBrZWVwaW5nIHRoZSBjb250ZXh0IGNvcnJlY3QsIHRvIGFsbG93IGZvciBvdmVyd3JpdGluZyBvZiB0YXJnZXQgbWV0aG9kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFyZ2V0IG1ldGhvZC5cblx0ICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBhbGlhc2VkIG1ldGhvZFxuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFsaWFzKG5hbWUpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gYWxpYXNDbG9zdXJlKCkge1xuXHRcdFx0cmV0dXJuIHRoaXNbbmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuXHQgKiBXaWxsIGluaXRpYWxpc2UgdGhlIGV2ZW50IG9iamVjdCBhbmQgbGlzdGVuZXIgYXJyYXlzIGlmIHJlcXVpcmVkLlxuXHQgKiBXaWxsIHJldHVybiBhbiBvYmplY3QgaWYgeW91IHVzZSBhIHJlZ2V4IHNlYXJjaC4gVGhlIG9iamVjdCBjb250YWlucyBrZXlzIGZvciBlYWNoIG1hdGNoZWQgZXZlbnQuIFNvIC9iYVtyel0vIG1pZ2h0IHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyBiYXIgYW5kIGJhei4gQnV0IG9ubHkgaWYgeW91IGhhdmUgZWl0aGVyIGRlZmluZWQgdGhlbSB3aXRoIGRlZmluZUV2ZW50IG9yIGFkZGVkIHNvbWUgbGlzdGVuZXJzIHRvIHRoZW0uXG5cdCAqIEVhY2ggcHJvcGVydHkgaW4gdGhlIG9iamVjdCByZXNwb25zZSBpcyBhbiBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gZXZ0IE5hbWUgb2YgdGhlIGV2ZW50IHRvIHJldHVybiB0aGUgbGlzdGVuZXJzIGZyb20uXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9uW118T2JqZWN0fSBBbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGZvciB0aGUgZXZlbnQuXG5cdCAqL1xuXHRwcm90by5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRMaXN0ZW5lcnMoZXZ0KSB7XG5cdFx0dmFyIGV2ZW50cyA9IHRoaXMuX2dldEV2ZW50cygpO1xuXHRcdHZhciByZXNwb25zZTtcblx0XHR2YXIga2V5O1xuXG5cdFx0Ly8gUmV0dXJuIGEgY29uY2F0ZW5hdGVkIGFycmF5IG9mIGFsbCBtYXRjaGluZyBldmVudHMgaWZcblx0XHQvLyB0aGUgc2VsZWN0b3IgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG5cdFx0aWYgKHR5cGVvZiBldnQgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRyZXNwb25zZSA9IHt9O1xuXHRcdFx0Zm9yIChrZXkgaW4gZXZlbnRzKSB7XG5cdFx0XHRcdGlmIChldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBldnQudGVzdChrZXkpKSB7XG5cdFx0XHRcdFx0cmVzcG9uc2Vba2V5XSA9IGV2ZW50c1trZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0cmVzcG9uc2UgPSBldmVudHNbZXZ0XSB8fCAoZXZlbnRzW2V2dF0gPSBbXSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBUYWtlcyBhIGxpc3Qgb2YgbGlzdGVuZXIgb2JqZWN0cyBhbmQgZmxhdHRlbnMgaXQgaW50byBhIGxpc3Qgb2YgbGlzdGVuZXIgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdFtdfSBsaXN0ZW5lcnMgUmF3IGxpc3RlbmVyIG9iamVjdHMuXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9uW119IEp1c3QgdGhlIGxpc3RlbmVyIGZ1bmN0aW9ucy5cblx0ICovXG5cdHByb3RvLmZsYXR0ZW5MaXN0ZW5lcnMgPSBmdW5jdGlvbiBmbGF0dGVuTGlzdGVuZXJzKGxpc3RlbmVycykge1xuXHRcdHZhciBmbGF0TGlzdGVuZXJzID0gW107XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRmbGF0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXJzW2ldLmxpc3RlbmVyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmxhdExpc3RlbmVycztcblx0fTtcblxuXHQvKipcblx0ICogRmV0Y2hlcyB0aGUgcmVxdWVzdGVkIGxpc3RlbmVycyB2aWEgZ2V0TGlzdGVuZXJzIGJ1dCB3aWxsIGFsd2F5cyByZXR1cm4gdGhlIHJlc3VsdHMgaW5zaWRlIGFuIG9iamVjdC4gVGhpcyBpcyBtYWlubHkgZm9yIGludGVybmFsIHVzZSBidXQgb3RoZXJzIG1heSBmaW5kIGl0IHVzZWZ1bC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmV0dXJuIHRoZSBsaXN0ZW5lcnMgZnJvbS5cblx0ICogQHJldHVybiB7T2JqZWN0fSBBbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGZvciBhbiBldmVudCBpbiBhbiBvYmplY3QuXG5cdCAqL1xuXHRwcm90by5nZXRMaXN0ZW5lcnNBc09iamVjdCA9IGZ1bmN0aW9uIGdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCkge1xuXHRcdHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVycyhldnQpO1xuXHRcdHZhciByZXNwb25zZTtcblxuXHRcdGlmIChsaXN0ZW5lcnMgaW5zdGFuY2VvZiBBcnJheSkge1xuXHRcdFx0cmVzcG9uc2UgPSB7fTtcblx0XHRcdHJlc3BvbnNlW2V2dF0gPSBsaXN0ZW5lcnM7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3BvbnNlIHx8IGxpc3RlbmVycztcblx0fTtcblxuXHQvKipcblx0ICogQWRkcyBhIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG5cdCAqIFRoZSBsaXN0ZW5lciB3aWxsIG5vdCBiZSBhZGRlZCBpZiBpdCBpcyBhIGR1cGxpY2F0ZS5cblx0ICogSWYgdGhlIGxpc3RlbmVyIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBhZnRlciBpdCBpcyBjYWxsZWQuXG5cdCAqIElmIHlvdSBwYXNzIGEgcmVndWxhciBleHByZXNzaW9uIGFzIHRoZSBldmVudCBuYW1lIHRoZW4gdGhlIGxpc3RlbmVyIHdpbGwgYmUgYWRkZWQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUgdGhlbiBpdCB3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgY2FsbGluZy5cblx0ICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG5cdCAqL1xuXHRwcm90by5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKGV2dCwgbGlzdGVuZXIpIHtcblx0XHR2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuXHRcdHZhciBsaXN0ZW5lcklzV3JhcHBlZCA9IHR5cGVvZiBsaXN0ZW5lciA9PT0gJ29iamVjdCc7XG5cdFx0dmFyIGtleTtcblxuXHRcdGZvciAoa2V5IGluIGxpc3RlbmVycykge1xuXHRcdFx0aWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSwgbGlzdGVuZXIpID09PSAtMSkge1xuXHRcdFx0XHRsaXN0ZW5lcnNba2V5XS5wdXNoKGxpc3RlbmVySXNXcmFwcGVkID8gbGlzdGVuZXIgOiB7XG5cdFx0XHRcdFx0bGlzdGVuZXI6IGxpc3RlbmVyLFxuXHRcdFx0XHRcdG9uY2U6IGZhbHNlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBBbGlhcyBvZiBhZGRMaXN0ZW5lclxuXHQgKi9cblx0cHJvdG8ub24gPSBhbGlhcygnYWRkTGlzdGVuZXInKTtcblxuXHQvKipcblx0ICogU2VtaS1hbGlhcyBvZiBhZGRMaXN0ZW5lci4gSXQgd2lsbCBhZGQgYSBsaXN0ZW5lciB0aGF0IHdpbGwgYmVcblx0ICogYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIGl0J3MgZmlyc3QgZXhlY3V0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUgdGhlbiBpdCB3aWxsIGJlIHJlbW92ZWQgYWZ0ZXIgY2FsbGluZy5cblx0ICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG5cdCAqL1xuXHRwcm90by5hZGRPbmNlTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRPbmNlTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lcikge1xuXHRcdHJldHVybiB0aGlzLmFkZExpc3RlbmVyKGV2dCwge1xuXHRcdFx0bGlzdGVuZXI6IGxpc3RlbmVyLFxuXHRcdFx0b25jZTogdHJ1ZVxuXHRcdH0pO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBBbGlhcyBvZiBhZGRPbmNlTGlzdGVuZXIuXG5cdCAqL1xuXHRwcm90by5vbmNlID0gYWxpYXMoJ2FkZE9uY2VMaXN0ZW5lcicpO1xuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIGFuIGV2ZW50IG5hbWUuIFRoaXMgaXMgcmVxdWlyZWQgaWYgeW91IHdhbnQgdG8gdXNlIGEgcmVnZXggdG8gYWRkIGEgbGlzdGVuZXIgdG8gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuIElmIHlvdSBkb24ndCBkbyB0aGlzIHRoZW4gaG93IGRvIHlvdSBleHBlY3QgaXQgdG8ga25vdyB3aGF0IGV2ZW50IHRvIGFkZCB0bz8gU2hvdWxkIGl0IGp1c3QgYWRkIHRvIGV2ZXJ5IHBvc3NpYmxlIG1hdGNoIGZvciBhIHJlZ2V4PyBOby4gVGhhdCBpcyBzY2FyeSBhbmQgYmFkLlxuXHQgKiBZb3UgbmVlZCB0byB0ZWxsIGl0IHdoYXQgZXZlbnQgbmFtZXMgc2hvdWxkIGJlIG1hdGNoZWQgYnkgYSByZWdleC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBjcmVhdGUuXG5cdCAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuXHQgKi9cblx0cHJvdG8uZGVmaW5lRXZlbnQgPSBmdW5jdGlvbiBkZWZpbmVFdmVudChldnQpIHtcblx0XHR0aGlzLmdldExpc3RlbmVycyhldnQpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBVc2VzIGRlZmluZUV2ZW50IHRvIGRlZmluZSBtdWx0aXBsZSBldmVudHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nW119IGV2dHMgQW4gYXJyYXkgb2YgZXZlbnQgbmFtZXMgdG8gZGVmaW5lLlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cblx0ICovXG5cdHByb3RvLmRlZmluZUV2ZW50cyA9IGZ1bmN0aW9uIGRlZmluZUV2ZW50cyhldnRzKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBldnRzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHR0aGlzLmRlZmluZUV2ZW50KGV2dHNbaV0pO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogUmVtb3ZlcyBhIGxpc3RlbmVyIGZ1bmN0aW9uIGZyb20gdGhlIHNwZWNpZmllZCBldmVudC5cblx0ICogV2hlbiBwYXNzZWQgYSByZWd1bGFyIGV4cHJlc3Npb24gYXMgdGhlIGV2ZW50IG5hbWUsIGl0IHdpbGwgcmVtb3ZlIHRoZSBsaXN0ZW5lciBmcm9tIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBmcm9tLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBNZXRob2QgdG8gcmVtb3ZlIGZyb20gdGhlIGV2ZW50LlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cblx0ICovXG5cdHByb3RvLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZ0LCBsaXN0ZW5lcikge1xuXHRcdHZhciBsaXN0ZW5lcnMgPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGV2dCk7XG5cdFx0dmFyIGluZGV4O1xuXHRcdHZhciBrZXk7XG5cblx0XHRmb3IgKGtleSBpbiBsaXN0ZW5lcnMpIHtcblx0XHRcdGlmIChsaXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRpbmRleCA9IGluZGV4T2ZMaXN0ZW5lcihsaXN0ZW5lcnNba2V5XSwgbGlzdGVuZXIpO1xuXG5cdFx0XHRcdGlmIChpbmRleCAhPT0gLTEpIHtcblx0XHRcdFx0XHRsaXN0ZW5lcnNba2V5XS5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cblx0LyoqXG5cdCAqIEFsaWFzIG9mIHJlbW92ZUxpc3RlbmVyXG5cdCAqL1xuXHRwcm90by5vZmYgPSBhbGlhcygncmVtb3ZlTGlzdGVuZXInKTtcblxuXHQvKipcblx0ICogQWRkcyBsaXN0ZW5lcnMgaW4gYnVsayB1c2luZyB0aGUgbWFuaXB1bGF0ZUxpc3RlbmVycyBtZXRob2QuXG5cdCAqIElmIHlvdSBwYXNzIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHlvdSBjYW4gYWRkIHRvIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlLiBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIGtleSB2YWx1ZSBwYWlycyBvZiBldmVudHMgYW5kIGxpc3RlbmVycyBvciBsaXN0ZW5lciBhcnJheXMuIFlvdSBjYW4gYWxzbyBwYXNzIGl0IGFuIGV2ZW50IG5hbWUgYW5kIGFuIGFycmF5IG9mIGxpc3RlbmVycyB0byBiZSBhZGRlZC5cblx0ICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gYWRkIHRoZSBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuXHQgKiBZZWFoLCB0aGlzIGZ1bmN0aW9uIGRvZXMgcXVpdGUgYSBiaXQuIFRoYXQncyBwcm9iYWJseSBhIGJhZCB0aGluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fFJlZ0V4cH0gZXZ0IEFuIGV2ZW50IG5hbWUgaWYgeW91IHdpbGwgcGFzcyBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgbmV4dC4gQW4gb2JqZWN0IGlmIHlvdSB3aXNoIHRvIGFkZCB0byBtdWx0aXBsZSBldmVudHMgYXQgb25jZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gYWRkLlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cblx0ICovXG5cdHByb3RvLmFkZExpc3RlbmVycyA9IGZ1bmN0aW9uIGFkZExpc3RlbmVycyhldnQsIGxpc3RlbmVycykge1xuXHRcdC8vIFBhc3MgdGhyb3VnaCB0byBtYW5pcHVsYXRlTGlzdGVuZXJzXG5cdFx0cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyhmYWxzZSwgZXZ0LCBsaXN0ZW5lcnMpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGxpc3RlbmVycyBpbiBidWxrIHVzaW5nIHRoZSBtYW5pcHVsYXRlTGlzdGVuZXJzIG1ldGhvZC5cblx0ICogSWYgeW91IHBhc3MgYW4gb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgeW91IGNhbiByZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLlxuXHQgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgcmVtb3ZlZC5cblx0ICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgZnJvbSBhbGwgZXZlbnRzIHRoYXQgbWF0Y2ggaXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byByZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbltdfSBbbGlzdGVuZXJzXSBBbiBvcHRpb25hbCBhcnJheSBvZiBsaXN0ZW5lciBmdW5jdGlvbnMgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cblx0ICovXG5cdHByb3RvLnJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycyhldnQsIGxpc3RlbmVycykge1xuXHRcdC8vIFBhc3MgdGhyb3VnaCB0byBtYW5pcHVsYXRlTGlzdGVuZXJzXG5cdFx0cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyh0cnVlLCBldnQsIGxpc3RlbmVycyk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVkaXRzIGxpc3RlbmVycyBpbiBidWxrLiBUaGUgYWRkTGlzdGVuZXJzIGFuZCByZW1vdmVMaXN0ZW5lcnMgbWV0aG9kcyBib3RoIHVzZSB0aGlzIHRvIGRvIHRoZWlyIGpvYi4gWW91IHNob3VsZCByZWFsbHkgdXNlIHRob3NlIGluc3RlYWQsIHRoaXMgaXMgYSBsaXR0bGUgbG93ZXIgbGV2ZWwuXG5cdCAqIFRoZSBmaXJzdCBhcmd1bWVudCB3aWxsIGRldGVybWluZSBpZiB0aGUgbGlzdGVuZXJzIGFyZSByZW1vdmVkICh0cnVlKSBvciBhZGRlZCAoZmFsc2UpLlxuXHQgKiBJZiB5b3UgcGFzcyBhbiBvYmplY3QgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB5b3UgY2FuIGFkZC9yZW1vdmUgZnJvbSBtdWx0aXBsZSBldmVudHMgYXQgb25jZS4gVGhlIG9iamVjdCBzaG91bGQgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgb2YgZXZlbnRzIGFuZCBsaXN0ZW5lcnMgb3IgbGlzdGVuZXIgYXJyYXlzLlxuXHQgKiBZb3UgY2FuIGFsc28gcGFzcyBpdCBhbiBldmVudCBuYW1lIGFuZCBhbiBhcnJheSBvZiBsaXN0ZW5lcnMgdG8gYmUgYWRkZWQvcmVtb3ZlZC5cblx0ICogWW91IGNhbiBhbHNvIHBhc3MgaXQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWFuaXB1bGF0ZSB0aGUgbGlzdGVuZXJzIG9mIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cblx0ICpcblx0ICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgVHJ1ZSBpZiB5b3Ugd2FudCB0byByZW1vdmUgbGlzdGVuZXJzLCBmYWxzZSBpZiB5b3Ugd2FudCB0byBhZGQuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdHxSZWdFeHB9IGV2dCBBbiBldmVudCBuYW1lIGlmIHlvdSB3aWxsIHBhc3MgYW4gYXJyYXkgb2YgbGlzdGVuZXJzIG5leHQuIEFuIG9iamVjdCBpZiB5b3Ugd2lzaCB0byBhZGQvcmVtb3ZlIGZyb20gbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2UuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb25bXX0gW2xpc3RlbmVyc10gQW4gb3B0aW9uYWwgYXJyYXkgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRvIGFkZC9yZW1vdmUuXG5cdCAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuXHQgKi9cblx0cHJvdG8ubWFuaXB1bGF0ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIG1hbmlwdWxhdGVMaXN0ZW5lcnMocmVtb3ZlLCBldnQsIGxpc3RlbmVycykge1xuXHRcdHZhciBpO1xuXHRcdHZhciB2YWx1ZTtcblx0XHR2YXIgc2luZ2xlID0gcmVtb3ZlID8gdGhpcy5yZW1vdmVMaXN0ZW5lciA6IHRoaXMuYWRkTGlzdGVuZXI7XG5cdFx0dmFyIG11bHRpcGxlID0gcmVtb3ZlID8gdGhpcy5yZW1vdmVMaXN0ZW5lcnMgOiB0aGlzLmFkZExpc3RlbmVycztcblxuXHRcdC8vIElmIGV2dCBpcyBhbiBvYmplY3QgdGhlbiBwYXNzIGVhY2ggb2YgaXQncyBwcm9wZXJ0aWVzIHRvIHRoaXMgbWV0aG9kXG5cdFx0aWYgKHR5cGVvZiBldnQgPT09ICdvYmplY3QnICYmICEoZXZ0IGluc3RhbmNlb2YgUmVnRXhwKSkge1xuXHRcdFx0Zm9yIChpIGluIGV2dCkge1xuXHRcdFx0XHRpZiAoZXZ0Lmhhc093blByb3BlcnR5KGkpICYmICh2YWx1ZSA9IGV2dFtpXSkpIHtcblx0XHRcdFx0XHQvLyBQYXNzIHRoZSBzaW5nbGUgbGlzdGVuZXIgc3RyYWlnaHQgdGhyb3VnaCB0byB0aGUgc2luZ3VsYXIgbWV0aG9kXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0c2luZ2xlLmNhbGwodGhpcywgaSwgdmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSBwYXNzIGJhY2sgdG8gdGhlIG11bHRpcGxlIGZ1bmN0aW9uXG5cdFx0XHRcdFx0XHRtdWx0aXBsZS5jYWxsKHRoaXMsIGksIHZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHQvLyBTbyBldnQgbXVzdCBiZSBhIHN0cmluZ1xuXHRcdFx0Ly8gQW5kIGxpc3RlbmVycyBtdXN0IGJlIGFuIGFycmF5IG9mIGxpc3RlbmVyc1xuXHRcdFx0Ly8gTG9vcCBvdmVyIGl0IGFuZCBwYXNzIGVhY2ggb25lIHRvIHRoZSBtdWx0aXBsZSBtZXRob2Rcblx0XHRcdGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHRzaW5nbGUuY2FsbCh0aGlzLCBldnQsIGxpc3RlbmVyc1tpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBmcm9tIGEgc3BlY2lmaWVkIGV2ZW50LlxuXHQgKiBJZiB5b3UgZG8gbm90IHNwZWNpZnkgYW4gZXZlbnQgdGhlbiBhbGwgbGlzdGVuZXJzIHdpbGwgYmUgcmVtb3ZlZC5cblx0ICogVGhhdCBtZWFucyBldmVyeSBldmVudCB3aWxsIGJlIGVtcHRpZWQuXG5cdCAqIFlvdSBjYW4gYWxzbyBwYXNzIGEgcmVnZXggdG8gcmVtb3ZlIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBbZXZ0XSBPcHRpb25hbCBuYW1lIG9mIHRoZSBldmVudCB0byByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IuIFdpbGwgcmVtb3ZlIGZyb20gZXZlcnkgZXZlbnQgaWYgbm90IHBhc3NlZC5cblx0ICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG5cdCAqL1xuXHRwcm90by5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50KGV2dCkge1xuXHRcdHZhciB0eXBlID0gdHlwZW9mIGV2dDtcblx0XHR2YXIgZXZlbnRzID0gdGhpcy5fZ2V0RXZlbnRzKCk7XG5cdFx0dmFyIGtleTtcblxuXHRcdC8vIFJlbW92ZSBkaWZmZXJlbnQgdGhpbmdzIGRlcGVuZGluZyBvbiB0aGUgc3RhdGUgb2YgZXZ0XG5cdFx0aWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgdGhlIHNwZWNpZmllZCBldmVudFxuXHRcdFx0ZGVsZXRlIGV2ZW50c1tldnRdO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBldmVudHMgbWF0Y2hpbmcgdGhlIHJlZ2V4LlxuXHRcdFx0Zm9yIChrZXkgaW4gZXZlbnRzKSB7XG5cdFx0XHRcdGlmIChldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBldnQudGVzdChrZXkpKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIGV2ZW50c1trZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgaW4gYWxsIGV2ZW50c1xuXHRcdFx0ZGVsZXRlIHRoaXMuX2V2ZW50cztcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQWxpYXMgb2YgcmVtb3ZlRXZlbnQuXG5cdCAqXG5cdCAqIEFkZGVkIHRvIG1pcnJvciB0aGUgbm9kZSBBUEkuXG5cdCAqL1xuXHRwcm90by5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBhbGlhcygncmVtb3ZlRXZlbnQnKTtcblxuXHQvKipcblx0ICogRW1pdHMgYW4gZXZlbnQgb2YgeW91ciBjaG9pY2UuXG5cdCAqIFdoZW4gZW1pdHRlZCwgZXZlcnkgbGlzdGVuZXIgYXR0YWNoZWQgdG8gdGhhdCBldmVudCB3aWxsIGJlIGV4ZWN1dGVkLlxuXHQgKiBJZiB5b3UgcGFzcyB0aGUgb3B0aW9uYWwgYXJndW1lbnQgYXJyYXkgdGhlbiB0aG9zZSBhcmd1bWVudHMgd2lsbCBiZSBwYXNzZWQgdG8gZXZlcnkgbGlzdGVuZXIgdXBvbiBleGVjdXRpb24uXG5cdCAqIEJlY2F1c2UgaXQgdXNlcyBgYXBwbHlgLCB5b3VyIGFycmF5IG9mIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCBhcyBpZiB5b3Ugd3JvdGUgdGhlbSBvdXQgc2VwYXJhdGVseS5cblx0ICogU28gdGhleSB3aWxsIG5vdCBhcnJpdmUgd2l0aGluIHRoZSBhcnJheSBvbiB0aGUgb3RoZXIgc2lkZSwgdGhleSB3aWxsIGJlIHNlcGFyYXRlLlxuXHQgKiBZb3UgY2FuIGFsc28gcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBlbWl0IHRvIGFsbCBldmVudHMgdGhhdCBtYXRjaCBpdC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8UmVnRXhwfSBldnQgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZW1pdCBhbmQgZXhlY3V0ZSBsaXN0ZW5lcnMgZm9yLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJnc10gT3B0aW9uYWwgYXJyYXkgb2YgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byBlYWNoIGxpc3RlbmVyLlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IEN1cnJlbnQgaW5zdGFuY2Ugb2YgRXZlbnRFbWl0dGVyIGZvciBjaGFpbmluZy5cblx0ICovXG5cdHByb3RvLmVtaXRFdmVudCA9IGZ1bmN0aW9uIGVtaXRFdmVudChldnQsIGFyZ3MpIHtcblx0XHR2YXIgbGlzdGVuZXJzID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChldnQpO1xuXHRcdHZhciBsaXN0ZW5lcjtcblx0XHR2YXIgaTtcblx0XHR2YXIga2V5O1xuXHRcdHZhciByZXNwb25zZTtcblxuXHRcdGZvciAoa2V5IGluIGxpc3RlbmVycykge1xuXHRcdFx0aWYgKGxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdGkgPSBsaXN0ZW5lcnNba2V5XS5sZW5ndGg7XG5cblx0XHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHRcdC8vIElmIHRoZSBsaXN0ZW5lciByZXR1cm5zIHRydWUgdGhlbiBpdCBzaGFsbCBiZSByZW1vdmVkIGZyb20gdGhlIGV2ZW50XG5cdFx0XHRcdFx0Ly8gVGhlIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGVpdGhlciB3aXRoIGEgYmFzaWMgY2FsbCBvciBhbiBhcHBseSBpZiB0aGVyZSBpcyBhbiBhcmdzIGFycmF5XG5cdFx0XHRcdFx0bGlzdGVuZXIgPSBsaXN0ZW5lcnNba2V5XVtpXTtcblxuXHRcdFx0XHRcdGlmIChsaXN0ZW5lci5vbmNlID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIubGlzdGVuZXIpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJlc3BvbnNlID0gbGlzdGVuZXIubGlzdGVuZXIuYXBwbHkodGhpcywgYXJncyB8fCBbXSk7XG5cblx0XHRcdFx0XHRpZiAocmVzcG9uc2UgPT09IHRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbW92ZUxpc3RlbmVyKGV2dCwgbGlzdGVuZXIubGlzdGVuZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBBbGlhcyBvZiBlbWl0RXZlbnRcblx0ICovXG5cdHByb3RvLnRyaWdnZXIgPSBhbGlhcygnZW1pdEV2ZW50Jyk7XG5cblx0LyoqXG5cdCAqIFN1YnRseSBkaWZmZXJlbnQgZnJvbSBlbWl0RXZlbnQgaW4gdGhhdCBpdCB3aWxsIHBhc3MgaXRzIGFyZ3VtZW50cyBvbiB0byB0aGUgbGlzdGVuZXJzLCBhcyBvcHBvc2VkIHRvIHRha2luZyBhIHNpbmdsZSBhcnJheSBvZiBhcmd1bWVudHMgdG8gcGFzcyBvbi5cblx0ICogQXMgd2l0aCBlbWl0RXZlbnQsIHlvdSBjYW4gcGFzcyBhIHJlZ2V4IGluIHBsYWNlIG9mIHRoZSBldmVudCBuYW1lIHRvIGVtaXQgdG8gYWxsIGV2ZW50cyB0aGF0IG1hdGNoIGl0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xSZWdFeHB9IGV2dCBOYW1lIG9mIHRoZSBldmVudCB0byBlbWl0IGFuZCBleGVjdXRlIGxpc3RlbmVycyBmb3IuXG5cdCAqIEBwYXJhbSB7Li4uKn0gT3B0aW9uYWwgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGVhY2ggbGlzdGVuZXIuXG5cdCAqIEByZXR1cm4ge09iamVjdH0gQ3VycmVudCBpbnN0YW5jZSBvZiBFdmVudEVtaXR0ZXIgZm9yIGNoYWluaW5nLlxuXHQgKi9cblx0cHJvdG8uZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZ0KSB7XG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcdHJldHVybiB0aGlzLmVtaXRFdmVudChldnQsIGFyZ3MpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBjdXJyZW50IHZhbHVlIHRvIGNoZWNrIGFnYWluc3Qgd2hlbiBleGVjdXRpbmcgbGlzdGVuZXJzLiBJZiBhXG5cdCAqIGxpc3RlbmVycyByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGUgb25lIHNldCBoZXJlIHRoZW4gaXQgd2lsbCBiZSByZW1vdmVkXG5cdCAqIGFmdGVyIGV4ZWN1dGlvbi4gVGhpcyB2YWx1ZSBkZWZhdWx0cyB0byB0cnVlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBuZXcgdmFsdWUgdG8gY2hlY2sgZm9yIHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy5cblx0ICogQHJldHVybiB7T2JqZWN0fSBDdXJyZW50IGluc3RhbmNlIG9mIEV2ZW50RW1pdHRlciBmb3IgY2hhaW5pbmcuXG5cdCAqL1xuXHRwcm90by5zZXRPbmNlUmV0dXJuVmFsdWUgPSBmdW5jdGlvbiBzZXRPbmNlUmV0dXJuVmFsdWUodmFsdWUpIHtcblx0XHR0aGlzLl9vbmNlUmV0dXJuVmFsdWUgPSB2YWx1ZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogRmV0Y2hlcyB0aGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBhZ2FpbnN0IHdoZW4gZXhlY3V0aW5nIGxpc3RlbmVycy4gSWZcblx0ICogdGhlIGxpc3RlbmVycyByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGlzIG9uZSB0aGVuIGl0IHNob3VsZCBiZSByZW1vdmVkXG5cdCAqIGF1dG9tYXRpY2FsbHkuIEl0IHdpbGwgcmV0dXJuIHRydWUgYnkgZGVmYXVsdC5cblx0ICpcblx0ICogQHJldHVybiB7KnxCb29sZWFufSBUaGUgY3VycmVudCB2YWx1ZSB0byBjaGVjayBmb3Igb3IgdGhlIGRlZmF1bHQsIHRydWUuXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0cHJvdG8uX2dldE9uY2VSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uIF9nZXRPbmNlUmV0dXJuVmFsdWUoKSB7XG5cdFx0aWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ19vbmNlUmV0dXJuVmFsdWUnKSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEZldGNoZXMgdGhlIGV2ZW50cyBvYmplY3QgYW5kIGNyZWF0ZXMgb25lIGlmIHJlcXVpcmVkLlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBldmVudHMgc3RvcmFnZSBvYmplY3QuXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0cHJvdG8uX2dldEV2ZW50cyA9IGZ1bmN0aW9uIF9nZXRFdmVudHMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2V2ZW50cyB8fCAodGhpcy5fZXZlbnRzID0ge30pO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBSZXZlcnRzIHRoZSBnbG9iYWwge0BsaW5rIEV2ZW50RW1pdHRlcn0gdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgdmVyc2lvbi5cblx0ICpcblx0ICogQHJldHVybiB7RnVuY3Rpb259IE5vbiBjb25mbGljdGluZyBFdmVudEVtaXR0ZXIgY2xhc3MuXG5cdCAqL1xuXHRFdmVudEVtaXR0ZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG5cdFx0ZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBvcmlnaW5hbEdsb2JhbFZhbHVlO1xuXHRcdHJldHVybiBFdmVudEVtaXR0ZXI7XG5cdH07XG5cblx0Ly8gRXhwb3NlIHRoZSBjbGFzcyBlaXRoZXIgdmlhIEFNRCwgQ29tbW9uSlMgb3IgdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZSgnZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlcicsW10sZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIEV2ZW50RW1pdHRlcjtcblx0XHR9KTtcblx0fVxuXHRlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyl7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cdH1cblx0ZWxzZSB7XG5cdFx0dGhpcy5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cdH1cbn0uY2FsbCh0aGlzKSk7XG5cbi8qIVxuICogZXZlbnRpZSB2MS4wLjRcbiAqIGV2ZW50IGJpbmRpbmcgaGVscGVyXG4gKiAgIGV2ZW50aWUuYmluZCggZWxlbSwgJ2NsaWNrJywgbXlGbiApXG4gKiAgIGV2ZW50aWUudW5iaW5kKCBlbGVtLCAnY2xpY2snLCBteUZuIClcbiAqL1xuXG4vKmpzaGludCBicm93c2VyOiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlICovXG4vKmdsb2JhbCBkZWZpbmU6IGZhbHNlICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdyApIHtcblxuXG5cbnZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG52YXIgYmluZCA9IGZ1bmN0aW9uKCkge307XG5cbmZ1bmN0aW9uIGdldElFRXZlbnQoIG9iaiApIHtcbiAgdmFyIGV2ZW50ID0gd2luZG93LmV2ZW50O1xuICAvLyBhZGQgZXZlbnQudGFyZ2V0XG4gIGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50IHx8IG9iajtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG5pZiAoIGRvY0VsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9iai5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBmbiwgZmFsc2UgKTtcbiAgfTtcbn0gZWxzZSBpZiAoIGRvY0VsZW0uYXR0YWNoRXZlbnQgKSB7XG4gIGJpbmQgPSBmdW5jdGlvbiggb2JqLCB0eXBlLCBmbiApIHtcbiAgICBvYmpbIHR5cGUgKyBmbiBdID0gZm4uaGFuZGxlRXZlbnQgP1xuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBldmVudCA9IGdldElFRXZlbnQoIG9iaiApO1xuICAgICAgICBmbi5oYW5kbGVFdmVudC5jYWxsKCBmbiwgZXZlbnQgKTtcbiAgICAgIH0gOlxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBldmVudCA9IGdldElFRXZlbnQoIG9iaiApO1xuICAgICAgICBmbi5jYWxsKCBvYmosIGV2ZW50ICk7XG4gICAgICB9O1xuICAgIG9iai5hdHRhY2hFdmVudCggXCJvblwiICsgdHlwZSwgb2JqWyB0eXBlICsgZm4gXSApO1xuICB9O1xufVxuXG52YXIgdW5iaW5kID0gZnVuY3Rpb24oKSB7fTtcblxuaWYgKCBkb2NFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG4gIHVuYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBmbiwgZmFsc2UgKTtcbiAgfTtcbn0gZWxzZSBpZiAoIGRvY0VsZW0uZGV0YWNoRXZlbnQgKSB7XG4gIHVuYmluZCA9IGZ1bmN0aW9uKCBvYmosIHR5cGUsIGZuICkge1xuICAgIG9iai5kZXRhY2hFdmVudCggXCJvblwiICsgdHlwZSwgb2JqWyB0eXBlICsgZm4gXSApO1xuICAgIHRyeSB7XG4gICAgICBkZWxldGUgb2JqWyB0eXBlICsgZm4gXTtcbiAgICB9IGNhdGNoICggZXJyICkge1xuICAgICAgLy8gY2FuJ3QgZGVsZXRlIHdpbmRvdyBvYmplY3QgcHJvcGVydGllc1xuICAgICAgb2JqWyB0eXBlICsgZm4gXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG59XG5cbnZhciBldmVudGllID0ge1xuICBiaW5kOiBiaW5kLFxuICB1bmJpbmQ6IHVuYmluZFxufTtcblxuLy8gdHJhbnNwb3J0XG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgLy8gQU1EXG4gIGRlZmluZSggJ2V2ZW50aWUvZXZlbnRpZScsZXZlbnRpZSApO1xufSBlbHNlIHtcbiAgLy8gYnJvd3NlciBnbG9iYWxcbiAgd2luZG93LmV2ZW50aWUgPSBldmVudGllO1xufVxuXG59KSggdGhpcyApO1xuXG4vKiFcbiAqIGltYWdlc0xvYWRlZCB2My4yLjBcbiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgXCJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0P1wiXG4gKiBNSVQgTGljZW5zZVxuICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdywgZmFjdG9yeSApIHsgJ3VzZSBzdHJpY3QnO1xuICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cblxuICAvKmdsb2JhbCBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlLCByZXF1aXJlOiBmYWxzZSAqL1xuXG4gIGlmICggdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XG4gICAgLy8gQU1EXG4gICAgZGVmaW5lKCBbXG4gICAgICAnZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlcicsXG4gICAgICAnZXZlbnRpZS9ldmVudGllJ1xuICAgIF0sIGZ1bmN0aW9uKCBFdmVudEVtaXR0ZXIsIGV2ZW50aWUgKSB7XG4gICAgICByZXR1cm4gZmFjdG9yeSggd2luZG93LCBFdmVudEVtaXR0ZXIsIGV2ZW50aWUgKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgIHdpbmRvdyxcbiAgICAgIHJlcXVpcmUoJ3dvbGZ5ODctZXZlbnRlbWl0dGVyJyksXG4gICAgICByZXF1aXJlKCdldmVudGllJylcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LmltYWdlc0xvYWRlZCA9IGZhY3RvcnkoXG4gICAgICB3aW5kb3csXG4gICAgICB3aW5kb3cuRXZlbnRFbWl0dGVyLFxuICAgICAgd2luZG93LmV2ZW50aWVcbiAgICApO1xuICB9XG5cbn0pKCB3aW5kb3csXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBmYWN0b3J5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbmZ1bmN0aW9uIGZhY3RvcnkoIHdpbmRvdywgRXZlbnRFbWl0dGVyLCBldmVudGllICkge1xuXG5cblxudmFyICQgPSB3aW5kb3cualF1ZXJ5O1xudmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4vLyBleHRlbmQgb2JqZWN0c1xuZnVuY3Rpb24gZXh0ZW5kKCBhLCBiICkge1xuICBmb3IgKCB2YXIgcHJvcCBpbiBiICkge1xuICAgIGFbIHByb3AgXSA9IGJbIHByb3AgXTtcbiAgfVxuICByZXR1cm4gYTtcbn1cblxudmFyIG9ialRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmZ1bmN0aW9uIGlzQXJyYXkoIG9iaiApIHtcbiAgcmV0dXJuIG9ialRvU3RyaW5nLmNhbGwoIG9iaiApID09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8vIHR1cm4gZWxlbWVudCBvciBub2RlTGlzdCBpbnRvIGFuIGFycmF5XG5mdW5jdGlvbiBtYWtlQXJyYXkoIG9iaiApIHtcbiAgdmFyIGFyeSA9IFtdO1xuICBpZiAoIGlzQXJyYXkoIG9iaiApICkge1xuICAgIC8vIHVzZSBvYmplY3QgaWYgYWxyZWFkeSBhbiBhcnJheVxuICAgIGFyeSA9IG9iajtcbiAgfSBlbHNlIGlmICggdHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcicgKSB7XG4gICAgLy8gY29udmVydCBub2RlTGlzdCB0byBhcnJheVxuICAgIGZvciAoIHZhciBpPTA7IGkgPCBvYmoubGVuZ3RoOyBpKysgKSB7XG4gICAgICBhcnkucHVzaCggb2JqW2ldICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGFycmF5IG9mIHNpbmdsZSBpbmRleFxuICAgIGFyeS5wdXNoKCBvYmogKTtcbiAgfVxuICByZXR1cm4gYXJ5O1xufVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGltYWdlc0xvYWRlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5LCBFbGVtZW50LCBOb2RlTGlzdCwgU3RyaW5nfSBlbGVtXG4gICAqIEBwYXJhbSB7T2JqZWN0IG9yIEZ1bmN0aW9ufSBvcHRpb25zIC0gaWYgZnVuY3Rpb24sIHVzZSBhcyBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkFsd2F5cyAtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICBmdW5jdGlvbiBJbWFnZXNMb2FkZWQoIGVsZW0sIG9wdGlvbnMsIG9uQWx3YXlzICkge1xuICAgIC8vIGNvZXJjZSBJbWFnZXNMb2FkZWQoKSB3aXRob3V0IG5ldywgdG8gYmUgbmV3IEltYWdlc0xvYWRlZCgpXG4gICAgaWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgSW1hZ2VzTG9hZGVkICkgKSB7XG4gICAgICByZXR1cm4gbmV3IEltYWdlc0xvYWRlZCggZWxlbSwgb3B0aW9ucywgb25BbHdheXMgKTtcbiAgICB9XG4gICAgLy8gdXNlIGVsZW0gYXMgc2VsZWN0b3Igc3RyaW5nXG4gICAgaWYgKCB0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJyApIHtcbiAgICAgIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBlbGVtICk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cyA9IG1ha2VBcnJheSggZWxlbSApO1xuICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZCgge30sIHRoaXMub3B0aW9ucyApO1xuXG4gICAgaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PSAnZnVuY3Rpb24nICkge1xuICAgICAgb25BbHdheXMgPSBvcHRpb25zO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRlbmQoIHRoaXMub3B0aW9ucywgb3B0aW9ucyApO1xuICAgIH1cblxuICAgIGlmICggb25BbHdheXMgKSB7XG4gICAgICB0aGlzLm9uKCAnYWx3YXlzJywgb25BbHdheXMgKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEltYWdlcygpO1xuXG4gICAgaWYgKCAkICkge1xuICAgICAgLy8gYWRkIGpRdWVyeSBEZWZlcnJlZCBvYmplY3RcbiAgICAgIHRoaXMuanFEZWZlcnJlZCA9IG5ldyAkLkRlZmVycmVkKCk7XG4gICAgfVxuXG4gICAgLy8gSEFDSyBjaGVjayBhc3luYyB0byBhbGxvdyB0aW1lIHRvIGJpbmQgbGlzdGVuZXJzXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLmNoZWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUub3B0aW9ucyA9IHt9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuZ2V0SW1hZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbWFnZXMgPSBbXTtcblxuICAgIC8vIGZpbHRlciAmIGZpbmQgaXRlbXMgaWYgd2UgaGF2ZSBhbiBpdGVtIHNlbGVjdG9yXG4gICAgZm9yICggdmFyIGk9MDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpKysgKSB7XG4gICAgICB2YXIgZWxlbSA9IHRoaXMuZWxlbWVudHNbaV07XG4gICAgICB0aGlzLmFkZEVsZW1lbnRJbWFnZXMoIGVsZW0gKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudFxuICAgKi9cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRFbGVtZW50SW1hZ2VzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgLy8gZmlsdGVyIHNpYmxpbmdzXG4gICAgaWYgKCBlbGVtLm5vZGVOYW1lID09ICdJTUcnICkge1xuICAgICAgdGhpcy5hZGRJbWFnZSggZWxlbSApO1xuICAgIH1cbiAgICAvLyBnZXQgYmFja2dyb3VuZCBpbWFnZSBvbiBlbGVtZW50XG4gICAgaWYgKCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZCA9PT0gdHJ1ZSApIHtcbiAgICAgIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoIGVsZW0gKTtcbiAgICB9XG5cbiAgICAvLyBmaW5kIGNoaWxkcmVuXG4gICAgLy8gbm8gbm9uLWVsZW1lbnQgbm9kZXMsICMxNDNcbiAgICB2YXIgbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuICAgIGlmICggIW5vZGVUeXBlIHx8ICFlbGVtZW50Tm9kZVR5cGVzWyBub2RlVHlwZSBdICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY2hpbGRJbWdzID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcbiAgICAvLyBjb25jYXQgY2hpbGRFbGVtcyB0byBmaWx0ZXJGb3VuZCBhcnJheVxuICAgIGZvciAoIHZhciBpPTA7IGkgPCBjaGlsZEltZ3MubGVuZ3RoOyBpKysgKSB7XG4gICAgICB2YXIgaW1nID0gY2hpbGRJbWdzW2ldO1xuICAgICAgdGhpcy5hZGRJbWFnZSggaW1nICk7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGNoaWxkIGJhY2tncm91bmQgaW1hZ2VzXG4gICAgaWYgKCB0eXBlb2YgdGhpcy5vcHRpb25zLmJhY2tncm91bmQgPT0gJ3N0cmluZycgKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kICk7XG4gICAgICBmb3IgKCBpPTA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIHRoaXMuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMoIGNoaWxkICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBlbGVtZW50Tm9kZVR5cGVzID0ge1xuICAgIDE6IHRydWUsXG4gICAgOTogdHJ1ZSxcbiAgICAxMTogdHJ1ZVxuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkRWxlbWVudEJhY2tncm91bmRJbWFnZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICB2YXIgc3R5bGUgPSBnZXRTdHlsZSggZWxlbSApO1xuICAgIC8vIGdldCB1cmwgaW5zaWRlIHVybChcIi4uLlwiKVxuICAgIHZhciByZVVSTCA9IC91cmxcXChbJ1wiXSooW14nXCJcXCldKylbJ1wiXSpcXCkvZ2k7XG4gICAgdmFyIG1hdGNoZXMgPSByZVVSTC5leGVjKCBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgKTtcbiAgICB3aGlsZSAoIG1hdGNoZXMgIT09IG51bGwgKSB7XG4gICAgICB2YXIgdXJsID0gbWF0Y2hlcyAmJiBtYXRjaGVzWzFdO1xuICAgICAgaWYgKCB1cmwgKSB7XG4gICAgICAgIHRoaXMuYWRkQmFja2dyb3VuZCggdXJsLCBlbGVtICk7XG4gICAgICB9XG4gICAgICBtYXRjaGVzID0gcmVVUkwuZXhlYyggc3R5bGUuYmFja2dyb3VuZEltYWdlICk7XG4gICAgfVxuICB9O1xuXG4gIC8vIElFOFxuICB2YXIgZ2V0U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSB8fCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICByZXR1cm4gZWxlbS5jdXJyZW50U3R5bGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SW1hZ2V9IGltZ1xuICAgKi9cbiAgSW1hZ2VzTG9hZGVkLnByb3RvdHlwZS5hZGRJbWFnZSA9IGZ1bmN0aW9uKCBpbWcgKSB7XG4gICAgdmFyIGxvYWRpbmdJbWFnZSA9IG5ldyBMb2FkaW5nSW1hZ2UoIGltZyApO1xuICAgIHRoaXMuaW1hZ2VzLnB1c2goIGxvYWRpbmdJbWFnZSApO1xuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuYWRkQmFja2dyb3VuZCA9IGZ1bmN0aW9uKCB1cmwsIGVsZW0gKSB7XG4gICAgdmFyIGJhY2tncm91bmQgPSBuZXcgQmFja2dyb3VuZCggdXJsLCBlbGVtICk7XG4gICAgdGhpcy5pbWFnZXMucHVzaCggYmFja2dyb3VuZCApO1xuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHRoaXMucHJvZ3Jlc3NlZENvdW50ID0gMDtcbiAgICB0aGlzLmhhc0FueUJyb2tlbiA9IGZhbHNlO1xuICAgIC8vIGNvbXBsZXRlIGlmIG5vIGltYWdlc1xuICAgIGlmICggIXRoaXMuaW1hZ2VzLmxlbmd0aCApIHtcbiAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblByb2dyZXNzKCBpbWFnZSwgZWxlbSwgbWVzc2FnZSApIHtcbiAgICAgIC8vIEhBQ0sgLSBDaHJvbWUgdHJpZ2dlcnMgZXZlbnQgYmVmb3JlIG9iamVjdCBwcm9wZXJ0aWVzIGhhdmUgY2hhbmdlZC4gIzgzXG4gICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgX3RoaXMucHJvZ3Jlc3MoIGltYWdlLCBlbGVtLCBtZXNzYWdlICk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKCB2YXIgaT0wOyBpIDwgdGhpcy5pbWFnZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICB2YXIgbG9hZGluZ0ltYWdlID0gdGhpcy5pbWFnZXNbaV07XG4gICAgICBsb2FkaW5nSW1hZ2Uub25jZSggJ3Byb2dyZXNzJywgb25Qcm9ncmVzcyApO1xuICAgICAgbG9hZGluZ0ltYWdlLmNoZWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIEltYWdlc0xvYWRlZC5wcm90b3R5cGUucHJvZ3Jlc3MgPSBmdW5jdGlvbiggaW1hZ2UsIGVsZW0sIG1lc3NhZ2UgKSB7XG4gICAgdGhpcy5wcm9ncmVzc2VkQ291bnQrKztcbiAgICB0aGlzLmhhc0FueUJyb2tlbiA9IHRoaXMuaGFzQW55QnJva2VuIHx8ICFpbWFnZS5pc0xvYWRlZDtcbiAgICAvLyBwcm9ncmVzcyBldmVudFxuICAgIHRoaXMuZW1pdCggJ3Byb2dyZXNzJywgdGhpcywgaW1hZ2UsIGVsZW0gKTtcbiAgICBpZiAoIHRoaXMuanFEZWZlcnJlZCAmJiB0aGlzLmpxRGVmZXJyZWQubm90aWZ5ICkge1xuICAgICAgdGhpcy5qcURlZmVycmVkLm5vdGlmeSggdGhpcywgaW1hZ2UgKTtcbiAgICB9XG4gICAgLy8gY2hlY2sgaWYgY29tcGxldGVkXG4gICAgaWYgKCB0aGlzLnByb2dyZXNzZWRDb3VudCA9PSB0aGlzLmltYWdlcy5sZW5ndGggKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgaWYgKCB0aGlzLm9wdGlvbnMuZGVidWcgJiYgY29uc29sZSApIHtcbiAgICAgIGNvbnNvbGUubG9nKCAncHJvZ3Jlc3M6ICcgKyBtZXNzYWdlLCBpbWFnZSwgZWxlbSApO1xuICAgIH1cbiAgfTtcblxuICBJbWFnZXNMb2FkZWQucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGV2ZW50TmFtZSA9IHRoaXMuaGFzQW55QnJva2VuID8gJ2ZhaWwnIDogJ2RvbmUnO1xuICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgdGhpcy5lbWl0KCBldmVudE5hbWUsIHRoaXMgKTtcbiAgICB0aGlzLmVtaXQoICdhbHdheXMnLCB0aGlzICk7XG4gICAgaWYgKCB0aGlzLmpxRGVmZXJyZWQgKSB7XG4gICAgICB2YXIganFNZXRob2QgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICdyZWplY3QnIDogJ3Jlc29sdmUnO1xuICAgICAgdGhpcy5qcURlZmVycmVkWyBqcU1ldGhvZCBdKCB0aGlzICk7XG4gICAgfVxuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIGZ1bmN0aW9uIExvYWRpbmdJbWFnZSggaW1nICkge1xuICAgIHRoaXMuaW1nID0gaW1nO1xuICB9XG5cbiAgTG9hZGluZ0ltYWdlLnByb3RvdHlwZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBMb2FkaW5nSW1hZ2UucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gSWYgY29tcGxldGUgaXMgdHJ1ZSBhbmQgYnJvd3NlciBzdXBwb3J0cyBuYXR1cmFsIHNpemVzLFxuICAgIC8vIHRyeSB0byBjaGVjayBmb3IgaW1hZ2Ugc3RhdHVzIG1hbnVhbGx5LlxuICAgIHZhciBpc0NvbXBsZXRlID0gdGhpcy5nZXRJc0ltYWdlQ29tcGxldGUoKTtcbiAgICBpZiAoIGlzQ29tcGxldGUgKSB7XG4gICAgICAvLyByZXBvcnQgYmFzZWQgb24gbmF0dXJhbFdpZHRoXG4gICAgICB0aGlzLmNvbmZpcm0oIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gMCwgJ25hdHVyYWxXaWR0aCcgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBub25lIG9mIHRoZSBjaGVja3MgYWJvdmUgbWF0Y2hlZCwgc2ltdWxhdGUgbG9hZGluZyBvbiBkZXRhY2hlZCBlbGVtZW50LlxuICAgIHRoaXMucHJveHlJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGV2ZW50aWUuYmluZCggdGhpcy5wcm94eUltYWdlLCAnbG9hZCcsIHRoaXMgKTtcbiAgICBldmVudGllLmJpbmQoIHRoaXMucHJveHlJbWFnZSwgJ2Vycm9yJywgdGhpcyApO1xuICAgIC8vIGJpbmQgdG8gaW1hZ2UgYXMgd2VsbCBmb3IgRmlyZWZveC4gIzE5MVxuICAgIGV2ZW50aWUuYmluZCggdGhpcy5pbWcsICdsb2FkJywgdGhpcyApO1xuICAgIGV2ZW50aWUuYmluZCggdGhpcy5pbWcsICdlcnJvcicsIHRoaXMgKTtcbiAgICB0aGlzLnByb3h5SW1hZ2Uuc3JjID0gdGhpcy5pbWcuc3JjO1xuICB9O1xuXG4gIExvYWRpbmdJbWFnZS5wcm90b3R5cGUuZ2V0SXNJbWFnZUNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1nLmNvbXBsZXRlICYmIHRoaXMuaW1nLm5hdHVyYWxXaWR0aCAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIExvYWRpbmdJbWFnZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCBpc0xvYWRlZCwgbWVzc2FnZSApIHtcbiAgICB0aGlzLmlzTG9hZGVkID0gaXNMb2FkZWQ7XG4gICAgdGhpcy5lbWl0KCAncHJvZ3Jlc3MnLCB0aGlzLCB0aGlzLmltZywgbWVzc2FnZSApO1xuICB9O1xuXG4gIC8vIC0tLS0tIGV2ZW50cyAtLS0tLSAvL1xuXG4gIC8vIHRyaWdnZXIgc3BlY2lmaWVkIGhhbmRsZXIgZm9yIGV2ZW50IHR5cGVcbiAgTG9hZGluZ0ltYWdlLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICB2YXIgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gICAgaWYgKCB0aGlzWyBtZXRob2QgXSApIHtcbiAgICAgIHRoaXNbIG1ldGhvZCBdKCBldmVudCApO1xuICAgIH1cbiAgfTtcblxuICBMb2FkaW5nSW1hZ2UucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29uZmlybSggdHJ1ZSwgJ29ubG9hZCcgKTtcbiAgICB0aGlzLnVuYmluZEV2ZW50cygpO1xuICB9O1xuXG4gIExvYWRpbmdJbWFnZS5wcm90b3R5cGUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29uZmlybSggZmFsc2UsICdvbmVycm9yJyApO1xuICAgIHRoaXMudW5iaW5kRXZlbnRzKCk7XG4gIH07XG5cbiAgTG9hZGluZ0ltYWdlLnByb3RvdHlwZS51bmJpbmRFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICBldmVudGllLnVuYmluZCggdGhpcy5wcm94eUltYWdlLCAnbG9hZCcsIHRoaXMgKTtcbiAgICBldmVudGllLnVuYmluZCggdGhpcy5wcm94eUltYWdlLCAnZXJyb3InLCB0aGlzICk7XG4gICAgZXZlbnRpZS51bmJpbmQoIHRoaXMuaW1nLCAnbG9hZCcsIHRoaXMgKTtcbiAgICBldmVudGllLnVuYmluZCggdGhpcy5pbWcsICdlcnJvcicsIHRoaXMgKTtcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBCYWNrZ3JvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgZnVuY3Rpb24gQmFja2dyb3VuZCggdXJsLCBlbGVtZW50ICkge1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5pbWcgPSBuZXcgSW1hZ2UoKTtcbiAgfVxuXG4gIC8vIGluaGVyaXQgTG9hZGluZ0ltYWdlIHByb3RvdHlwZVxuICBCYWNrZ3JvdW5kLnByb3RvdHlwZSA9IG5ldyBMb2FkaW5nSW1hZ2UoKTtcblxuICBCYWNrZ3JvdW5kLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgIGV2ZW50aWUuYmluZCggdGhpcy5pbWcsICdsb2FkJywgdGhpcyApO1xuICAgIGV2ZW50aWUuYmluZCggdGhpcy5pbWcsICdlcnJvcicsIHRoaXMgKTtcbiAgICB0aGlzLmltZy5zcmMgPSB0aGlzLnVybDtcbiAgICAvLyBjaGVjayBpZiBpbWFnZSBpcyBhbHJlYWR5IGNvbXBsZXRlXG4gICAgdmFyIGlzQ29tcGxldGUgPSB0aGlzLmdldElzSW1hZ2VDb21wbGV0ZSgpO1xuICAgIGlmICggaXNDb21wbGV0ZSApIHtcbiAgICAgIHRoaXMuY29uZmlybSggdGhpcy5pbWcubmF0dXJhbFdpZHRoICE9PSAwLCAnbmF0dXJhbFdpZHRoJyApO1xuICAgICAgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgICB9XG4gIH07XG5cbiAgQmFja2dyb3VuZC5wcm90b3R5cGUudW5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgZXZlbnRpZS51bmJpbmQoIHRoaXMuaW1nLCAnbG9hZCcsIHRoaXMgKTtcbiAgICBldmVudGllLnVuYmluZCggdGhpcy5pbWcsICdlcnJvcicsIHRoaXMgKTtcbiAgfTtcblxuICBCYWNrZ3JvdW5kLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oIGlzTG9hZGVkLCBtZXNzYWdlICkge1xuICAgIHRoaXMuaXNMb2FkZWQgPSBpc0xvYWRlZDtcbiAgICB0aGlzLmVtaXQoICdwcm9ncmVzcycsIHRoaXMsIHRoaXMuZWxlbWVudCwgbWVzc2FnZSApO1xuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGpRdWVyeSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gIEltYWdlc0xvYWRlZC5tYWtlSlF1ZXJ5UGx1Z2luID0gZnVuY3Rpb24oIGpRdWVyeSApIHtcbiAgICBqUXVlcnkgPSBqUXVlcnkgfHwgd2luZG93LmpRdWVyeTtcbiAgICBpZiAoICFqUXVlcnkgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHNldCBsb2NhbCB2YXJpYWJsZVxuICAgICQgPSBqUXVlcnk7XG4gICAgLy8gJCgpLmltYWdlc0xvYWRlZCgpXG4gICAgJC5mbi5pbWFnZXNMb2FkZWQgPSBmdW5jdGlvbiggb3B0aW9ucywgY2FsbGJhY2sgKSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgSW1hZ2VzTG9hZGVkKCB0aGlzLCBvcHRpb25zLCBjYWxsYmFjayApO1xuICAgICAgcmV0dXJuIGluc3RhbmNlLmpxRGVmZXJyZWQucHJvbWlzZSggJCh0aGlzKSApO1xuICAgIH07XG4gIH07XG4gIC8vIHRyeSBtYWtpbmcgcGx1Z2luXG4gIEltYWdlc0xvYWRlZC5tYWtlSlF1ZXJ5UGx1Z2luKCk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgcmV0dXJuIEltYWdlc0xvYWRlZDtcblxufSk7XG5cbiIsIi8qKlxuICogQnhTbGlkZXIgdjQuMS4yIC0gRnVsbHkgbG9hZGVkLCByZXNwb25zaXZlIGNvbnRlbnQgc2xpZGVyXG4gKiBodHRwOi8vYnhzbGlkZXIuY29tXG4gKlxuICogQ29weXJpZ2h0IDIwMTQsIFN0ZXZlbiBXYW5kZXJza2kgLSBodHRwOi8vc3RldmVud2FuZGVyc2tpLmNvbSAtIGh0dHA6Ly9ieGNyZWF0aXZlLmNvbVxuICogV3JpdHRlbiB3aGlsZSBkcmlua2luZyBCZWxnaWFuIGFsZXMgYW5kIGxpc3RlbmluZyB0byBqYXp6XG4gKlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG5cbjsoZnVuY3Rpb24oJCl7XG5cblx0dmFyIHBsdWdpbiA9IHt9O1xuXG5cdHZhciBkZWZhdWx0cyA9IHtcblxuXHRcdC8vIEdFTkVSQUxcblx0XHRtb2RlOiAnaG9yaXpvbnRhbCcsXG5cdFx0c2xpZGVTZWxlY3RvcjogJycsXG5cdFx0aW5maW5pdGVMb29wOiB0cnVlLFxuXHRcdGhpZGVDb250cm9sT25FbmQ6IGZhbHNlLFxuXHRcdHNwZWVkOiA1MDAsXG5cdFx0ZWFzaW5nOiBudWxsLFxuXHRcdHNsaWRlTWFyZ2luOiAwLFxuXHRcdHN0YXJ0U2xpZGU6IDAsXG5cdFx0cmFuZG9tU3RhcnQ6IGZhbHNlLFxuXHRcdGNhcHRpb25zOiBmYWxzZSxcblx0XHR0aWNrZXI6IGZhbHNlLFxuXHRcdHRpY2tlckhvdmVyOiBmYWxzZSxcblx0XHRhZGFwdGl2ZUhlaWdodDogZmFsc2UsXG5cdFx0YWRhcHRpdmVIZWlnaHRTcGVlZDogNTAwLFxuXHRcdHZpZGVvOiBmYWxzZSxcblx0XHR1c2VDU1M6IHRydWUsXG5cdFx0cHJlbG9hZEltYWdlczogJ3Zpc2libGUnLFxuXHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0c2xpZGVaSW5kZXg6IDUwLFxuXHRcdHdyYXBwZXJDbGFzczogJ2J4LXdyYXBwZXInLFxuXG5cdFx0Ly8gVE9VQ0hcblx0XHR0b3VjaEVuYWJsZWQ6IHRydWUsXG5cdFx0c3dpcGVUaHJlc2hvbGQ6IDUwLFxuXHRcdG9uZVRvT25lVG91Y2g6IHRydWUsXG5cdFx0cHJldmVudERlZmF1bHRTd2lwZVg6IHRydWUsXG5cdFx0cHJldmVudERlZmF1bHRTd2lwZVk6IGZhbHNlLFxuXG5cdFx0Ly8gUEFHRVJcblx0XHRwYWdlcjogdHJ1ZSxcblx0XHRwYWdlclR5cGU6ICdmdWxsJyxcblx0XHRwYWdlclNob3J0U2VwYXJhdG9yOiAnIC8gJyxcblx0XHRwYWdlclNlbGVjdG9yOiBudWxsLFxuXHRcdGJ1aWxkUGFnZXI6IG51bGwsXG5cdFx0cGFnZXJDdXN0b206IG51bGwsXG5cblx0XHQvLyBDT05UUk9MU1xuXHRcdGNvbnRyb2xzOiB0cnVlLFxuXHRcdG5leHRUZXh0OiAnTmV4dCcsXG5cdFx0cHJldlRleHQ6ICdQcmV2Jyxcblx0XHRuZXh0U2VsZWN0b3I6IG51bGwsXG5cdFx0cHJldlNlbGVjdG9yOiBudWxsLFxuXHRcdGF1dG9Db250cm9sczogZmFsc2UsXG5cdFx0c3RhcnRUZXh0OiAnU3RhcnQnLFxuXHRcdHN0b3BUZXh0OiAnU3RvcCcsXG5cdFx0YXV0b0NvbnRyb2xzQ29tYmluZTogZmFsc2UsXG5cdFx0YXV0b0NvbnRyb2xzU2VsZWN0b3I6IG51bGwsXG5cblx0XHQvLyBBVVRPXG5cdFx0YXV0bzogZmFsc2UsXG5cdFx0cGF1c2U6IDQwMDAsXG5cdFx0YXV0b1N0YXJ0OiB0cnVlLFxuXHRcdGF1dG9EaXJlY3Rpb246ICduZXh0Jyxcblx0XHRhdXRvSG92ZXI6IGZhbHNlLFxuXHRcdGF1dG9EZWxheTogMCxcblx0XHRhdXRvU2xpZGVGb3JPbmVQYWdlOiBmYWxzZSxcblxuXHRcdC8vIENBUk9VU0VMXG5cdFx0bWluU2xpZGVzOiAxLFxuXHRcdG1heFNsaWRlczogMSxcblx0XHRtb3ZlU2xpZGVzOiAwLFxuXHRcdHNsaWRlV2lkdGg6IDAsXG5cblx0XHQvLyBDQUxMQkFDS1Ncblx0XHRvblNsaWRlckxvYWQ6IGZ1bmN0aW9uKCkge30sXG5cdFx0b25TbGlkZUJlZm9yZTogZnVuY3Rpb24oKSB7fSxcblx0XHRvblNsaWRlQWZ0ZXI6IGZ1bmN0aW9uKCkge30sXG5cdFx0b25TbGlkZU5leHQ6IGZ1bmN0aW9uKCkge30sXG5cdFx0b25TbGlkZVByZXY6IGZ1bmN0aW9uKCkge30sXG5cdFx0b25TbGlkZXJSZXNpemU6IGZ1bmN0aW9uKCkge31cblx0fVxuXG5cdCQuZm4uYnhTbGlkZXIgPSBmdW5jdGlvbihvcHRpb25zKXtcblxuXHRcdGlmKHRoaXMubGVuZ3RoID09IDApIHJldHVybiB0aGlzO1xuXG5cdFx0Ly8gc3VwcG9ydCBtdXRsdGlwbGUgZWxlbWVudHNcblx0XHRpZih0aGlzLmxlbmd0aCA+IDEpe1xuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS5ieFNsaWRlcihvcHRpb25zKX0pO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gY3JlYXRlIGEgbmFtZXNwYWNlIHRvIGJlIHVzZWQgdGhyb3VnaG91dCB0aGUgcGx1Z2luXG5cdFx0dmFyIHNsaWRlciA9IHt9O1xuXHRcdC8vIHNldCBhIHJlZmVyZW5jZSB0byBvdXIgc2xpZGVyIGVsZW1lbnRcblx0XHR2YXIgZWwgPSB0aGlzO1xuXHRcdHBsdWdpbi5lbCA9IHRoaXM7XG5cblx0XHQvKipcblx0XHQgKiBNYWtlcyBzbGlkZXNob3cgcmVzcG9uc2l2ZVxuXHRcdCAqL1xuXHRcdC8vIGZpcnN0IGdldCB0aGUgb3JpZ2luYWwgd2luZG93IGRpbWVucyAodGhhbmtzIGFsb3QgSUUpXG5cdFx0dmFyIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cdFx0dmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblxuXG5cblx0XHQvKipcblx0XHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdCAqID0gUFJJVkFURSBGVU5DVElPTlNcblx0XHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdCAqL1xuXG5cdFx0LyoqXG5cdFx0ICogSW5pdGlhbGl6ZXMgbmFtZXNwYWNlIHNldHRpbmdzIHRvIGJlIHVzZWQgdGhyb3VnaG91dCBwbHVnaW5cblx0XHQgKi9cblx0XHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQvLyBtZXJnZSB1c2VyLXN1cHBsaWVkIG9wdGlvbnMgd2l0aCB0aGUgZGVmYXVsdHNcblx0XHRcdHNsaWRlci5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cdFx0XHQvLyBwYXJzZSBzbGlkZVdpZHRoIHNldHRpbmdcblx0XHRcdHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID0gcGFyc2VJbnQoc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpO1xuXHRcdFx0Ly8gc3RvcmUgdGhlIG9yaWdpbmFsIGNoaWxkcmVuXG5cdFx0XHRzbGlkZXIuY2hpbGRyZW4gPSBlbC5jaGlsZHJlbihzbGlkZXIuc2V0dGluZ3Muc2xpZGVTZWxlY3Rvcik7XG5cdFx0XHQvLyBjaGVjayBpZiBhY3R1YWwgbnVtYmVyIG9mIHNsaWRlcyBpcyBsZXNzIHRoYW4gbWluU2xpZGVzIC8gbWF4U2xpZGVzXG5cdFx0XHRpZihzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIDwgc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcykgc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7XG5cdFx0XHRpZihzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIDwgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcykgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7XG5cdFx0XHQvLyBpZiByYW5kb20gc3RhcnQsIHNldCB0aGUgc3RhcnRTbGlkZSBzZXR0aW5nIHRvIHJhbmRvbSBudW1iZXJcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5yYW5kb21TdGFydCkgc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoKTtcblx0XHRcdC8vIHN0b3JlIGFjdGl2ZSBzbGlkZSBpbmZvcm1hdGlvblxuXHRcdFx0c2xpZGVyLmFjdGl2ZSA9IHsgaW5kZXg6IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlIH1cblx0XHRcdC8vIHN0b3JlIGlmIHRoZSBzbGlkZXIgaXMgaW4gY2Fyb3VzZWwgbW9kZSAoZGlzcGxheWluZyAvIG1vdmluZyBtdWx0aXBsZSBzbGlkZXMpXG5cdFx0XHRzbGlkZXIuY2Fyb3VzZWwgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzID4gMSB8fCBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMTtcblx0XHRcdC8vIGlmIGNhcm91c2VsLCBmb3JjZSBwcmVsb2FkSW1hZ2VzID0gJ2FsbCdcblx0XHRcdGlmKHNsaWRlci5jYXJvdXNlbCkgc2xpZGVyLnNldHRpbmdzLnByZWxvYWRJbWFnZXMgPSAnYWxsJztcblx0XHRcdC8vIGNhbGN1bGF0ZSB0aGUgbWluIC8gbWF4IHdpZHRoIHRocmVzaG9sZHMgYmFzZWQgb24gbWluIC8gbWF4IG51bWJlciBvZiBzbGlkZXNcblx0XHRcdC8vIHVzZWQgdG8gc2V0dXAgYW5kIHVwZGF0ZSBjYXJvdXNlbCBzbGlkZXMgZGltZW5zaW9uc1xuXHRcdFx0c2xpZGVyLm1pblRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuXHRcdFx0c2xpZGVyLm1heFRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuXHRcdFx0Ly8gc3RvcmUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHNsaWRlciAoaWYgY3VycmVudGx5IGFuaW1hdGluZywgd29ya2luZyBpcyB0cnVlKVxuXHRcdFx0c2xpZGVyLndvcmtpbmcgPSBmYWxzZTtcblx0XHRcdC8vIGluaXRpYWxpemUgdGhlIGNvbnRyb2xzIG9iamVjdFxuXHRcdFx0c2xpZGVyLmNvbnRyb2xzID0ge307XG5cdFx0XHQvLyBpbml0aWFsaXplIGFuIGF1dG8gaW50ZXJ2YWxcblx0XHRcdHNsaWRlci5pbnRlcnZhbCA9IG51bGw7XG5cdFx0XHQvLyBkZXRlcm1pbmUgd2hpY2ggcHJvcGVydHkgdG8gdXNlIGZvciB0cmFuc2l0aW9uc1xuXHRcdFx0c2xpZGVyLmFuaW1Qcm9wID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyA/ICd0b3AnIDogJ2xlZnQnO1xuXHRcdFx0Ly8gZGV0ZXJtaW5lIGlmIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiBjYW4gYmUgdXNlZFxuXHRcdFx0c2xpZGVyLnVzaW5nQ1NTID0gc2xpZGVyLnNldHRpbmdzLnVzZUNTUyAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSAhPSAnZmFkZScgJiYgKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdC8vIGNyZWF0ZSBvdXIgdGVzdCBkaXYgZWxlbWVudFxuXHRcdFx0XHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdC8vIGNzcyB0cmFuc2l0aW9uIHByb3BlcnRpZXNcblx0XHRcdFx0dmFyIHByb3BzID0gWydXZWJraXRQZXJzcGVjdGl2ZScsICdNb3pQZXJzcGVjdGl2ZScsICdPUGVyc3BlY3RpdmUnLCAnbXNQZXJzcGVjdGl2ZSddO1xuXHRcdFx0XHQvLyB0ZXN0IGZvciBlYWNoIHByb3BlcnR5XG5cdFx0XHRcdGZvcih2YXIgaSBpbiBwcm9wcyl7XG5cdFx0XHRcdFx0aWYoZGl2LnN0eWxlW3Byb3BzW2ldXSAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRcdHNsaWRlci5jc3NQcmVmaXggPSBwcm9wc1tpXS5yZXBsYWNlKCdQZXJzcGVjdGl2ZScsICcnKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0c2xpZGVyLmFuaW1Qcm9wID0gJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNmb3JtJztcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9KCkpO1xuXHRcdFx0Ly8gaWYgdmVydGljYWwgbW9kZSBhbHdheXMgbWFrZSBtYXhTbGlkZXMgYW5kIG1pblNsaWRlcyBlcXVhbFxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJykgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG5cdFx0XHQvLyBzYXZlIG9yaWdpbmFsIHN0eWxlIGRhdGFcblx0XHRcdGVsLmRhdGEoXCJvcmlnU3R5bGVcIiwgZWwuYXR0cihcInN0eWxlXCIpKTtcblx0XHRcdGVsLmNoaWxkcmVuKHNsaWRlci5zZXR0aW5ncy5zbGlkZVNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAkKHRoaXMpLmRhdGEoXCJvcmlnU3R5bGVcIiwgJCh0aGlzKS5hdHRyKFwic3R5bGVcIikpO1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBwZXJmb3JtIGFsbCBET00gLyBDU1MgbW9kaWZpY2F0aW9uc1xuXHRcdFx0c2V0dXAoKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBQZXJmb3JtcyBhbGwgRE9NIGFuZCBDU1MgbW9kaWZpY2F0aW9uc1xuXHRcdCAqL1xuXHRcdHZhciBzZXR1cCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQvLyB3cmFwIGVsIGluIGEgd3JhcHBlclxuXHRcdFx0ZWwud3JhcCgnPGRpdiBjbGFzcz1cIicgKyBzbGlkZXIuc2V0dGluZ3Mud3JhcHBlckNsYXNzICsgJ1wiPjxkaXYgY2xhc3M9XCJieC12aWV3cG9ydFwiPjwvZGl2PjwvZGl2PicpO1xuXHRcdFx0Ly8gc3RvcmUgYSBuYW1zcGFjZSByZWZlcmVuY2UgdG8gLmJ4LXZpZXdwb3J0XG5cdFx0XHRzbGlkZXIudmlld3BvcnQgPSBlbC5wYXJlbnQoKTtcblx0XHRcdC8vIGFkZCBhIGxvYWRpbmcgZGl2IHRvIGRpc3BsYXkgd2hpbGUgaW1nIGFyZSBsb2FkaW5nXG5cdFx0XHRzbGlkZXIubG9hZGVyID0gJCgnPGRpdiBjbGFzcz1cImJ4LWxvYWRpbmdcIiAvPicpO1xuXHRcdFx0c2xpZGVyLnZpZXdwb3J0LnByZXBlbmQoc2xpZGVyLmxvYWRlcik7XG5cdFx0XHQvLyBzZXQgZWwgdG8gYSBtYXNzaXZlIHdpZHRoLCB0byBob2xkIGFueSBuZWVkZWQgc2xpZGVzXG5cdFx0XHQvLyBhbHNvIHN0cmlwIGFueSBtYXJnaW4gYW5kIHBhZGRpbmcgZnJvbSBlbFxuXHRcdFx0ZWwuY3NzKHtcblx0XHRcdFx0d2lkdGg6IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/IChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoICogMTAwICsgMjE1KSArICclJyA6ICdhdXRvJyxcblx0XHRcdFx0cG9zaXRpb246ICdyZWxhdGl2ZSdcblx0XHRcdH0pO1xuXHRcdFx0Ly8gaWYgdXNpbmcgQ1NTLCBhZGQgdGhlIGVhc2luZyBwcm9wZXJ0eVxuXHRcdFx0aWYoc2xpZGVyLnVzaW5nQ1NTICYmIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcpe1xuXHRcdFx0XHRlbC5jc3MoJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nLCBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nKTtcblx0XHRcdC8vIGlmIG5vdCB1c2luZyBDU1MgYW5kIG5vIGVhc2luZyB2YWx1ZSB3YXMgc3VwcGxpZWQsIHVzZSB0aGUgZGVmYXVsdCBKUyBhbmltYXRpb24gZWFzaW5nIChzd2luZylcblx0XHRcdH1lbHNlIGlmKCFzbGlkZXIuc2V0dGluZ3MuZWFzaW5nKXtcblx0XHRcdFx0c2xpZGVyLnNldHRpbmdzLmVhc2luZyA9ICdzd2luZyc7XG5cdFx0XHR9XG5cdFx0XHR2YXIgc2xpZGVzU2hvd2luZyA9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcblx0XHRcdC8vIG1ha2UgbW9kaWZpY2F0aW9ucyB0byB0aGUgdmlld3BvcnQgKC5ieC12aWV3cG9ydClcblx0XHRcdHNsaWRlci52aWV3cG9ydC5jc3Moe1xuXHRcdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0XHRvdmVyZmxvdzogJ2hpZGRlbicsXG5cdFx0XHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnXG5cdFx0XHR9KTtcblx0XHRcdHNsaWRlci52aWV3cG9ydC5wYXJlbnQoKS5jc3Moe1xuXHRcdFx0XHRtYXhXaWR0aDogZ2V0Vmlld3BvcnRNYXhXaWR0aCgpXG5cdFx0XHR9KTtcblx0XHRcdC8vIG1ha2UgbW9kaWZpY2F0aW9uIHRvIHRoZSB3cmFwcGVyICguYngtd3JhcHBlcilcblx0XHRcdGlmKCFzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHtcblx0XHRcdFx0c2xpZGVyLnZpZXdwb3J0LnBhcmVudCgpLmNzcyh7XG5cdFx0XHRcdG1hcmdpbjogJzAgYXV0byAwcHgnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gYXBwbHkgY3NzIHRvIGFsbCBzbGlkZXIgY2hpbGRyZW5cblx0XHRcdHNsaWRlci5jaGlsZHJlbi5jc3Moe1xuXHRcdFx0XHQnZmxvYXQnOiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAnbGVmdCcgOiAnbm9uZScsXG5cdFx0XHRcdGxpc3RTdHlsZTogJ25vbmUnLFxuXHRcdFx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBhcHBseSB0aGUgY2FsY3VsYXRlZCB3aWR0aCBhZnRlciB0aGUgZmxvYXQgaXMgYXBwbGllZCB0byBwcmV2ZW50IHNjcm9sbGJhciBpbnRlcmZlcmVuY2Vcblx0XHRcdHNsaWRlci5jaGlsZHJlbi5jc3MoJ3dpZHRoJywgZ2V0U2xpZGVXaWR0aCgpKTtcblx0XHRcdC8vIGlmIHNsaWRlTWFyZ2luIGlzIHN1cHBsaWVkLCBhZGQgdGhlIGNzc1xuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHNsaWRlci5jaGlsZHJlbi5jc3MoJ21hcmdpblJpZ2h0Jywgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcgJiYgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkgc2xpZGVyLmNoaWxkcmVuLmNzcygnbWFyZ2luQm90dG9tJywgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcblx0XHRcdC8vIGlmIFwiZmFkZVwiIG1vZGUsIGFkZCBwb3NpdGlvbmluZyBhbmQgei1pbmRleCBDU1Ncblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdmYWRlJyl7XG5cdFx0XHRcdHNsaWRlci5jaGlsZHJlbi5jc3Moe1xuXHRcdFx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdFx0XHRcdHpJbmRleDogMCxcblx0XHRcdFx0XHRkaXNwbGF5OiAnbm9uZSdcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vIHByZXBhcmUgdGhlIHotaW5kZXggb24gdGhlIHNob3dpbmcgZWxlbWVudFxuXHRcdFx0XHRzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpLmNzcyh7ekluZGV4OiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVaSW5kZXgsIGRpc3BsYXk6ICdibG9jayd9KTtcblx0XHRcdH1cblx0XHRcdC8vIGNyZWF0ZSBhbiBlbGVtZW50IHRvIGNvbnRhaW4gYWxsIHNsaWRlciBjb250cm9scyAocGFnZXIsIHN0YXJ0IC8gc3RvcCwgZXRjKVxuXHRcdFx0c2xpZGVyLmNvbnRyb2xzLmVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzXCIgLz4nKTtcblx0XHRcdC8vIGlmIGNhcHRpb25zIGFyZSByZXF1ZXN0ZWQsIGFkZCB0aGVtXG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MuY2FwdGlvbnMpIGFwcGVuZENhcHRpb25zKCk7XG5cdFx0XHQvLyBjaGVjayBpZiBzdGFydFNsaWRlIGlzIGxhc3Qgc2xpZGVcblx0XHRcdHNsaWRlci5hY3RpdmUubGFzdCA9IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlID09IGdldFBhZ2VyUXR5KCkgLSAxO1xuXHRcdFx0Ly8gaWYgdmlkZW8gaXMgdHJ1ZSwgc2V0IHVwIHRoZSBmaXRWaWRzIHBsdWdpblxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLnZpZGVvKSBlbC5maXRWaWRzKCk7XG5cdFx0XHQvLyBzZXQgdGhlIGRlZmF1bHQgcHJlbG9hZCBzZWxlY3RvciAodmlzaWJsZSlcblx0XHRcdHZhciBwcmVsb2FkU2VsZWN0b3IgPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpO1xuXHRcdFx0aWYgKHNsaWRlci5zZXR0aW5ncy5wcmVsb2FkSW1hZ2VzID09IFwiYWxsXCIpIHByZWxvYWRTZWxlY3RvciA9IHNsaWRlci5jaGlsZHJlbjtcblx0XHRcdC8vIG9ubHkgY2hlY2sgZm9yIGNvbnRyb2wgYWRkaXRpb24gaWYgbm90IGluIFwidGlja2VyXCIgbW9kZVxuXHRcdFx0aWYoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpe1xuXHRcdFx0XHQvLyBpZiBwYWdlciBpcyByZXF1ZXN0ZWQsIGFkZCBpdFxuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MucGFnZXIpIGFwcGVuZFBhZ2VyKCk7XG5cdFx0XHRcdC8vIGlmIGNvbnRyb2xzIGFyZSByZXF1ZXN0ZWQsIGFkZCB0aGVtXG5cdFx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgYXBwZW5kQ29udHJvbHMoKTtcblx0XHRcdFx0Ly8gaWYgYXV0byBpcyB0cnVlLCBhbmQgYXV0byBjb250cm9scyBhcmUgcmVxdWVzdGVkLCBhZGQgdGhlbVxuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzKSBhcHBlbmRDb250cm9sc0F1dG8oKTtcblx0XHRcdFx0Ly8gaWYgYW55IGNvbnRyb2wgb3B0aW9uIGlzIHJlcXVlc3RlZCwgYWRkIHRoZSBjb250cm9scyB3cmFwcGVyXG5cdFx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5jb250cm9scyB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzIHx8IHNsaWRlci5zZXR0aW5ncy5wYWdlcikgc2xpZGVyLnZpZXdwb3J0LmFmdGVyKHNsaWRlci5jb250cm9scy5lbCk7XG5cdFx0XHQvLyBpZiB0aWNrZXIgbW9kZSwgZG8gbm90IGFsbG93IGEgcGFnZXJcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRzbGlkZXIuc2V0dGluZ3MucGFnZXIgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdC8vIHByZWxvYWQgYWxsIGltZywgdGhlbiBwZXJmb3JtIGZpbmFsIERPTSAvIENTUyBtb2RpZmljYXRpb25zIHRoYXQgZGVwZW5kIG9uIGltZyBiZWluZyBsb2FkZWRcblx0XHRcdGxvYWRFbGVtZW50cyhwcmVsb2FkU2VsZWN0b3IsIHN0YXJ0KTtcblx0XHR9XG5cblx0XHR2YXIgbG9hZEVsZW1lbnRzID0gZnVuY3Rpb24oc2VsZWN0b3IsIGNhbGxiYWNrKXtcblx0XHRcdHZhciB0b3RhbCA9IHNlbGVjdG9yLmZpbmQoJ2ltZywgaWZyYW1lJykubGVuZ3RoO1xuXHRcdFx0aWYgKHRvdGFsID09IDApe1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR2YXIgY291bnQgPSAwO1xuXHRcdFx0c2VsZWN0b3IuZmluZCgnaW1nLCBpZnJhbWUnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykub25lKCdsb2FkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgaWYoKytjb3VudCA9PSB0b3RhbCkgY2FsbGJhY2soKTtcblx0XHRcdFx0fSkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0ICBpZih0aGlzLmNvbXBsZXRlKSAkKHRoaXMpLmxvYWQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTdGFydCB0aGUgc2xpZGVyXG5cdFx0ICovXG5cdFx0dmFyIHN0YXJ0ID0gZnVuY3Rpb24oKXtcblx0XHRcdC8vIGlmIGluZmluaXRlIGxvb3AsIHByZXBhcmUgYWRkaXRpb25hbCBzbGlkZXNcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgIT0gJ2ZhZGUnICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKXtcblx0XHRcdFx0dmFyIHNsaWNlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyA/IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgOiBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzO1xuXHRcdFx0XHR2YXIgc2xpY2VBcHBlbmQgPSBzbGlkZXIuY2hpbGRyZW4uc2xpY2UoMCwgc2xpY2UpLmNsb25lKCkuYWRkQ2xhc3MoJ2J4LWNsb25lJyk7XG5cdFx0XHRcdHZhciBzbGljZVByZXBlbmQgPSBzbGlkZXIuY2hpbGRyZW4uc2xpY2UoLXNsaWNlKS5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpO1xuXHRcdFx0XHRlbC5hcHBlbmQoc2xpY2VBcHBlbmQpLnByZXBlbmQoc2xpY2VQcmVwZW5kKTtcblx0XHRcdH1cblx0XHRcdC8vIHJlbW92ZSB0aGUgbG9hZGluZyBET00gZWxlbWVudFxuXHRcdFx0c2xpZGVyLmxvYWRlci5yZW1vdmUoKTtcblx0XHRcdC8vIHNldCB0aGUgbGVmdCAvIHRvcCBwb3NpdGlvbiBvZiBcImVsXCJcblx0XHRcdHNldFNsaWRlUG9zaXRpb24oKTtcblx0XHRcdC8vIGlmIFwidmVydGljYWxcIiBtb2RlLCBhbHdheXMgdXNlIGFkYXB0aXZlSGVpZ2h0IHRvIHByZXZlbnQgb2RkIGJlaGF2aW9yXG5cdFx0XHRpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJykgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0ID0gdHJ1ZTtcblx0XHRcdC8vIHNldCB0aGUgdmlld3BvcnQgaGVpZ2h0XG5cdFx0XHRzbGlkZXIudmlld3BvcnQuaGVpZ2h0KGdldFZpZXdwb3J0SGVpZ2h0KCkpO1xuXHRcdFx0Ly8gbWFrZSBzdXJlIGV2ZXJ5dGhpbmcgaXMgcG9zaXRpb25lZCBqdXN0IHJpZ2h0IChzYW1lIGFzIGEgd2luZG93IHJlc2l6ZSlcblx0XHRcdGVsLnJlZHJhd1NsaWRlcigpO1xuXHRcdFx0Ly8gb25TbGlkZXJMb2FkIGNhbGxiYWNrXG5cdFx0XHRzbGlkZXIuc2V0dGluZ3Mub25TbGlkZXJMb2FkKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuXHRcdFx0Ly8gc2xpZGVyIGhhcyBiZWVuIGZ1bGx5IGluaXRpYWxpemVkXG5cdFx0XHRzbGlkZXIuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHRcdFx0Ly8gYmluZCB0aGUgcmVzaXplIGNhbGwgdG8gdGhlIHdpbmRvd1xuXHRcdFx0aWYgKHNsaWRlci5zZXR0aW5ncy5yZXNwb25zaXZlKSAkKHdpbmRvdykuYmluZCgncmVzaXplJywgcmVzaXplV2luZG93KTtcblx0XHRcdC8vIGlmIGF1dG8gaXMgdHJ1ZSBhbmQgaGFzIG1vcmUgdGhhbiAxIHBhZ2UsIHN0YXJ0IHRoZSBzaG93XG5cdFx0XHRpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLmF1dG9TdGFydCAmJiAoZ2V0UGFnZXJRdHkoKSA+IDEgfHwgc2xpZGVyLnNldHRpbmdzLmF1dG9TbGlkZUZvck9uZVBhZ2UpKSBpbml0QXV0bygpO1xuXHRcdFx0Ly8gaWYgdGlja2VyIGlzIHRydWUsIHN0YXJ0IHRoZSB0aWNrZXJcblx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VyKSBpbml0VGlja2VyKCk7XG5cdFx0XHQvLyBpZiBwYWdlciBpcyByZXF1ZXN0ZWQsIG1ha2UgdGhlIGFwcHJvcHJpYXRlIHBhZ2VyIGxpbmsgYWN0aXZlXG5cdFx0XHRpZiAoc2xpZGVyLnNldHRpbmdzLnBhZ2VyKSB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSk7XG5cdFx0XHQvLyBjaGVjayBmb3IgYW55IHVwZGF0ZXMgdG8gdGhlIGNvbnRyb2xzIChsaWtlIGhpZGVDb250cm9sT25FbmQgdXBkYXRlcylcblx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMpIHVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzKCk7XG5cdFx0XHQvLyBpZiB0b3VjaEVuYWJsZWQgaXMgdHJ1ZSwgc2V0dXAgdGhlIHRvdWNoIGV2ZW50c1xuXHRcdFx0aWYgKHNsaWRlci5zZXR0aW5ncy50b3VjaEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIGluaXRUb3VjaCgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdXNlZCB0byBkZXRlcm1pbmUgZWl0aGVyIGFkYXB0aXZlSGVpZ2h0IG9yIHRoZSBtYXhIZWlnaHQgdmFsdWVcblx0XHQgKi9cblx0XHR2YXIgZ2V0Vmlld3BvcnRIZWlnaHQgPSBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGhlaWdodCA9IDA7XG5cdFx0XHQvLyBmaXJzdCBkZXRlcm1pbmUgd2hpY2ggY2hpbGRyZW4gKHNsaWRlcykgc2hvdWxkIGJlIHVzZWQgaW4gb3VyIGhlaWdodCBjYWxjdWxhdGlvblxuXHRcdFx0dmFyIGNoaWxkcmVuID0gJCgpO1xuXHRcdFx0Ly8gaWYgbW9kZSBpcyBub3QgXCJ2ZXJ0aWNhbFwiIGFuZCBhZGFwdGl2ZUhlaWdodCBpcyBmYWxzZSwgaW5jbHVkZSBhbGwgY2hpbGRyZW5cblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlICE9ICd2ZXJ0aWNhbCcgJiYgIXNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCl7XG5cdFx0XHRcdGNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuO1xuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdC8vIGlmIG5vdCBjYXJvdXNlbCwgcmV0dXJuIHRoZSBzaW5nbGUgYWN0aXZlIGNoaWxkXG5cdFx0XHRcdGlmKCFzbGlkZXIuY2Fyb3VzZWwpe1xuXHRcdFx0XHRcdGNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuXHRcdFx0XHQvLyBpZiBjYXJvdXNlbCwgcmV0dXJuIGEgc2xpY2Ugb2YgY2hpbGRyZW5cblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0Ly8gZ2V0IHRoZSBpbmRpdmlkdWFsIHNsaWRlIGluZGV4XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRJbmRleCA9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID09IDEgPyBzbGlkZXIuYWN0aXZlLmluZGV4IDogc2xpZGVyLmFjdGl2ZS5pbmRleCAqIGdldE1vdmVCeSgpO1xuXHRcdFx0XHRcdC8vIGFkZCB0aGUgY3VycmVudCBzbGlkZSB0byB0aGUgY2hpbGRyZW5cblx0XHRcdFx0XHRjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbi5lcShjdXJyZW50SW5kZXgpO1xuXHRcdFx0XHRcdC8vIGN5Y2xlIHRocm91Z2ggdGhlIHJlbWFpbmluZyBcInNob3dpbmdcIiBzbGlkZXNcblx0XHRcdFx0XHRmb3IgKGkgPSAxOyBpIDw9IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSAxOyBpKyspe1xuXHRcdFx0XHRcdFx0Ly8gaWYgbG9vcGVkIGJhY2sgdG8gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRpZihjdXJyZW50SW5kZXggKyBpID49IHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpe1xuXHRcdFx0XHRcdFx0XHRjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoaSAtIDEpKTtcblx0XHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0XHRjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4ICsgaSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgc3VtIG9mIHRoZSBoZWlnaHRzIG9mIHRoZSBjaGlsZHJlblxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyl7XG5cdFx0XHRcdGNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRcdFx0ICBoZWlnaHQgKz0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly8gYWRkIHVzZXItc3VwcGxpZWQgbWFyZ2luc1xuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gPiAwKXtcblx0XHRcdFx0XHRoZWlnaHQgKz0gc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luICogKHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgLSAxKTtcblx0XHRcdFx0fVxuXHRcdFx0Ly8gaWYgbm90IFwidmVydGljYWxcIiBtb2RlLCBjYWxjdWxhdGUgdGhlIG1heCBoZWlnaHQgb2YgdGhlIGNoaWxkcmVuXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0aGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0cmV0dXJuICQodGhpcykub3V0ZXJIZWlnaHQoZmFsc2UpO1xuXHRcdFx0XHR9KS5nZXQoKSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmKHNsaWRlci52aWV3cG9ydC5jc3MoJ2JveC1zaXppbmcnKSA9PSAnYm9yZGVyLWJveCcpe1xuXHRcdFx0XHRoZWlnaHQgKz1cdHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygncGFkZGluZy10b3AnKSkgKyBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctYm90dG9tJykpICtcblx0XHRcdFx0XHRcdFx0cGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdib3JkZXItdG9wLXdpZHRoJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdib3JkZXItYm90dG9tLXdpZHRoJykpO1xuXHRcdFx0fWVsc2UgaWYoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm94LXNpemluZycpID09ICdwYWRkaW5nLWJveCcpe1xuXHRcdFx0XHRoZWlnaHQgKz1cdHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygncGFkZGluZy10b3AnKSkgKyBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctYm90dG9tJykpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gaGVpZ2h0O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgd2lkdGggdG8gYmUgdXNlZCBmb3IgdGhlIG91dGVyIHdyYXBwZXIgLyB2aWV3cG9ydFxuXHRcdCAqL1xuXHRcdHZhciBnZXRWaWV3cG9ydE1heFdpZHRoID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciB3aWR0aCA9ICcxMDAlJztcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID4gMCl7XG5cdFx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7XG5cdFx0XHRcdFx0d2lkdGggPSAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKSArICgoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDEpICogc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0d2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHdpZHRoO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgd2lkdGggdG8gYmUgYXBwbGllZCB0byBlYWNoIHNsaWRlXG5cdFx0ICovXG5cdFx0dmFyIGdldFNsaWRlV2lkdGggPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly8gc3RhcnQgd2l0aCBhbnkgdXNlci1zdXBwbGllZCBzbGlkZSB3aWR0aFxuXHRcdFx0dmFyIG5ld0VsV2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aDtcblx0XHRcdC8vIGdldCB0aGUgY3VycmVudCB2aWV3cG9ydCB3aWR0aFxuXHRcdFx0dmFyIHdyYXBXaWR0aCA9IHNsaWRlci52aWV3cG9ydC53aWR0aCgpO1xuXHRcdFx0Ly8gaWYgc2xpZGUgd2lkdGggd2FzIG5vdCBzdXBwbGllZCwgb3IgaXMgbGFyZ2VyIHRoYW4gdGhlIHZpZXdwb3J0IHVzZSB0aGUgdmlld3BvcnQgd2lkdGhcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID09IDAgfHxcblx0XHRcdFx0KHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID4gd3JhcFdpZHRoICYmICFzbGlkZXIuY2Fyb3VzZWwpIHx8XG5cdFx0XHRcdHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcpe1xuXHRcdFx0XHRuZXdFbFdpZHRoID0gd3JhcFdpZHRoO1xuXHRcdFx0Ly8gaWYgY2Fyb3VzZWwsIHVzZSB0aGUgdGhyZXNob2xkcyB0byBkZXRlcm1pbmUgdGhlIHdpZHRoXG5cdFx0XHR9ZWxzZSBpZihzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMSAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpe1xuXHRcdFx0XHRpZih3cmFwV2lkdGggPiBzbGlkZXIubWF4VGhyZXNob2xkKXtcblx0XHRcdFx0XHQvLyBuZXdFbFdpZHRoID0gKHdyYXBXaWR0aCAtIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDEpKSkgLyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzO1xuXHRcdFx0XHR9ZWxzZSBpZih3cmFwV2lkdGggPCBzbGlkZXIubWluVGhyZXNob2xkKXtcblx0XHRcdFx0XHRuZXdFbFdpZHRoID0gKHdyYXBXaWR0aCAtIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpKSkgLyBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3RWxXaWR0aDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2xpZGVzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydCAoaW5jbHVkZXMgcGFydGlhbGx5IHZpc2libGUgc2xpZGVzKVxuXHRcdCAqL1xuXHRcdHZhciBnZXROdW1iZXJTbGlkZXNTaG93aW5nID0gZnVuY3Rpb24oKXtcblx0XHRcdHZhciBzbGlkZXNTaG93aW5nID0gMTtcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyAmJiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApe1xuXHRcdFx0XHQvLyBpZiB2aWV3cG9ydCBpcyBzbWFsbGVyIHRoYW4gbWluVGhyZXNob2xkLCByZXR1cm4gbWluU2xpZGVzXG5cdFx0XHRcdGlmKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIDwgc2xpZGVyLm1pblRocmVzaG9sZCl7XG5cdFx0XHRcdFx0c2xpZGVzU2hvd2luZyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG5cdFx0XHRcdC8vIGlmIHZpZXdwb3J0IGlzIGxhcmdlciB0aGFuIG1pblRocmVzaG9sZCwgcmV0dXJuIG1heFNsaWRlc1xuXHRcdFx0XHR9ZWxzZSBpZihzbGlkZXIudmlld3BvcnQud2lkdGgoKSA+IHNsaWRlci5tYXhUaHJlc2hvbGQpe1xuXHRcdFx0XHRcdHNsaWRlc1Nob3dpbmcgPSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzO1xuXHRcdFx0XHQvLyBpZiB2aWV3cG9ydCBpcyBiZXR3ZWVuIG1pbiAvIG1heCB0aHJlc2hvbGRzLCBkaXZpZGUgdmlld3BvcnQgd2lkdGggYnkgZmlyc3QgY2hpbGQgd2lkdGhcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0dmFyIGNoaWxkV2lkdGggPSBzbGlkZXIuY2hpbGRyZW4uZmlyc3QoKS53aWR0aCgpICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luO1xuXHRcdFx0XHRcdHNsaWRlc1Nob3dpbmcgPSBNYXRoLmZsb29yKChzbGlkZXIudmlld3BvcnQud2lkdGgoKSArXG5cdFx0XHRcdFx0XHRzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pIC8gY2hpbGRXaWR0aCk7XG5cdFx0XHRcdH1cblx0XHRcdC8vIGlmIFwidmVydGljYWxcIiBtb2RlLCBzbGlkZXMgc2hvd2luZyB3aWxsIGFsd2F5cyBiZSBtaW5TbGlkZXNcblx0XHRcdH1lbHNlIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcpe1xuXHRcdFx0XHRzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcblx0XHRcdH1cblx0XHRcdHJldHVybiBzbGlkZXNTaG93aW5nO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIG51bWJlciBvZiBwYWdlcyAob25lIGZ1bGwgdmlld3BvcnQgb2Ygc2xpZGVzIGlzIG9uZSBcInBhZ2VcIilcblx0XHQgKi9cblx0XHR2YXIgZ2V0UGFnZXJRdHkgPSBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIHBhZ2VyUXR5ID0gMDtcblx0XHRcdC8vIGlmIG1vdmVTbGlkZXMgaXMgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyXG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA+IDApe1xuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKXtcblx0XHRcdFx0XHRwYWdlclF0eSA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gZ2V0TW92ZUJ5KCkpO1xuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHQvLyB1c2UgYSB3aGlsZSBsb29wIHRvIGRldGVybWluZSBwYWdlc1xuXHRcdFx0XHRcdHZhciBicmVha1BvaW50ID0gMDtcblx0XHRcdFx0XHR2YXIgY291bnRlciA9IDBcblx0XHRcdFx0XHQvLyB3aGVuIGJyZWFrcG9pbnQgZ29lcyBhYm92ZSBjaGlsZHJlbiBsZW5ndGgsIGNvdW50ZXIgaXMgdGhlIG51bWJlciBvZiBwYWdlc1xuXHRcdFx0XHRcdHdoaWxlIChicmVha1BvaW50IDwgc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCl7XG5cdFx0XHRcdFx0XHQrK3BhZ2VyUXR5O1xuXHRcdFx0XHRcdFx0YnJlYWtQb2ludCA9IGNvdW50ZXIgKyBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7XG5cdFx0XHRcdFx0XHRjb3VudGVyICs9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSA/IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDogZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0Ly8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKSBkaXZpZGUgY2hpbGRyZW4gbGVuZ3RoIGJ5IHNpZGVzIHNob3dpbmcsIHRoZW4gcm91bmQgdXBcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRwYWdlclF0eSA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwYWdlclF0eTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgaW5kaXZ1YWwgc2xpZGVzIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBzbGlkZXJcblx0XHQgKi9cblx0XHR2YXIgZ2V0TW92ZUJ5ID0gZnVuY3Rpb24oKXtcblx0XHRcdC8vIGlmIG1vdmVTbGlkZXMgd2FzIHNldCBieSB0aGUgdXNlciBhbmQgbW92ZVNsaWRlcyBpcyBsZXNzIHRoYW4gbnVtYmVyIG9mIHNsaWRlcyBzaG93aW5nXG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA+IDAgJiYgc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPD0gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpKXtcblx0XHRcdFx0cmV0dXJuIHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKVxuXHRcdFx0cmV0dXJuIGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTZXRzIHRoZSBzbGlkZXIncyAoZWwpIGxlZnQgb3IgdG9wIHBvc2l0aW9uXG5cdFx0ICovXG5cdFx0dmFyIHNldFNsaWRlUG9zaXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly8gaWYgbGFzdCBzbGlkZSwgbm90IGluZmluaXRlIGxvb3AsIGFuZCBudW1iZXIgb2YgY2hpbGRyZW4gaXMgbGFyZ2VyIHRoYW4gc3BlY2lmaWVkIG1heFNsaWRlc1xuXHRcdFx0aWYoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCA+IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0ICYmICFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKXtcblx0XHRcdFx0aWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7XG5cdFx0XHRcdFx0Ly8gZ2V0IHRoZSBsYXN0IGNoaWxkJ3MgcG9zaXRpb25cblx0XHRcdFx0XHR2YXIgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmxhc3QoKTtcblx0XHRcdFx0XHR2YXIgcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTtcblx0XHRcdFx0XHQvLyBzZXQgdGhlIGxlZnQgcG9zaXRpb25cblx0XHRcdFx0XHRzZXRQb3NpdGlvblByb3BlcnR5KC0ocG9zaXRpb24ubGVmdCAtIChzbGlkZXIudmlld3BvcnQud2lkdGgoKSAtIGxhc3RDaGlsZC5vdXRlcldpZHRoKCkpKSwgJ3Jlc2V0JywgMCk7XG5cdFx0XHRcdH1lbHNlIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcpe1xuXHRcdFx0XHRcdC8vIGdldCB0aGUgbGFzdCBzaG93aW5nIGluZGV4J3MgcG9zaXRpb25cblx0XHRcdFx0XHR2YXIgbGFzdFNob3dpbmdJbmRleCA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzO1xuXHRcdFx0XHRcdHZhciBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShsYXN0U2hvd2luZ0luZGV4KS5wb3NpdGlvbigpO1xuXHRcdFx0XHRcdC8vIHNldCB0aGUgdG9wIHBvc2l0aW9uXG5cdFx0XHRcdFx0c2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24udG9wLCAncmVzZXQnLCAwKTtcblx0XHRcdFx0fVxuXHRcdFx0Ly8gaWYgbm90IGxhc3Qgc2xpZGVcblx0XHRcdH1lbHNle1xuXHRcdFx0XHQvLyBnZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBzaG93aW5nIHNsaWRlXG5cdFx0XHRcdHZhciBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4ICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7XG5cdFx0XHRcdC8vIGNoZWNrIGZvciBsYXN0IHNsaWRlXG5cdFx0XHRcdGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09IGdldFBhZ2VyUXR5KCkgLSAxKSBzbGlkZXIuYWN0aXZlLmxhc3QgPSB0cnVlO1xuXHRcdFx0XHQvLyBzZXQgdGhlIHJlcGVjdGl2ZSBwb3NpdGlvblxuXHRcdFx0XHRpZiAocG9zaXRpb24gIT0gdW5kZWZpbmVkKXtcblx0XHRcdFx0XHRpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKSBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi5sZWZ0LCAncmVzZXQnLCAwKTtcblx0XHRcdFx0XHRlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKSBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi50b3AsICdyZXNldCcsIDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyB0aGUgZWwncyBhbmltYXRpbmcgcHJvcGVydHkgcG9zaXRpb24gKHdoaWNoIGluIHR1cm4gd2lsbCBzb21ldGltZXMgYW5pbWF0ZSBlbCkuXG5cdFx0ICogSWYgdXNpbmcgQ1NTLCBzZXRzIHRoZSB0cmFuc2Zvcm0gcHJvcGVydHkuIElmIG5vdCB1c2luZyBDU1MsIHNldHMgdGhlIHRvcCAvIGxlZnQgcHJvcGVydHkuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gdmFsdWUgKGludClcblx0XHQgKiAgLSB0aGUgYW5pbWF0aW5nIHByb3BlcnR5J3MgdmFsdWVcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB0eXBlIChzdHJpbmcpICdzbGlkZXInLCAncmVzZXQnLCAndGlja2VyJ1xuXHRcdCAqICAtIHRoZSB0eXBlIG9mIGluc3RhbmNlIGZvciB3aGljaCB0aGUgZnVuY3Rpb24gaXMgYmVpbmdcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBkdXJhdGlvbiAoaW50KVxuXHRcdCAqICAtIHRoZSBhbW91bnQgb2YgdGltZSAoaW4gbXMpIHRoZSB0cmFuc2l0aW9uIHNob3VsZCBvY2N1cHlcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBwYXJhbXMgKGFycmF5KSBvcHRpb25hbFxuXHRcdCAqICAtIGFuIG9wdGlvbmFsIHBhcmFtZXRlciBjb250YWluaW5nIGFueSB2YXJpYWJsZXMgdGhhdCBuZWVkIHRvIGJlIHBhc3NlZCBpblxuXHRcdCAqL1xuXHRcdHZhciBzZXRQb3NpdGlvblByb3BlcnR5ID0gZnVuY3Rpb24odmFsdWUsIHR5cGUsIGR1cmF0aW9uLCBwYXJhbXMpe1xuXHRcdFx0Ly8gdXNlIENTUyB0cmFuc2Zvcm1cblx0XHRcdGlmKHNsaWRlci51c2luZ0NTUyl7XG5cdFx0XHRcdC8vIGRldGVybWluZSB0aGUgdHJhbnNsYXRlM2QgdmFsdWVcblx0XHRcdFx0dmFyIHByb3BWYWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcgPyAndHJhbnNsYXRlM2QoMCwgJyArIHZhbHVlICsgJ3B4LCAwKScgOiAndHJhbnNsYXRlM2QoJyArIHZhbHVlICsgJ3B4LCAwLCAwKSc7XG5cdFx0XHRcdC8vIGFkZCB0aGUgQ1NTIHRyYW5zaXRpb24tZHVyYXRpb25cblx0XHRcdFx0ZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tZHVyYXRpb24nLCBkdXJhdGlvbiAvIDEwMDAgKyAncycpO1xuXHRcdFx0XHRpZih0eXBlID09ICdzbGlkZScpe1xuXHRcdFx0XHRcdC8vIHNldCB0aGUgcHJvcGVydHkgdmFsdWVcblx0XHRcdFx0XHRlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCBwcm9wVmFsdWUpO1xuXHRcdFx0XHRcdC8vIGJpbmQgYSBjYWxsYmFjayBtZXRob2QgLSBleGVjdXRlcyB3aGVuIENTUyB0cmFuc2l0aW9uIGNvbXBsZXRlc1xuXHRcdFx0XHRcdGVsLmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0Ly8gdW5iaW5kIHRoZSBjYWxsYmFja1xuXHRcdFx0XHRcdFx0ZWwudW5iaW5kKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJyk7XG5cdFx0XHRcdFx0XHR1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9ZWxzZSBpZih0eXBlID09ICdyZXNldCcpe1xuXHRcdFx0XHRcdGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XG5cdFx0XHRcdH1lbHNlIGlmKHR5cGUgPT0gJ3RpY2tlcicpe1xuXHRcdFx0XHRcdC8vIG1ha2UgdGhlIHRyYW5zaXRpb24gdXNlICdsaW5lYXInXG5cdFx0XHRcdFx0ZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2xpbmVhcicpO1xuXHRcdFx0XHRcdGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XG5cdFx0XHRcdFx0Ly8gYmluZCBhIGNhbGxiYWNrIG1ldGhvZCAtIGV4ZWN1dGVzIHdoZW4gQ1NTIHRyYW5zaXRpb24gY29tcGxldGVzXG5cdFx0XHRcdFx0ZWwuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHQvLyB1bmJpbmQgdGhlIGNhbGxiYWNrXG5cdFx0XHRcdFx0XHRlbC51bmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnKTtcblx0XHRcdFx0XHRcdC8vIHJlc2V0IHRoZSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0c2V0UG9zaXRpb25Qcm9wZXJ0eShwYXJhbXNbJ3Jlc2V0VmFsdWUnXSwgJ3Jlc2V0JywgMCk7XG5cdFx0XHRcdFx0XHQvLyBzdGFydCB0aGUgbG9vcCBhZ2FpblxuXHRcdFx0XHRcdFx0dGlja2VyTG9vcCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHQvLyB1c2UgSlMgYW5pbWF0ZVxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdHZhciBhbmltYXRlT2JqID0ge307XG5cdFx0XHRcdGFuaW1hdGVPYmpbc2xpZGVyLmFuaW1Qcm9wXSA9IHZhbHVlO1xuXHRcdFx0XHRpZih0eXBlID09ICdzbGlkZScpe1xuXHRcdFx0XHRcdGVsLmFuaW1hdGUoYW5pbWF0ZU9iaiwgZHVyYXRpb24sIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHR1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9ZWxzZSBpZih0eXBlID09ICdyZXNldCcpe1xuXHRcdFx0XHRcdGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHZhbHVlKVxuXHRcdFx0XHR9ZWxzZSBpZih0eXBlID09ICd0aWNrZXInKXtcblx0XHRcdFx0XHRlbC5hbmltYXRlKGFuaW1hdGVPYmosIHNwZWVkLCAnbGluZWFyJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHNldFBvc2l0aW9uUHJvcGVydHkocGFyYW1zWydyZXNldFZhbHVlJ10sICdyZXNldCcsIDApO1xuXHRcdFx0XHRcdFx0Ly8gcnVuIHRoZSByZWN1cnNpdmUgbG9vcCBhZnRlciBhbmltYXRpb25cblx0XHRcdFx0XHRcdHRpY2tlckxvb3AoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFBvcHVsYXRlcyB0aGUgcGFnZXIgd2l0aCBwcm9wZXIgYW1vdW50IG9mIHBhZ2VzXG5cdFx0ICovXG5cdFx0dmFyIHBvcHVsYXRlUGFnZXIgPSBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIHBhZ2VySHRtbCA9ICcnO1xuXHRcdFx0dmFyIHBhZ2VyUXR5ID0gZ2V0UGFnZXJRdHkoKTtcblx0XHRcdC8vIGxvb3AgdGhyb3VnaCBlYWNoIHBhZ2VyIGl0ZW1cblx0XHRcdGZvcih2YXIgaT0wOyBpIDwgcGFnZXJRdHk7IGkrKyl7XG5cdFx0XHRcdHZhciBsaW5rQ29udGVudCA9ICcnO1xuXHRcdFx0XHQvLyBpZiBhIGJ1aWxkUGFnZXIgZnVuY3Rpb24gaXMgc3VwcGxpZWQsIHVzZSBpdCB0byBnZXQgcGFnZXIgbGluayB2YWx1ZSwgZWxzZSB1c2UgaW5kZXggKyAxXG5cdFx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyICYmICQuaXNGdW5jdGlvbihzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlcikpe1xuXHRcdFx0XHRcdGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSk7XG5cdFx0XHRcdFx0c2xpZGVyLnBhZ2VyRWwuYWRkQ2xhc3MoJ2J4LWN1c3RvbS1wYWdlcicpO1xuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRsaW5rQ29udGVudCA9IGkgKyAxO1xuXHRcdFx0XHRcdHNsaWRlci5wYWdlckVsLmFkZENsYXNzKCdieC1kZWZhdWx0LXBhZ2VyJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gdmFyIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSA/IHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKGkpIDogaSArIDE7XG5cdFx0XHRcdC8vIGFkZCB0aGUgbWFya3VwIHRvIHRoZSBzdHJpbmdcblx0XHRcdFx0cGFnZXJIdG1sICs9ICc8ZGl2IGNsYXNzPVwiYngtcGFnZXItaXRlbVwiPjxhIGhyZWY9XCJcIiBkYXRhLXNsaWRlLWluZGV4PVwiJyArIGkgKyAnXCIgY2xhc3M9XCJieC1wYWdlci1saW5rXCI+JyArIGxpbmtDb250ZW50ICsgJzwvYT48L2Rpdj4nO1xuXHRcdFx0fTtcblx0XHRcdC8vIHBvcHVsYXRlIHRoZSBwYWdlciBlbGVtZW50IHdpdGggcGFnZXIgbGlua3Ncblx0XHRcdHNsaWRlci5wYWdlckVsLmh0bWwocGFnZXJIdG1sKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBcHBlbmRzIHRoZSBwYWdlciB0byB0aGUgY29udHJvbHMgZWxlbWVudFxuXHRcdCAqL1xuXHRcdHZhciBhcHBlbmRQYWdlciA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRpZighc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKXtcblx0XHRcdFx0Ly8gY3JlYXRlIHRoZSBwYWdlciBET00gZWxlbWVudFxuXHRcdFx0XHRzbGlkZXIucGFnZXJFbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1wYWdlclwiIC8+Jyk7XG5cdFx0XHRcdC8vIGlmIGEgcGFnZXIgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBwYWdlclxuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MucGFnZXJTZWxlY3Rvcil7XG5cdFx0XHRcdFx0JChzbGlkZXIuc2V0dGluZ3MucGFnZXJTZWxlY3RvcikuaHRtbChzbGlkZXIucGFnZXJFbCk7XG5cdFx0XHRcdC8vIGlmIG5vIHBhZ2VyIHNlbGVjdG9yIHdhcyBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyXG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnYngtaGFzLXBhZ2VyJykuYXBwZW5kKHNsaWRlci5wYWdlckVsKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBwb3B1bGF0ZSB0aGUgcGFnZXJcblx0XHRcdFx0cG9wdWxhdGVQYWdlcigpO1xuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdHNsaWRlci5wYWdlckVsID0gJChzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gYXNzaWduIHRoZSBwYWdlciBjbGljayBiaW5kaW5nXG5cdFx0XHRzbGlkZXIucGFnZXJFbC5vbignY2xpY2snLCAnYScsIGNsaWNrUGFnZXJCaW5kKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBcHBlbmRzIHByZXYgLyBuZXh0IGNvbnRyb2xzIHRvIHRoZSBjb250cm9scyBlbGVtZW50XG5cdFx0ICovXG5cdFx0dmFyIGFwcGVuZENvbnRyb2xzID0gZnVuY3Rpb24oKXtcblx0XHRcdHNsaWRlci5jb250cm9scy5uZXh0ID0gJCgnPGEgY2xhc3M9XCJieC1uZXh0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3MubmV4dFRleHQgKyAnPC9hPicpO1xuXHRcdFx0c2xpZGVyLmNvbnRyb2xzLnByZXYgPSAkKCc8YSBjbGFzcz1cImJ4LXByZXZcIiBocmVmPVwiXCI+JyArIHNsaWRlci5zZXR0aW5ncy5wcmV2VGV4dCArICc8L2E+Jyk7XG5cdFx0XHQvLyBiaW5kIGNsaWNrIGFjdGlvbnMgdG8gdGhlIGNvbnRyb2xzXG5cdFx0XHRzbGlkZXIuY29udHJvbHMubmV4dC5iaW5kKCdjbGljaycsIGNsaWNrTmV4dEJpbmQpO1xuXHRcdFx0c2xpZGVyLmNvbnRyb2xzLnByZXYuYmluZCgnY2xpY2snLCBjbGlja1ByZXZCaW5kKTtcblx0XHRcdC8vIGlmIG5leHRTbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXRcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5uZXh0U2VsZWN0b3Ipe1xuXHRcdFx0XHQkKHNsaWRlci5zZXR0aW5ncy5uZXh0U2VsZWN0b3IpLmFwcGVuZChzbGlkZXIuY29udHJvbHMubmV4dCk7XG5cdFx0XHR9XG5cdFx0XHQvLyBpZiBwcmV2U2xlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKXtcblx0XHRcdFx0JChzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnByZXYpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgbm8gY3VzdG9tIHNlbGVjdG9ycyB3ZXJlIHN1cHBsaWVkXG5cdFx0XHRpZighc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3RvciAmJiAhc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcil7XG5cdFx0XHRcdC8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTVxuXHRcdFx0XHRzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwgPSAkKCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHMtZGlyZWN0aW9uXCIgLz4nKTtcblx0XHRcdFx0Ly8gYWRkIHRoZSBjb250cm9sIGVsZW1lbnRzIHRvIHRoZSBkaXJlY3Rpb25FbFxuXHRcdFx0XHRzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwuYXBwZW5kKHNsaWRlci5jb250cm9scy5wcmV2KS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLm5leHQpO1xuXHRcdFx0XHQvLyBzbGlkZXIudmlld3BvcnQuYXBwZW5kKHNsaWRlci5jb250cm9scy5kaXJlY3Rpb25FbCk7XG5cdFx0XHRcdHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnYngtaGFzLWNvbnRyb2xzLWRpcmVjdGlvbicpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEFwcGVuZHMgc3RhcnQgLyBzdG9wIGF1dG8gY29udHJvbHMgdG8gdGhlIGNvbnRyb2xzIGVsZW1lbnRcblx0XHQgKi9cblx0XHR2YXIgYXBwZW5kQ29udHJvbHNBdXRvID0gZnVuY3Rpb24oKXtcblx0XHRcdHNsaWRlci5jb250cm9scy5zdGFydCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvLWl0ZW1cIj48YSBjbGFzcz1cImJ4LXN0YXJ0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRUZXh0ICsgJzwvYT48L2Rpdj4nKTtcblx0XHRcdHNsaWRlci5jb250cm9scy5zdG9wID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG8taXRlbVwiPjxhIGNsYXNzPVwiYngtc3RvcFwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLnN0b3BUZXh0ICsgJzwvYT48L2Rpdj4nKTtcblx0XHRcdC8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTVxuXHRcdFx0c2xpZGVyLmNvbnRyb2xzLmF1dG9FbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvXCIgLz4nKTtcblx0XHRcdC8vIGJpbmQgY2xpY2sgYWN0aW9ucyB0byB0aGUgY29udHJvbHNcblx0XHRcdHNsaWRlci5jb250cm9scy5hdXRvRWwub24oJ2NsaWNrJywgJy5ieC1zdGFydCcsIGNsaWNrU3RhcnRCaW5kKTtcblx0XHRcdHNsaWRlci5jb250cm9scy5hdXRvRWwub24oJ2NsaWNrJywgJy5ieC1zdG9wJywgY2xpY2tTdG9wQmluZCk7XG5cdFx0XHQvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lLCBpbnNlcnQgb25seSB0aGUgXCJzdGFydFwiIGNvbnRyb2xcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNDb21iaW5lKXtcblx0XHRcdFx0c2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0YXJ0KTtcblx0XHRcdC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgZmFsc2UsIGluc2VydCBib3RoIGNvbnRyb2xzXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0c2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0YXJ0KS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0b3ApO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgYXV0byBjb250cm9scyBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0IHdpdGggdGhlIGNvbnRyb2xzXG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3Ipe1xuXHRcdFx0XHQkKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNTZWxlY3RvcikuaHRtbChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTtcblx0XHRcdC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIG5vdCBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0c2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtY29udHJvbHMtYXV0bycpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTtcblx0XHRcdH1cblx0XHRcdC8vIHVwZGF0ZSB0aGUgYXV0byBjb250cm9sc1xuXHRcdFx0dXBkYXRlQXV0b0NvbnRyb2xzKHNsaWRlci5zZXR0aW5ncy5hdXRvU3RhcnQgPyAnc3RvcCcgOiAnc3RhcnQnKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBcHBlbmRzIGltYWdlIGNhcHRpb25zIHRvIHRoZSBET01cblx0XHQgKi9cblx0XHR2YXIgYXBwZW5kQ2FwdGlvbnMgPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly8gY3ljbGUgdGhyb3VnaCBlYWNoIGNoaWxkXG5cdFx0XHRzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCl7XG5cdFx0XHRcdC8vIGdldCB0aGUgaW1hZ2UgdGl0bGUgYXR0cmlidXRlXG5cdFx0XHRcdHZhciB0aXRsZSA9ICQodGhpcykuZmluZCgnaW1nOmZpcnN0JykuYXR0cigndGl0bGUnKTtcblx0XHRcdFx0Ly8gYXBwZW5kIHRoZSBjYXB0aW9uXG5cdFx0XHRcdGlmICh0aXRsZSAhPSB1bmRlZmluZWQgJiYgKCcnICsgdGl0bGUpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJ4LWNhcHRpb25cIj48c3Bhbj4nICsgdGl0bGUgKyAnPC9zcGFuPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENsaWNrIG5leHQgYmluZGluZ1xuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGUgKGV2ZW50KVxuXHRcdCAqICAtIERPTSBldmVudCBvYmplY3Rcblx0XHQgKi9cblx0XHR2YXIgY2xpY2tOZXh0QmluZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0Ly8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXRcblx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0bykgZWwuc3RvcEF1dG8oKTtcblx0XHRcdGVsLmdvVG9OZXh0U2xpZGUoKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDbGljayBwcmV2IGJpbmRpbmdcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBlIChldmVudClcblx0XHQgKiAgLSBET00gZXZlbnQgb2JqZWN0XG5cdFx0ICovXG5cdFx0dmFyIGNsaWNrUHJldkJpbmQgPSBmdW5jdGlvbihlKXtcblx0XHRcdC8vIGlmIGF1dG8gc2hvdyBpcyBydW5uaW5nLCBzdG9wIGl0XG5cdFx0XHRpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8pIGVsLnN0b3BBdXRvKCk7XG5cdFx0XHRlbC5nb1RvUHJldlNsaWRlKCk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2xpY2sgc3RhcnQgYmluZGluZ1xuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGUgKGV2ZW50KVxuXHRcdCAqICAtIERPTSBldmVudCBvYmplY3Rcblx0XHQgKi9cblx0XHR2YXIgY2xpY2tTdGFydEJpbmQgPSBmdW5jdGlvbihlKXtcblx0XHRcdGVsLnN0YXJ0QXV0bygpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENsaWNrIHN0b3AgYmluZGluZ1xuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGUgKGV2ZW50KVxuXHRcdCAqICAtIERPTSBldmVudCBvYmplY3Rcblx0XHQgKi9cblx0XHR2YXIgY2xpY2tTdG9wQmluZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZWwuc3RvcEF1dG8oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDbGljayBwYWdlciBiaW5kaW5nXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gZSAoZXZlbnQpXG5cdFx0ICogIC0gRE9NIGV2ZW50IG9iamVjdFxuXHRcdCAqL1xuXHRcdHZhciBjbGlja1BhZ2VyQmluZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0Ly8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXRcblx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0bykgZWwuc3RvcEF1dG8oKTtcblx0XHRcdHZhciBwYWdlckxpbmsgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cdFx0XHRpZihwYWdlckxpbmsuYXR0cignZGF0YS1zbGlkZS1pbmRleCcpICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0XHR2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHBhZ2VyTGluay5hdHRyKCdkYXRhLXNsaWRlLWluZGV4JykpO1xuXHRcdFx0XHQvLyBpZiBjbGlja2VkIHBhZ2VyIGxpbmsgaXMgbm90IGFjdGl2ZSwgY29udGludWUgd2l0aCB0aGUgZ29Ub1NsaWRlIGNhbGxcblx0XHRcdFx0aWYocGFnZXJJbmRleCAhPSBzbGlkZXIuYWN0aXZlLmluZGV4KSBlbC5nb1RvU2xpZGUocGFnZXJJbmRleCk7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGVzIHRoZSBwYWdlciBsaW5rcyB3aXRoIGFuIGFjdGl2ZSBjbGFzc1xuXHRcdCAqXG5cdFx0ICogQHBhcmFtIHNsaWRlSW5kZXggKGludClcblx0XHQgKiAgLSBpbmRleCBvZiBzbGlkZSB0byBtYWtlIGFjdGl2ZVxuXHRcdCAqL1xuXHRcdHZhciB1cGRhdGVQYWdlckFjdGl2ZSA9IGZ1bmN0aW9uKHNsaWRlSW5kZXgpe1xuXHRcdFx0Ly8gaWYgXCJzaG9ydFwiIHBhZ2VyIHR5cGVcblx0XHRcdHZhciBsZW4gPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyAvLyBuYiBvZiBjaGlsZHJlblxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLnBhZ2VyVHlwZSA9PSAnc2hvcnQnKXtcblx0XHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEpIHtcblx0XHRcdFx0XHRsZW4gPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aC9zbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzbGlkZXIucGFnZXJFbC5odG1sKCAoc2xpZGVJbmRleCArIDEpICsgc2xpZGVyLnNldHRpbmdzLnBhZ2VyU2hvcnRTZXBhcmF0b3IgKyBsZW4pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyByZW1vdmUgYWxsIHBhZ2VyIGFjdGl2ZSBjbGFzc2VzXG5cdFx0XHRzbGlkZXIucGFnZXJFbC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0Ly8gYXBwbHkgdGhlIGFjdGl2ZSBjbGFzcyBmb3IgYWxsIHBhZ2Vyc1xuXHRcdFx0c2xpZGVyLnBhZ2VyRWwuZWFjaChmdW5jdGlvbihpLCBlbCkgeyAkKGVsKS5maW5kKCdhJykuZXEoc2xpZGVJbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOyB9KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBQZXJmb3JtcyBuZWVkZWQgYWN0aW9ucyBhZnRlciBhIHNsaWRlIHRyYW5zaXRpb25cblx0XHQgKi9cblx0XHR2YXIgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly8gaWYgaW5maW50ZSBsb29wIGlzIHRydWVcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3Ape1xuXHRcdFx0XHR2YXIgcG9zaXRpb24gPSAnJztcblx0XHRcdFx0Ly8gZmlyc3Qgc2xpZGVcblx0XHRcdFx0aWYoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSAwKXtcblx0XHRcdFx0XHQvLyBzZXQgdGhlIG5ldyBwb3NpdGlvblxuXHRcdFx0XHRcdHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKDApLnBvc2l0aW9uKCk7XG5cdFx0XHRcdC8vIGNhcm91c2VsLCBsYXN0IHNsaWRlXG5cdFx0XHRcdH1lbHNlIGlmKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gZ2V0UGFnZXJRdHkoKSAtIDEgJiYgc2xpZGVyLmNhcm91c2VsKXtcblx0XHRcdFx0XHRwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7XG5cdFx0XHRcdC8vIGxhc3Qgc2xpZGVcblx0XHRcdFx0fWVsc2UgaWYoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSl7XG5cdFx0XHRcdFx0cG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEpLnBvc2l0aW9uKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYocG9zaXRpb24pe1xuXHRcdFx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpIHsgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24ubGVmdCwgJ3Jlc2V0JywgMCk7IH1cblx0XHRcdFx0XHRlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7IH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gZGVjbGFyZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlXG5cdFx0XHRzbGlkZXIud29ya2luZyA9IGZhbHNlO1xuXHRcdFx0Ly8gb25TbGlkZUFmdGVyIGNhbGxiYWNrXG5cdFx0XHRzbGlkZXIuc2V0dGluZ3Mub25TbGlkZUFmdGVyKHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGVzIHRoZSBhdXRvIGNvbnRyb2xzIHN0YXRlIChlaXRoZXIgYWN0aXZlLCBvciBjb21iaW5lZCBzd2l0Y2gpXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gc3RhdGUgKHN0cmluZykgXCJzdGFydFwiLCBcInN0b3BcIlxuXHRcdCAqICAtIHRoZSBuZXcgc3RhdGUgb2YgdGhlIGF1dG8gc2hvd1xuXHRcdCAqL1xuXHRcdHZhciB1cGRhdGVBdXRvQ29udHJvbHMgPSBmdW5jdGlvbihzdGF0ZSl7XG5cdFx0XHQvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lIGlzIHRydWUsIHJlcGxhY2UgdGhlIGN1cnJlbnQgY29udHJvbCB3aXRoIHRoZSBuZXcgc3RhdGVcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNDb21iaW5lKXtcblx0XHRcdFx0c2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5odG1sKHNsaWRlci5jb250cm9sc1tzdGF0ZV0pO1xuXHRcdFx0Ly8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyBmYWxzZSwgYXBwbHkgdGhlIFwiYWN0aXZlXCIgY2xhc3MgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbnRyb2xcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRzbGlkZXIuY29udHJvbHMuYXV0b0VsLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdHNsaWRlci5jb250cm9scy5hdXRvRWwuZmluZCgnYTpub3QoLmJ4LScgKyBzdGF0ZSArICcpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiBjb250cm9scyAoY2hlY2tzIGlmIGVpdGhlciBzaG91bGQgYmUgaGlkZGVuKVxuXHRcdCAqL1xuXHRcdHZhciB1cGRhdGVEaXJlY3Rpb25Db250cm9scyA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRpZihnZXRQYWdlclF0eSgpID09IDEpe1xuXHRcdFx0XHRzbGlkZXIuY29udHJvbHMucHJldi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0c2xpZGVyLmNvbnRyb2xzLm5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9ZWxzZSBpZighc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuc2V0dGluZ3MuaGlkZUNvbnRyb2xPbkVuZCl7XG5cdFx0XHRcdC8vIGlmIGZpcnN0IHNsaWRlXG5cdFx0XHRcdGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09IDApe1xuXHRcdFx0XHRcdHNsaWRlci5jb250cm9scy5wcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdHNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHQvLyBpZiBsYXN0IHNsaWRlXG5cdFx0XHRcdH1lbHNlIGlmKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gZ2V0UGFnZXJRdHkoKSAtIDEpe1xuXHRcdFx0XHRcdHNsaWRlci5jb250cm9scy5uZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRcdHNsaWRlci5jb250cm9scy5wcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHQvLyBpZiBhbnkgc2xpZGUgaW4gdGhlIG1pZGRsZVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWx6ZXMgdGhlIGF1dG8gcHJvY2Vzc1xuXHRcdCAqL1xuXHRcdHZhciBpbml0QXV0byA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQvLyBpZiBhdXRvRGVsYXkgd2FzIHN1cHBsaWVkLCBsYXVuY2ggdGhlIGF1dG8gc2hvdyB1c2luZyBhIHNldFRpbWVvdXQoKSBjYWxsXG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MuYXV0b0RlbGF5ID4gMCl7XG5cdFx0XHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChlbC5zdGFydEF1dG8sIHNsaWRlci5zZXR0aW5ncy5hdXRvRGVsYXkpO1xuXHRcdFx0Ly8gaWYgYXV0b0RlbGF5IHdhcyBub3Qgc3VwcGxpZWQsIHN0YXJ0IHRoZSBhdXRvIHNob3cgbm9ybWFsbHlcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRlbC5zdGFydEF1dG8oKTtcblx0XHRcdH1cblx0XHRcdC8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWRcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5hdXRvSG92ZXIpe1xuXHRcdFx0XHQvLyBvbiBlbCBob3ZlclxuXHRcdFx0XHRlbC5ob3ZlcihmdW5jdGlvbigpe1xuXHRcdFx0XHRcdC8vIGlmIHRoZSBhdXRvIHNob3cgaXMgY3VycmVudGx5IHBsYXlpbmcgKGhhcyBhbiBhY3RpdmUgaW50ZXJ2YWwpXG5cdFx0XHRcdFx0aWYoc2xpZGVyLmludGVydmFsKXtcblx0XHRcdFx0XHRcdC8vIHN0b3AgdGhlIGF1dG8gc2hvdyBhbmQgcGFzcyB0cnVlIGFndW1lbnQgd2hpY2ggd2lsbCBwcmV2ZW50IGNvbnRyb2wgdXBkYXRlXG5cdFx0XHRcdFx0XHRlbC5zdG9wQXV0byh0cnVlKTtcblx0XHRcdFx0XHRcdC8vIGNyZWF0ZSBhIG5ldyBhdXRvUGF1c2VkIHZhbHVlIHdoaWNoIHdpbGwgYmUgdXNlZCBieSB0aGUgcmVsYXRpdmUgXCJtb3VzZW91dFwiIGV2ZW50XG5cdFx0XHRcdFx0XHRzbGlkZXIuYXV0b1BhdXNlZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdC8vIGlmIHRoZSBhdXRvUGF1c2VkIHZhbHVlIHdhcyBjcmVhdGVkIGJlIHRoZSBwcmlvciBcIm1vdXNlb3ZlclwiIGV2ZW50XG5cdFx0XHRcdFx0aWYoc2xpZGVyLmF1dG9QYXVzZWQpe1xuXHRcdFx0XHRcdFx0Ly8gc3RhcnQgdGhlIGF1dG8gc2hvdyBhbmQgcGFzcyB0cnVlIGFndW1lbnQgd2hpY2ggd2lsbCBwcmV2ZW50IGNvbnRyb2wgdXBkYXRlXG5cdFx0XHRcdFx0XHRlbC5zdGFydEF1dG8odHJ1ZSk7XG5cdFx0XHRcdFx0XHQvLyByZXNldCB0aGUgYXV0b1BhdXNlZCB2YWx1ZVxuXHRcdFx0XHRcdFx0c2xpZGVyLmF1dG9QYXVzZWQgPSBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogSW5pdGlhbHplcyB0aGUgdGlja2VyIHByb2Nlc3Ncblx0XHQgKi9cblx0XHR2YXIgaW5pdFRpY2tlciA9IGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc3RhcnRQb3NpdGlvbiA9IDA7XG5cdFx0XHQvLyBpZiBhdXRvRGlyZWN0aW9uIGlzIFwibmV4dFwiLCBhcHBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlclxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT0gJ25leHQnKXtcblx0XHRcdFx0ZWwuYXBwZW5kKHNsaWRlci5jaGlsZHJlbi5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpKTtcblx0XHRcdC8vIGlmIGF1dG9EaXJlY3Rpb24gaXMgXCJwcmV2XCIsIHByZXBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlciwgYW5kIHNldCB0aGUgbGVmdCBwb3NpdGlvblxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdGVsLnByZXBlbmQoc2xpZGVyLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoJ2J4LWNsb25lJykpO1xuXHRcdFx0XHR2YXIgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZmlyc3QoKS5wb3NpdGlvbigpO1xuXHRcdFx0XHRzdGFydFBvc2l0aW9uID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gLXBvc2l0aW9uLmxlZnQgOiAtcG9zaXRpb24udG9wO1xuXHRcdFx0fVxuXHRcdFx0c2V0UG9zaXRpb25Qcm9wZXJ0eShzdGFydFBvc2l0aW9uLCAncmVzZXQnLCAwKTtcblx0XHRcdC8vIGRvIG5vdCBhbGxvdyBjb250cm9scyBpbiB0aWNrZXIgbW9kZVxuXHRcdFx0c2xpZGVyLnNldHRpbmdzLnBhZ2VyID0gZmFsc2U7XG5cdFx0XHRzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgPSBmYWxzZTtcblx0XHRcdHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMgPSBmYWxzZTtcblx0XHRcdC8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWRcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy50aWNrZXJIb3ZlciAmJiAhc2xpZGVyLnVzaW5nQ1NTKXtcblx0XHRcdFx0Ly8gb24gZWwgaG92ZXJcblx0XHRcdFx0c2xpZGVyLnZpZXdwb3J0LmhvdmVyKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0ZWwuc3RvcCgpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdC8vIGNhbGN1bGF0ZSB0aGUgdG90YWwgd2lkdGggb2YgY2hpbGRyZW4gKHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbylcblx0XHRcdFx0XHR2YXIgdG90YWxEaW1lbnMgPSAwO1xuXHRcdFx0XHRcdHNsaWRlci5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcblx0XHRcdFx0XHQgIHRvdGFsRGltZW5zICs9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/ICQodGhpcykub3V0ZXJXaWR0aCh0cnVlKSA6ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbyAodXNlZCB0byBkZXRlcm1pbmUgdGhlIG5ldyBzcGVlZCB0byBmaW5pc2ggdGhlIHBhdXNlZCBhbmltYXRpb24pXG5cdFx0XHRcdFx0dmFyIHJhdGlvID0gc2xpZGVyLnNldHRpbmdzLnNwZWVkIC8gdG90YWxEaW1lbnM7XG5cdFx0XHRcdFx0Ly8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZVxuXHRcdFx0XHRcdHZhciBwcm9wZXJ0eSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICd0b3AnO1xuXHRcdFx0XHRcdC8vIGNhbGN1bGF0ZSB0aGUgbmV3IHNwZWVkXG5cdFx0XHRcdFx0dmFyIG5ld1NwZWVkID0gcmF0aW8gKiAodG90YWxEaW1lbnMgLSAoTWF0aC5hYnMocGFyc2VJbnQoZWwuY3NzKHByb3BlcnR5KSkpKSk7XG5cdFx0XHRcdFx0dGlja2VyTG9vcChuZXdTcGVlZCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gc3RhcnQgdGhlIHRpY2tlciBsb29wXG5cdFx0XHR0aWNrZXJMb29wKCk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUnVucyBhIGNvbnRpbnVvdXMgbG9vcCwgbmV3cyB0aWNrZXItc3R5bGVcblx0XHQgKi9cblx0XHR2YXIgdGlja2VyTG9vcCA9IGZ1bmN0aW9uKHJlc3VtZVNwZWVkKXtcblx0XHRcdHNwZWVkID0gcmVzdW1lU3BlZWQgPyByZXN1bWVTcGVlZCA6IHNsaWRlci5zZXR0aW5ncy5zcGVlZDtcblx0XHRcdHZhciBwb3NpdGlvbiA9IHtsZWZ0OiAwLCB0b3A6IDB9O1xuXHRcdFx0dmFyIHJlc2V0ID0ge2xlZnQ6IDAsIHRvcDogMH07XG5cdFx0XHQvLyBpZiBcIm5leHRcIiBhbmltYXRlIGxlZnQgcG9zaXRpb24gdG8gbGFzdCBjaGlsZCwgdGhlbiByZXNldCBsZWZ0IHRvIDBcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5hdXRvRGlyZWN0aW9uID09ICduZXh0Jyl7XG5cdFx0XHRcdHBvc2l0aW9uID0gZWwuZmluZCgnLmJ4LWNsb25lJykuZmlyc3QoKS5wb3NpdGlvbigpO1xuXHRcdFx0Ly8gaWYgXCJwcmV2XCIgYW5pbWF0ZSBsZWZ0IHBvc2l0aW9uIHRvIDAsIHRoZW4gcmVzZXQgbGVmdCB0byBmaXJzdCBub24tY2xvbmUgY2hpbGRcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRyZXNldCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgYW5pbWF0ZVByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gLXBvc2l0aW9uLmxlZnQgOiAtcG9zaXRpb24udG9wO1xuXHRcdFx0dmFyIHJlc2V0VmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAtcmVzZXQubGVmdCA6IC1yZXNldC50b3A7XG5cdFx0XHR2YXIgcGFyYW1zID0ge3Jlc2V0VmFsdWU6IHJlc2V0VmFsdWV9O1xuXHRcdFx0c2V0UG9zaXRpb25Qcm9wZXJ0eShhbmltYXRlUHJvcGVydHksICd0aWNrZXInLCBzcGVlZCwgcGFyYW1zKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplcyB0b3VjaCBldmVudHNcblx0XHQgKi9cblx0XHR2YXIgaW5pdFRvdWNoID0gZnVuY3Rpb24oKXtcblx0XHRcdC8vIGluaXRpYWxpemUgb2JqZWN0IHRvIGNvbnRhaW4gYWxsIHRvdWNoIHZhbHVlc1xuXHRcdFx0c2xpZGVyLnRvdWNoID0ge1xuXHRcdFx0XHRzdGFydDoge3g6IDAsIHk6IDB9LFxuXHRcdFx0XHRlbmQ6IHt4OiAwLCB5OiAwfVxuXHRcdFx0fVxuXHRcdFx0c2xpZGVyLnZpZXdwb3J0LmJpbmQoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2hzdGFydFwiXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gZSAoZXZlbnQpXG5cdFx0ICogIC0gRE9NIGV2ZW50IG9iamVjdFxuXHRcdCAqL1xuXHRcdHZhciBvblRvdWNoU3RhcnQgPSBmdW5jdGlvbihlKXtcblx0XHRcdGlmKHNsaWRlci53b3JraW5nKXtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgb3JpZ2luYWwgcG9zaXRpb24gd2hlbiB0b3VjaCBzdGFydHNcblx0XHRcdFx0c2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zID0gZWwucG9zaXRpb24oKTtcblx0XHRcdFx0dmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgc3RhcnRpbmcgdG91Y2ggeCwgeSBjb29yZGluYXRlc1xuXHRcdFx0XHRzbGlkZXIudG91Y2guc3RhcnQueCA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG5cdFx0XHRcdHNsaWRlci50b3VjaC5zdGFydC55ID0gb3JpZy5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcblx0XHRcdFx0Ly8gYmluZCBhIFwidG91Y2htb3ZlXCIgZXZlbnQgdG8gdGhlIHZpZXdwb3J0XG5cdFx0XHRcdHNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7XG5cdFx0XHRcdC8vIGJpbmQgYSBcInRvdWNoZW5kXCIgZXZlbnQgdG8gdGhlIHZpZXdwb3J0XG5cdFx0XHRcdHNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2htb3ZlXCJcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBlIChldmVudClcblx0XHQgKiAgLSBET00gZXZlbnQgb2JqZWN0XG5cdFx0ICovXG5cdFx0dmFyIG9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZSl7XG5cdFx0XHR2YXIgb3JpZyA9IGUub3JpZ2luYWxFdmVudDtcblx0XHRcdC8vIGlmIHNjcm9sbGluZyBvbiB5IGF4aXMsIGRvIG5vdCBwcmV2ZW50IGRlZmF1bHRcblx0XHRcdHZhciB4TW92ZW1lbnQgPSBNYXRoLmFicyhvcmlnLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYIC0gc2xpZGVyLnRvdWNoLnN0YXJ0LngpO1xuXHRcdFx0dmFyIHlNb3ZlbWVudCA9IE1hdGguYWJzKG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueSk7XG5cdFx0XHQvLyB4IGF4aXMgc3dpcGVcblx0XHRcdGlmKCh4TW92ZW1lbnQgKiAzKSA+IHlNb3ZlbWVudCAmJiBzbGlkZXIuc2V0dGluZ3MucHJldmVudERlZmF1bHRTd2lwZVgpe1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHQvLyB5IGF4aXMgc3dpcGVcblx0XHRcdH1lbHNlIGlmKCh5TW92ZW1lbnQgKiAzKSA+IHhNb3ZlbWVudCAmJiBzbGlkZXIuc2V0dGluZ3MucHJldmVudERlZmF1bHRTd2lwZVkpe1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MubW9kZSAhPSAnZmFkZScgJiYgc2xpZGVyLnNldHRpbmdzLm9uZVRvT25lVG91Y2gpe1xuXHRcdFx0XHR2YXIgdmFsdWUgPSAwO1xuXHRcdFx0XHQvLyBpZiBob3Jpem9udGFsLCBkcmFnIGFsb25nIHggYXhpc1xuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpe1xuXHRcdFx0XHRcdHZhciBjaGFuZ2UgPSBvcmlnLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYIC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lng7XG5cdFx0XHRcdFx0dmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MubGVmdCArIGNoYW5nZTtcblx0XHRcdFx0Ly8gaWYgdmVydGljYWwsIGRyYWcgYWxvbmcgeSBheGlzXG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdHZhciBjaGFuZ2UgPSBvcmlnLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZIC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lnk7XG5cdFx0XHRcdFx0dmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wICsgY2hhbmdlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2hlbmRcIlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGUgKGV2ZW50KVxuXHRcdCAqICAtIERPTSBldmVudCBvYmplY3Rcblx0XHQgKi9cblx0XHR2YXIgb25Ub3VjaEVuZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0c2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpO1xuXHRcdFx0dmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQ7XG5cdFx0XHR2YXIgdmFsdWUgPSAwO1xuXHRcdFx0Ly8gcmVjb3JkIGVuZCB4LCB5IHBvc2l0aW9uc1xuXHRcdFx0c2xpZGVyLnRvdWNoLmVuZC54ID0gb3JpZy5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcblx0XHRcdHNsaWRlci50b3VjaC5lbmQueSA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG5cdFx0XHQvLyBpZiBmYWRlIG1vZGUsIGNoZWNrIGlmIGFic29sdXRlIHggZGlzdGFuY2UgY2xlYXJzIHRoZSB0aHJlc2hvbGRcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdmYWRlJyl7XG5cdFx0XHRcdHZhciBkaXN0YW5jZSA9IE1hdGguYWJzKHNsaWRlci50b3VjaC5zdGFydC54IC0gc2xpZGVyLnRvdWNoLmVuZC54KTtcblx0XHRcdFx0aWYoZGlzdGFuY2UgPj0gc2xpZGVyLnNldHRpbmdzLnN3aXBlVGhyZXNob2xkKXtcblx0XHRcdFx0XHRzbGlkZXIudG91Y2guc3RhcnQueCA+IHNsaWRlci50b3VjaC5lbmQueCA/IGVsLmdvVG9OZXh0U2xpZGUoKSA6IGVsLmdvVG9QcmV2U2xpZGUoKTtcblx0XHRcdFx0XHRlbC5zdG9wQXV0bygpO1xuXHRcdFx0XHR9XG5cdFx0XHQvLyBub3QgZmFkZSBtb2RlXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0dmFyIGRpc3RhbmNlID0gMDtcblx0XHRcdFx0Ly8gY2FsY3VsYXRlIGRpc3RhbmNlIGFuZCBlbCdzIGFuaW1hdGUgcHJvcGVydHlcblx0XHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKXtcblx0XHRcdFx0XHRkaXN0YW5jZSA9IHNsaWRlci50b3VjaC5lbmQueCAtIHNsaWRlci50b3VjaC5zdGFydC54O1xuXHRcdFx0XHRcdHZhbHVlID0gc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLmxlZnQ7XG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdGRpc3RhbmNlID0gc2xpZGVyLnRvdWNoLmVuZC55IC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lnk7XG5cdFx0XHRcdFx0dmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGlmIG5vdCBpbmZpbml0ZSBsb29wIGFuZCBmaXJzdCAvIGxhc3Qgc2xpZGUsIGRvIG5vdCBhdHRlbXB0IGEgc2xpZGUgdHJhbnNpdGlvblxuXHRcdFx0XHRpZighc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiAoKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gMCAmJiBkaXN0YW5jZSA+IDApIHx8IChzbGlkZXIuYWN0aXZlLmxhc3QgJiYgZGlzdGFuY2UgPCAwKSkpe1xuXHRcdFx0XHRcdHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDIwMCk7XG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdC8vIGNoZWNrIGlmIGRpc3RhbmNlIGNsZWFycyB0aHJlc2hvbGRcblx0XHRcdFx0XHRpZihNYXRoLmFicyhkaXN0YW5jZSkgPj0gc2xpZGVyLnNldHRpbmdzLnN3aXBlVGhyZXNob2xkKXtcblx0XHRcdFx0XHRcdGRpc3RhbmNlIDwgMCA/IGVsLmdvVG9OZXh0U2xpZGUoKSA6IGVsLmdvVG9QcmV2U2xpZGUoKTtcblx0XHRcdFx0XHRcdGVsLnN0b3BBdXRvKCk7XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHQvLyBlbC5hbmltYXRlKHByb3BlcnR5LCAyMDApO1xuXHRcdFx0XHRcdFx0c2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3Jlc2V0JywgMjAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHNsaWRlci52aWV3cG9ydC51bmJpbmQoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogV2luZG93IHJlc2l6ZSBldmVudCBjYWxsYmFja1xuXHRcdCAqL1xuXHRcdHZhciByZXNpemVXaW5kb3cgPSBmdW5jdGlvbihlKXtcblx0XHRcdC8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHNsaWRlciBpc24ndCBpbml0aWFsaXplZC5cblx0XHRcdGlmKCFzbGlkZXIuaW5pdGlhbGl6ZWQpIHJldHVybjtcblx0XHRcdC8vIGdldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnMgKGFnYWluLCB0aGFuayB5b3UgSUUpXG5cdFx0XHR2YXIgd2luZG93V2lkdGhOZXcgPSAkKHdpbmRvdykud2lkdGgoKTtcblx0XHRcdHZhciB3aW5kb3dIZWlnaHROZXcgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCBpdCBpcyBhIHRydWUgd2luZG93IHJlc2l6ZVxuXHRcdFx0Ly8gKndlIG11c3QgY2hlY2sgdGhpcyBiZWNhdXNlIG91ciBkaW5vc2F1ciBmcmllbmQgSUUgZmlyZXMgYSB3aW5kb3cgcmVzaXplIGV2ZW50IHdoZW4gY2VydGFpbiBET00gZWxlbWVudHNcblx0XHRcdC8vIGFyZSByZXNpemVkLiBDYW4geW91IGp1c3QgZGllIGFscmVhZHk/KlxuXHRcdFx0aWYod2luZG93V2lkdGggIT0gd2luZG93V2lkdGhOZXcgfHwgd2luZG93SGVpZ2h0ICE9IHdpbmRvd0hlaWdodE5ldyl7XG5cdFx0XHRcdC8vIHNldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnNcblx0XHRcdFx0d2luZG93V2lkdGggPSB3aW5kb3dXaWR0aE5ldztcblx0XHRcdFx0d2luZG93SGVpZ2h0ID0gd2luZG93SGVpZ2h0TmV3O1xuXHRcdFx0XHQvLyB1cGRhdGUgYWxsIGR5bmFtaWMgZWxlbWVudHNcblx0XHRcdFx0ZWwucmVkcmF3U2xpZGVyKCk7XG5cdFx0XHRcdC8vIENhbGwgdXNlciByZXNpemUgaGFuZGxlclxuXHRcdFx0XHRzbGlkZXIuc2V0dGluZ3Mub25TbGlkZXJSZXNpemUuY2FsbChlbCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQgKiA9IFBVQkxJQyBGVU5DVElPTlNcblx0XHQgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdCAqL1xuXG5cdFx0LyoqXG5cdFx0ICogUGVyZm9ybXMgc2xpZGUgdHJhbnNpdGlvbiB0byB0aGUgc3BlY2lmaWVkIHNsaWRlXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gc2xpZGVJbmRleCAoaW50KVxuXHRcdCAqICAtIHRoZSBkZXN0aW5hdGlvbiBzbGlkZSdzIGluZGV4ICh6ZXJvLWJhc2VkKVxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIGRpcmVjdGlvbiAoc3RyaW5nKVxuXHRcdCAqICAtIElOVEVSTkFMIFVTRSBPTkxZIC0gdGhlIGRpcmVjdGlvbiBvZiB0cmF2ZWwgKFwicHJldlwiIC8gXCJuZXh0XCIpXG5cdFx0ICovXG5cdFx0ZWwuZ29Ub1NsaWRlID0gZnVuY3Rpb24oc2xpZGVJbmRleCwgZGlyZWN0aW9uKXtcblx0XHRcdC8vIGlmIHBsdWdpbiBpcyBjdXJyZW50bHkgaW4gbW90aW9uLCBpZ25vcmUgcmVxdWVzdFxuXHRcdFx0aWYoc2xpZGVyLndvcmtpbmcgfHwgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSBzbGlkZUluZGV4KSByZXR1cm47XG5cdFx0XHQvLyBkZWNsYXJlIHRoYXQgcGx1Z2luIGlzIGluIG1vdGlvblxuXHRcdFx0c2xpZGVyLndvcmtpbmcgPSB0cnVlO1xuXHRcdFx0Ly8gc3RvcmUgdGhlIG9sZCBpbmRleFxuXHRcdFx0c2xpZGVyLm9sZEluZGV4ID0gc2xpZGVyLmFjdGl2ZS5pbmRleDtcblx0XHRcdC8vIGlmIHNsaWRlSW5kZXggaXMgbGVzcyB0aGFuIHplcm8sIHNldCBhY3RpdmUgaW5kZXggdG8gbGFzdCBjaGlsZCAodGhpcyBoYXBwZW5zIGR1cmluZyBpbmZpbml0ZSBsb29wKVxuXHRcdFx0aWYoc2xpZGVJbmRleCA8IDApe1xuXHRcdFx0XHRzbGlkZXIuYWN0aXZlLmluZGV4ID0gZ2V0UGFnZXJRdHkoKSAtIDE7XG5cdFx0XHQvLyBpZiBzbGlkZUluZGV4IGlzIGdyZWF0ZXIgdGhhbiBjaGlsZHJlbiBsZW5ndGgsIHNldCBhY3RpdmUgaW5kZXggdG8gMCAodGhpcyBoYXBwZW5zIGR1cmluZyBpbmZpbml0ZSBsb29wKVxuXHRcdFx0fWVsc2UgaWYoc2xpZGVJbmRleCA+PSBnZXRQYWdlclF0eSgpKXtcblx0XHRcdFx0c2xpZGVyLmFjdGl2ZS5pbmRleCA9IDA7XG5cdFx0XHQvLyBzZXQgYWN0aXZlIGluZGV4IHRvIHJlcXVlc3RlZCBzbGlkZVxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdHNsaWRlci5hY3RpdmUuaW5kZXggPSBzbGlkZUluZGV4O1xuXHRcdFx0fVxuXHRcdFx0Ly8gb25TbGlkZUJlZm9yZSwgb25TbGlkZU5leHQsIG9uU2xpZGVQcmV2IGNhbGxiYWNrc1xuXHRcdFx0c2xpZGVyLnNldHRpbmdzLm9uU2xpZGVCZWZvcmUoc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuXHRcdFx0aWYoZGlyZWN0aW9uID09ICduZXh0Jyl7XG5cdFx0XHRcdHNsaWRlci5zZXR0aW5ncy5vblNsaWRlTmV4dChzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG5cdFx0XHR9ZWxzZSBpZihkaXJlY3Rpb24gPT0gJ3ByZXYnKXtcblx0XHRcdFx0c2xpZGVyLnNldHRpbmdzLm9uU2xpZGVQcmV2KHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcblx0XHRcdH1cblx0XHRcdC8vIGNoZWNrIGlmIGxhc3Qgc2xpZGVcblx0XHRcdHNsaWRlci5hY3RpdmUubGFzdCA9IHNsaWRlci5hY3RpdmUuaW5kZXggPj0gZ2V0UGFnZXJRdHkoKSAtIDE7XG5cdFx0XHQvLyB1cGRhdGUgdGhlIHBhZ2VyIHdpdGggYWN0aXZlIGNsYXNzXG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuXHRcdFx0Ly8gLy8gY2hlY2sgZm9yIGRpcmVjdGlvbiBjb250cm9sIHVwZGF0ZVxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpO1xuXHRcdFx0Ly8gaWYgc2xpZGVyIGlzIHNldCB0byBtb2RlOiBcImZhZGVcIlxuXHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2ZhZGUnKXtcblx0XHRcdFx0Ly8gaWYgYWRhcHRpdmVIZWlnaHQgaXMgdHJ1ZSBhbmQgbmV4dCBoZWlnaHQgaXMgZGlmZmVyZW50IGZyb20gY3VycmVudCBoZWlnaHQsIGFuaW1hdGUgdG8gdGhlIG5ldyBoZWlnaHRcblx0XHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0ICYmIHNsaWRlci52aWV3cG9ydC5oZWlnaHQoKSAhPSBnZXRWaWV3cG9ydEhlaWdodCgpKXtcblx0XHRcdFx0XHRzbGlkZXIudmlld3BvcnQuYW5pbWF0ZSh7aGVpZ2h0OiBnZXRWaWV3cG9ydEhlaWdodCgpfSwgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0U3BlZWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGZhZGUgb3V0IHRoZSB2aXNpYmxlIGNoaWxkIGFuZCByZXNldCBpdHMgei1pbmRleCB2YWx1ZVxuXHRcdFx0XHRzbGlkZXIuY2hpbGRyZW4uZmlsdGVyKCc6dmlzaWJsZScpLmZhZGVPdXQoc2xpZGVyLnNldHRpbmdzLnNwZWVkKS5jc3Moe3pJbmRleDogMH0pO1xuXHRcdFx0XHQvLyBmYWRlIGluIHRoZSBuZXdseSByZXF1ZXN0ZWQgc2xpZGVcblx0XHRcdFx0c2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLmNzcygnekluZGV4Jywgc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4KzEpLmZhZGVJbihzbGlkZXIuc2V0dGluZ3Muc3BlZWQsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JCh0aGlzKS5jc3MoJ3pJbmRleCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZVpJbmRleCk7XG5cdFx0XHRcdFx0dXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcblx0XHRcdFx0fSk7XG5cdFx0XHQvLyBzbGlkZXIgbW9kZSBpcyBub3QgXCJmYWRlXCJcblx0XHRcdH1lbHNle1xuXHRcdFx0XHQvLyBpZiBhZGFwdGl2ZUhlaWdodCBpcyB0cnVlIGFuZCBuZXh0IGhlaWdodCBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGhlaWdodCwgYW5pbWF0ZSB0byB0aGUgbmV3IGhlaWdodFxuXHRcdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgJiYgc2xpZGVyLnZpZXdwb3J0LmhlaWdodCgpICE9IGdldFZpZXdwb3J0SGVpZ2h0KCkpe1xuXHRcdFx0XHRcdHNsaWRlci52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6IGdldFZpZXdwb3J0SGVpZ2h0KCl9LCBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHRTcGVlZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIG1vdmVCeSA9IDA7XG5cdFx0XHRcdHZhciBwb3NpdGlvbiA9IHtsZWZ0OiAwLCB0b3A6IDB9O1xuXHRcdFx0XHQvLyBpZiBjYXJvdXNlbCBhbmQgbm90IGluZmluaXRlIGxvb3Bcblx0XHRcdFx0aWYoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmNhcm91c2VsICYmIHNsaWRlci5hY3RpdmUubGFzdCl7XG5cdFx0XHRcdFx0aWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKXtcblx0XHRcdFx0XHRcdC8vIGdldCB0aGUgbGFzdCBjaGlsZCBwb3NpdGlvblxuXHRcdFx0XHRcdFx0dmFyIGxhc3RDaGlsZCA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSk7XG5cdFx0XHRcdFx0XHRwb3NpdGlvbiA9IGxhc3RDaGlsZC5wb3NpdGlvbigpO1xuXHRcdFx0XHRcdFx0Ly8gY2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBzbGlkZVxuXHRcdFx0XHRcdFx0bW92ZUJ5ID0gc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgLSBsYXN0Q2hpbGQub3V0ZXJXaWR0aCgpO1xuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0Ly8gZ2V0IGxhc3Qgc2hvd2luZyBpbmRleCBwb3NpdGlvblxuXHRcdFx0XHRcdFx0dmFyIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcblx0XHRcdFx0XHRcdHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKGxhc3RTaG93aW5nSW5kZXgpLnBvc2l0aW9uKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGhvcml6b250YWwgY2Fyb3VzZWwsIGdvaW5nIHByZXZpb3VzIHdoaWxlIG9uIGZpcnN0IHNsaWRlIChpbmZpbml0ZUxvb3AgbW9kZSlcblx0XHRcdFx0fWVsc2UgaWYoc2xpZGVyLmNhcm91c2VsICYmIHNsaWRlci5hY3RpdmUubGFzdCAmJiBkaXJlY3Rpb24gPT0gJ3ByZXYnKXtcblx0XHRcdFx0XHQvLyBnZXQgdGhlIGxhc3QgY2hpbGQgcG9zaXRpb25cblx0XHRcdFx0XHR2YXIgZXEgPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA9PSAxID8gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIGdldE1vdmVCeSgpIDogKChnZXRQYWdlclF0eSgpIC0gMSkgKiBnZXRNb3ZlQnkoKSkgLSAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMpO1xuXHRcdFx0XHRcdHZhciBsYXN0Q2hpbGQgPSBlbC5jaGlsZHJlbignLmJ4LWNsb25lJykuZXEoZXEpO1xuXHRcdFx0XHRcdHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XG5cdFx0XHRcdC8vIGlmIGluZmluaXRlIGxvb3AgYW5kIFwiTmV4dFwiIGlzIGNsaWNrZWQgb24gdGhlIGxhc3Qgc2xpZGVcblx0XHRcdFx0fWVsc2UgaWYoZGlyZWN0aW9uID09ICduZXh0JyAmJiBzbGlkZXIuYWN0aXZlLmluZGV4ID09IDApe1xuXHRcdFx0XHRcdC8vIGdldCB0aGUgbGFzdCBjbG9uZSBwb3NpdGlvblxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZWwuZmluZCgnPiAuYngtY2xvbmUnKS5lcShzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKS5wb3NpdGlvbigpO1xuXHRcdFx0XHRcdHNsaWRlci5hY3RpdmUubGFzdCA9IGZhbHNlO1xuXHRcdFx0XHQvLyBub3JtYWwgbm9uLXplcm8gcmVxdWVzdHNcblx0XHRcdFx0fWVsc2UgaWYoc2xpZGVJbmRleCA+PSAwKXtcblx0XHRcdFx0XHR2YXIgcmVxdWVzdEVsID0gc2xpZGVJbmRleCAqIGdldE1vdmVCeSgpO1xuXHRcdFx0XHRcdHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKHJlcXVlc3RFbCkucG9zaXRpb24oKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qIElmIHRoZSBwb3NpdGlvbiBkb2Vzbid0IGV4aXN0XG5cdFx0XHRcdCAqIChlLmcuIGlmIHlvdSBkZXN0cm95IHRoZSBzbGlkZXIgb24gYSBuZXh0IGNsaWNrKSxcblx0XHRcdFx0ICogaXQgZG9lc24ndCB0aHJvdyBhbiBlcnJvci5cblx0XHRcdFx0ICovXG5cdFx0XHRcdGlmIChcInVuZGVmaW5lZFwiICE9PSB0eXBlb2YocG9zaXRpb24pKSB7XG5cdFx0XHRcdFx0dmFyIHZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gLShwb3NpdGlvbi5sZWZ0IC0gbW92ZUJ5KSA6IC1wb3NpdGlvbi50b3A7XG5cdFx0XHRcdFx0Ly8gcGx1Z2luIHZhbHVlcyB0byBiZSBhbmltYXRlZFxuXHRcdFx0XHRcdHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdzbGlkZScsIHNsaWRlci5zZXR0aW5ncy5zcGVlZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUcmFuc2l0aW9ucyB0byB0aGUgbmV4dCBzbGlkZSBpbiB0aGUgc2hvd1xuXHRcdCAqL1xuXHRcdGVsLmdvVG9OZXh0U2xpZGUgPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly8gaWYgaW5maW5pdGVMb29wIGlzIGZhbHNlIGFuZCBsYXN0IHBhZ2UgaXMgc2hvd2luZywgZGlzcmVnYXJkIGNhbGxcblx0XHRcdGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuYWN0aXZlLmxhc3QpIHJldHVybjtcblx0XHRcdHZhciBwYWdlckluZGV4ID0gcGFyc2VJbnQoc2xpZGVyLmFjdGl2ZS5pbmRleCkgKyAxO1xuXHRcdFx0ZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgsICduZXh0Jyk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVHJhbnNpdGlvbnMgdG8gdGhlIHByZXYgc2xpZGUgaW4gdGhlIHNob3dcblx0XHQgKi9cblx0XHRlbC5nb1RvUHJldlNsaWRlID0gZnVuY3Rpb24oKXtcblx0XHRcdC8vIGlmIGluZmluaXRlTG9vcCBpcyBmYWxzZSBhbmQgbGFzdCBwYWdlIGlzIHNob3dpbmcsIGRpc3JlZ2FyZCBjYWxsXG5cdFx0XHRpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSAwKSByZXR1cm47XG5cdFx0XHR2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHNsaWRlci5hY3RpdmUuaW5kZXgpIC0gMTtcblx0XHRcdGVsLmdvVG9TbGlkZShwYWdlckluZGV4LCAncHJldicpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFN0YXJ0cyB0aGUgYXV0byBzaG93XG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gcHJldmVudENvbnRyb2xVcGRhdGUgKGJvb2xlYW4pXG5cdFx0ICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkXG5cdFx0ICovXG5cdFx0ZWwuc3RhcnRBdXRvID0gZnVuY3Rpb24ocHJldmVudENvbnRyb2xVcGRhdGUpe1xuXHRcdFx0Ly8gaWYgYW4gaW50ZXJ2YWwgYWxyZWFkeSBleGlzdHMsIGRpc3JlZ2FyZCBjYWxsXG5cdFx0XHRpZihzbGlkZXIuaW50ZXJ2YWwpIHJldHVybjtcblx0XHRcdC8vIGNyZWF0ZSBhbiBpbnRlcnZhbFxuXHRcdFx0c2xpZGVyLmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcblx0XHRcdFx0c2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT0gJ25leHQnID8gZWwuZ29Ub05leHRTbGlkZSgpIDogZWwuZ29Ub1ByZXZTbGlkZSgpO1xuXHRcdFx0fSwgc2xpZGVyLnNldHRpbmdzLnBhdXNlKTtcblx0XHRcdC8vIGlmIGF1dG8gY29udHJvbHMgYXJlIGRpc3BsYXllZCBhbmQgcHJldmVudENvbnRyb2xVcGRhdGUgaXMgbm90IHRydWVcblx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzICYmIHByZXZlbnRDb250cm9sVXBkYXRlICE9IHRydWUpIHVwZGF0ZUF1dG9Db250cm9scygnc3RvcCcpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFN0b3BzIHRoZSBhdXRvIHNob3dcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSBwcmV2ZW50Q29udHJvbFVwZGF0ZSAoYm9vbGVhbilcblx0XHQgKiAgLSBpZiB0cnVlLCBhdXRvIGNvbnRyb2xzIHN0YXRlIHdpbGwgbm90IGJlIHVwZGF0ZWRcblx0XHQgKi9cblx0XHRlbC5zdG9wQXV0byA9IGZ1bmN0aW9uKHByZXZlbnRDb250cm9sVXBkYXRlKXtcblx0XHRcdC8vIGlmIG5vIGludGVydmFsIGV4aXN0cywgZGlzcmVnYXJkIGNhbGxcblx0XHRcdGlmKCFzbGlkZXIuaW50ZXJ2YWwpIHJldHVybjtcblx0XHRcdC8vIGNsZWFyIHRoZSBpbnRlcnZhbFxuXHRcdFx0Y2xlYXJJbnRlcnZhbChzbGlkZXIuaW50ZXJ2YWwpO1xuXHRcdFx0c2xpZGVyLmludGVydmFsID0gbnVsbDtcblx0XHRcdC8vIGlmIGF1dG8gY29udHJvbHMgYXJlIGRpc3BsYXllZCBhbmQgcHJldmVudENvbnRyb2xVcGRhdGUgaXMgbm90IHRydWVcblx0XHRcdGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzICYmIHByZXZlbnRDb250cm9sVXBkYXRlICE9IHRydWUpIHVwZGF0ZUF1dG9Db250cm9scygnc3RhcnQnKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGN1cnJlbnQgc2xpZGUgaW5kZXggKHplcm8tYmFzZWQpXG5cdFx0ICovXG5cdFx0ZWwuZ2V0Q3VycmVudFNsaWRlID0gZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiBzbGlkZXIuYWN0aXZlLmluZGV4O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgY3VycmVudCBzbGlkZSBlbGVtZW50XG5cdFx0ICovXG5cdFx0ZWwuZ2V0Q3VycmVudFNsaWRlRWxlbWVudCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgbnVtYmVyIG9mIHNsaWRlcyBpbiBzaG93XG5cdFx0ICovXG5cdFx0ZWwuZ2V0U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGUgYWxsIGR5bmFtaWMgc2xpZGVyIGVsZW1lbnRzXG5cdFx0ICovXG5cdFx0ZWwucmVkcmF3U2xpZGVyID0gZnVuY3Rpb24oKXtcblx0XHRcdC8vIHJlc2l6ZSBhbGwgY2hpbGRyZW4gaW4gcmF0aW8gdG8gbmV3IHNjcmVlbiBzaXplXG5cdFx0XHRzbGlkZXIuY2hpbGRyZW4uYWRkKGVsLmZpbmQoJy5ieC1jbG9uZScpKS53aWR0aChnZXRTbGlkZVdpZHRoKCkpO1xuXHRcdFx0Ly8gYWRqdXN0IHRoZSBoZWlnaHRcblx0XHRcdHNsaWRlci52aWV3cG9ydC5jc3MoJ2hlaWdodCcsIGdldFZpZXdwb3J0SGVpZ2h0KCkpO1xuXHRcdFx0Ly8gdXBkYXRlIHRoZSBzbGlkZSBwb3NpdGlvblxuXHRcdFx0aWYoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHNldFNsaWRlUG9zaXRpb24oKTtcblx0XHRcdC8vIGlmIGFjdGl2ZS5sYXN0IHdhcyB0cnVlIGJlZm9yZSB0aGUgc2NyZWVuIHJlc2l6ZSwgd2Ugd2FudFxuXHRcdFx0Ly8gdG8ga2VlcCBpdCBsYXN0IG5vIG1hdHRlciB3aGF0IHNjcmVlbiBzaXplIHdlIGVuZCBvblxuXHRcdFx0aWYgKHNsaWRlci5hY3RpdmUubGFzdCkgc2xpZGVyLmFjdGl2ZS5pbmRleCA9IGdldFBhZ2VyUXR5KCkgLSAxO1xuXHRcdFx0Ly8gaWYgdGhlIGFjdGl2ZSBpbmRleCAocGFnZSkgbm8gbG9uZ2VyIGV4aXN0cyBkdWUgdG8gdGhlIHJlc2l6ZSwgc2ltcGx5IHNldCB0aGUgaW5kZXggYXMgbGFzdFxuXHRcdFx0aWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPj0gZ2V0UGFnZXJRdHkoKSkgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gdHJ1ZTtcblx0XHRcdC8vIGlmIGEgcGFnZXIgaXMgYmVpbmcgZGlzcGxheWVkIGFuZCBhIGN1c3RvbSBwYWdlciBpcyBub3QgYmVpbmcgdXNlZCwgdXBkYXRlIGl0XG5cdFx0XHRpZihzbGlkZXIuc2V0dGluZ3MucGFnZXIgJiYgIXNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSl7XG5cdFx0XHRcdHBvcHVsYXRlUGFnZXIoKTtcblx0XHRcdFx0dXBkYXRlUGFnZXJBY3RpdmUoc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogRGVzdHJveSB0aGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgc2xpZGVyIChyZXZlcnQgZXZlcnl0aGluZyBiYWNrIHRvIG9yaWdpbmFsIHN0YXRlKVxuXHRcdCAqL1xuXHRcdGVsLmRlc3Ryb3lTbGlkZXIgPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgc2xpZGVyIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkXG5cdFx0XHRpZighc2xpZGVyLmluaXRpYWxpemVkKSByZXR1cm47XG5cdFx0XHRzbGlkZXIuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblx0XHRcdCQoJy5ieC1jbG9uZScsIHRoaXMpLnJlbW92ZSgpO1xuXHRcdFx0c2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQodGhpcykuZGF0YShcIm9yaWdTdHlsZVwiKSAhPSB1bmRlZmluZWQgPyAkKHRoaXMpLmF0dHIoXCJzdHlsZVwiLCAkKHRoaXMpLmRhdGEoXCJvcmlnU3R5bGVcIikpIDogJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdFx0fSk7XG5cdFx0XHQkKHRoaXMpLmRhdGEoXCJvcmlnU3R5bGVcIikgIT0gdW5kZWZpbmVkID8gdGhpcy5hdHRyKFwic3R5bGVcIiwgJCh0aGlzKS5kYXRhKFwib3JpZ1N0eWxlXCIpKSA6ICQodGhpcykucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHRcdCQodGhpcykudW53cmFwKCkudW53cmFwKCk7XG5cdFx0XHRpZihzbGlkZXIuY29udHJvbHMuZWwpIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmUoKTtcblx0XHRcdGlmKHNsaWRlci5jb250cm9scy5uZXh0KSBzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmUoKTtcblx0XHRcdGlmKHNsaWRlci5jb250cm9scy5wcmV2KSBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmUoKTtcblx0XHRcdGlmKHNsaWRlci5wYWdlckVsICYmIHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgc2xpZGVyLnBhZ2VyRWwucmVtb3ZlKCk7XG5cdFx0XHQkKCcuYngtY2FwdGlvbicsIHRoaXMpLnJlbW92ZSgpO1xuXHRcdFx0aWYoc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCkgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5yZW1vdmUoKTtcblx0XHRcdGNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTtcblx0XHRcdGlmKHNsaWRlci5zZXR0aW5ncy5yZXNwb25zaXZlKSAkKHdpbmRvdykudW5iaW5kKCdyZXNpemUnLCByZXNpemVXaW5kb3cpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJlbG9hZCB0aGUgc2xpZGVyIChyZXZlcnQgYWxsIERPTSBjaGFuZ2VzLCBhbmQgcmUtaW5pdGlhbGl6ZSlcblx0XHQgKi9cblx0XHRlbC5yZWxvYWRTbGlkZXIgPSBmdW5jdGlvbihzZXR0aW5ncyl7XG5cdFx0XHRpZiAoc2V0dGluZ3MgIT0gdW5kZWZpbmVkKSBvcHRpb25zID0gc2V0dGluZ3M7XG5cdFx0XHRlbC5kZXN0cm95U2xpZGVyKCk7XG5cdFx0XHRpbml0KCk7XG5cdFx0fVxuXG5cdFx0aW5pdCgpO1xuXG5cdFx0Ly8gcmV0dXJucyB0aGUgY3VycmVudCBqUXVlcnkgb2JqZWN0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxufSkoalF1ZXJ5KTtcbiIsIi8qKlxuICogalF1ZXJ5IE1hc29ucnkgdjIuMS4wOFxuICogQSBkeW5hbWljIGxheW91dCBwbHVnaW4gZm9yIGpRdWVyeVxuICogVGhlIGZsaXAtc2lkZSBvZiBDU1MgRmxvYXRzXG4gKiBodHRwOi8vbWFzb25yeS5kZXNhbmRyby5jb21cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBDb3B5cmlnaHQgMjAxMiBEYXZpZCBEZVNhbmRyb1xuICovXG4oZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQuZXZlbnQsaTtyLnNwZWNpYWwuc21hcnRyZXNpemU9e3NldHVwOmZ1bmN0aW9uKCl7dCh0aGlzKS5iaW5kKFwicmVzaXplXCIsci5zcGVjaWFsLnNtYXJ0cmVzaXplLmhhbmRsZXIpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3QodGhpcykudW5iaW5kKFwicmVzaXplXCIsci5zcGVjaWFsLnNtYXJ0cmVzaXplLmhhbmRsZXIpfSxoYW5kbGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxzPWFyZ3VtZW50cztlLnR5cGU9XCJzbWFydHJlc2l6ZVwiLGkmJmNsZWFyVGltZW91dChpKSxpPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmRpc3BhdGNoLmFwcGx5KG4scyl9LHQ9PT1cImV4ZWNBc2FwXCI/MDoxMDApfX0sdC5mbi5zbWFydHJlc2l6ZT1mdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLmJpbmQoXCJzbWFydHJlc2l6ZVwiLGUpOnRoaXMudHJpZ2dlcihcInNtYXJ0cmVzaXplXCIsW1wiZXhlY0FzYXBcIl0pfSx0Lk1hc29uPWZ1bmN0aW9uKGUsbil7dGhpcy5lbGVtZW50PXQobiksdGhpcy5fY3JlYXRlKGUpLHRoaXMuX2luaXQoKX0sdC5NYXNvbi5zZXR0aW5ncz17aXNSZXNpemFibGU6ITAsaXNBbmltYXRlZDohMSxhbmltYXRpb25PcHRpb25zOntxdWV1ZTohMSxkdXJhdGlvbjo1MDB9LGd1dHRlcldpZHRoOjAsaXNSVEw6ITEsaXNGaXRXaWR0aDohMSxjb250YWluZXJTdHlsZTp7cG9zaXRpb246XCJyZWxhdGl2ZVwifX0sdC5NYXNvbi5wcm90b3R5cGU9e19maWx0ZXJGaW5kQnJpY2tzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3I7cmV0dXJuIHQ/ZS5maWx0ZXIodCkuYWRkKGUuZmluZCh0KSk6ZX0sX2dldEJyaWNrczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9maWx0ZXJGaW5kQnJpY2tzKGUpLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSkuYWRkQ2xhc3MoXCJtYXNvbnJ5LWJyaWNrXCIpO3JldHVybiB0fSxfY3JlYXRlOmZ1bmN0aW9uKG4pe3RoaXMub3B0aW9ucz10LmV4dGVuZCghMCx7fSx0Lk1hc29uLnNldHRpbmdzLG4pLHRoaXMuc3R5bGVRdWV1ZT1bXTt2YXIgcj10aGlzLmVsZW1lbnRbMF0uc3R5bGU7dGhpcy5vcmlnaW5hbFN0eWxlPXtoZWlnaHQ6ci5oZWlnaHR8fFwiXCJ9O3ZhciBpPXRoaXMub3B0aW9ucy5jb250YWluZXJTdHlsZTtmb3IodmFyIHMgaW4gaSl0aGlzLm9yaWdpbmFsU3R5bGVbc109cltzXXx8XCJcIjt0aGlzLmVsZW1lbnQuY3NzKGkpLHRoaXMuaG9yaXpvbnRhbERpcmVjdGlvbj10aGlzLm9wdGlvbnMuaXNSVEw/XCJyaWdodFwiOlwibGVmdFwiO3ZhciBvPXRoaXMuZWxlbWVudC5jc3MoXCJwYWRkaW5nLVwiK3RoaXMuaG9yaXpvbnRhbERpcmVjdGlvbiksdT10aGlzLmVsZW1lbnQuY3NzKFwicGFkZGluZy10b3BcIik7dGhpcy5vZmZzZXQ9e3g6bz9wYXJzZUludChvLDEwKTowLHk6dT9wYXJzZUludCh1LDEwKTowfSx0aGlzLmlzRmx1aWQ9dGhpcy5vcHRpb25zLmNvbHVtbldpZHRoJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmNvbHVtbldpZHRoPT1cImZ1bmN0aW9uXCI7dmFyIGE9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5lbGVtZW50LmFkZENsYXNzKFwibWFzb25yeVwiKX0sMCksdGhpcy5vcHRpb25zLmlzUmVzaXphYmxlJiZ0KGUpLmJpbmQoXCJzbWFydHJlc2l6ZS5tYXNvbnJ5XCIsZnVuY3Rpb24oKXthLnJlc2l6ZSgpfSksdGhpcy5yZWxvYWRJdGVtcygpfSxfaW5pdDpmdW5jdGlvbihlKXt0aGlzLl9nZXRDb2x1bW5zKCksdGhpcy5fcmVMYXlvdXQoZSl9LG9wdGlvbjpmdW5jdGlvbihlLG4pe3QuaXNQbGFpbk9iamVjdChlKSYmKHRoaXMub3B0aW9ucz10LmV4dGVuZCghMCx0aGlzLm9wdGlvbnMsZSkpfSxsYXlvdXQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspdGhpcy5fcGxhY2VCcmljayhlW25dKTt2YXIgaT17fTtpLmhlaWdodD1NYXRoLm1heC5hcHBseShNYXRoLHRoaXMuY29sWXMpO2lmKHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoKXt2YXIgcz0wO249dGhpcy5jb2xzO3doaWxlKC0tbil7aWYodGhpcy5jb2xZc1tuXSE9PTApYnJlYWs7cysrfWkud2lkdGg9KHRoaXMuY29scy1zKSp0aGlzLmNvbHVtbldpZHRoLXRoaXMub3B0aW9ucy5ndXR0ZXJXaWR0aH10aGlzLnN0eWxlUXVldWUucHVzaCh7JGVsOnRoaXMuZWxlbWVudCxzdHlsZTppfSk7dmFyIG89dGhpcy5pc0xhaWRPdXQ/dGhpcy5vcHRpb25zLmlzQW5pbWF0ZWQ/XCJhbmltYXRlXCI6XCJjc3NcIjpcImNzc1wiLHU9dGhpcy5vcHRpb25zLmFuaW1hdGlvbk9wdGlvbnMsYTtmb3Iobj0wLHI9dGhpcy5zdHlsZVF1ZXVlLmxlbmd0aDtuPHI7bisrKWE9dGhpcy5zdHlsZVF1ZXVlW25dLGEuJGVsW29dKGEuc3R5bGUsdSk7dGhpcy5zdHlsZVF1ZXVlPVtdLHQmJnQuY2FsbChlKSx0aGlzLmlzTGFpZE91dD0hMH0sX2dldENvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuaXNGaXRXaWR0aD90aGlzLmVsZW1lbnQucGFyZW50KCk6dGhpcy5lbGVtZW50LHQ9ZS53aWR0aCgpO3RoaXMuY29sdW1uV2lkdGg9dGhpcy5pc0ZsdWlkP3RoaXMub3B0aW9ucy5jb2x1bW5XaWR0aCh0KTp0aGlzLm9wdGlvbnMuY29sdW1uV2lkdGh8fHRoaXMuJGJyaWNrcy5vdXRlcldpZHRoKCEwKXx8dCx0aGlzLmNvbHVtbldpZHRoKz10aGlzLm9wdGlvbnMuZ3V0dGVyV2lkdGgsdGhpcy5jb2xzPU1hdGguZmxvb3IoKHQrdGhpcy5vcHRpb25zLmd1dHRlcldpZHRoKS90aGlzLmNvbHVtbldpZHRoKSx0aGlzLmNvbHM9TWF0aC5tYXgodGhpcy5jb2xzLDEpfSxfcGxhY2VCcmljazpmdW5jdGlvbihlKXt2YXIgbj10KGUpLHIsaSxzLG8sdTtyPU1hdGguY2VpbChuLm91dGVyV2lkdGgoITApL3RoaXMuY29sdW1uV2lkdGgpLHI9TWF0aC5taW4ocix0aGlzLmNvbHMpO2lmKHI9PT0xKXM9dGhpcy5jb2xZcztlbHNle2k9dGhpcy5jb2xzKzEtcixzPVtdO2Zvcih1PTA7dTxpO3UrKylvPXRoaXMuY29sWXMuc2xpY2UodSx1K3IpLHNbdV09TWF0aC5tYXguYXBwbHkoTWF0aCxvKX12YXIgYT1NYXRoLm1pbi5hcHBseShNYXRoLHMpLGY9MDtmb3IodmFyIGw9MCxjPXMubGVuZ3RoO2w8YztsKyspaWYoc1tsXT09PWEpe2Y9bDticmVha312YXIgaD17dG9wOmErdGhpcy5vZmZzZXQueX07aFt0aGlzLmhvcml6b250YWxEaXJlY3Rpb25dPXRoaXMuY29sdW1uV2lkdGgqZit0aGlzLm9mZnNldC54LHRoaXMuc3R5bGVRdWV1ZS5wdXNoKHskZWw6bixzdHlsZTpofSk7dmFyIHA9YStuLm91dGVySGVpZ2h0KCEwKSxkPXRoaXMuY29scysxLWM7Zm9yKGw9MDtsPGQ7bCsrKXRoaXMuY29sWXNbZitsXT1wfSxyZXNpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbHM7dGhpcy5fZ2V0Q29sdW1ucygpLCh0aGlzLmlzRmx1aWR8fHRoaXMuY29scyE9PWUpJiZ0aGlzLl9yZUxheW91dCgpfSxfcmVMYXlvdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb2xzO3RoaXMuY29sWXM9W107d2hpbGUodC0tKXRoaXMuY29sWXMucHVzaCgwKTt0aGlzLmxheW91dCh0aGlzLiRicmlja3MsZSl9LHJlbG9hZEl0ZW1zOmZ1bmN0aW9uKCl7dGhpcy4kYnJpY2tzPXRoaXMuX2dldEJyaWNrcyh0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKSl9LHJlbG9hZDpmdW5jdGlvbihlKXt0aGlzLnJlbG9hZEl0ZW1zKCksdGhpcy5faW5pdChlKX0sYXBwZW5kZWQ6ZnVuY3Rpb24oZSx0LG4pe2lmKHQpe3RoaXMuX2ZpbHRlckZpbmRCcmlja3MoZSkuY3NzKHt0b3A6dGhpcy5lbGVtZW50LmhlaWdodCgpfSk7dmFyIHI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5fYXBwZW5kZWQoZSxuKX0sMSl9ZWxzZSB0aGlzLl9hcHBlbmRlZChlLG4pfSxfYXBwZW5kZWQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9nZXRCcmlja3MoZSk7dGhpcy4kYnJpY2tzPXRoaXMuJGJyaWNrcy5hZGQobiksdGhpcy5sYXlvdXQobix0KX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3RoaXMuJGJyaWNrcz10aGlzLiRicmlja3Mubm90KGUpLGUucmVtb3ZlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLiRicmlja3MucmVtb3ZlQ2xhc3MoXCJtYXNvbnJ5LWJyaWNrXCIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnN0eWxlLnBvc2l0aW9uPVwiXCIsdGhpcy5zdHlsZS50b3A9XCJcIix0aGlzLnN0eWxlLmxlZnQ9XCJcIn0pO3ZhciBuPXRoaXMuZWxlbWVudFswXS5zdHlsZTtmb3IodmFyIHIgaW4gdGhpcy5vcmlnaW5hbFN0eWxlKW5bcl09dGhpcy5vcmlnaW5hbFN0eWxlW3JdO3RoaXMuZWxlbWVudC51bmJpbmQoXCIubWFzb25yeVwiKS5yZW1vdmVDbGFzcyhcIm1hc29ucnlcIikucmVtb3ZlRGF0YShcIm1hc29ucnlcIiksdChlKS51bmJpbmQoXCIubWFzb25yeVwiKX19LHQuZm4uaW1hZ2VzTG9hZGVkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHUoKXtlLmNhbGwobixyKX1mdW5jdGlvbiBhKGUpe3ZhciBuPWUudGFyZ2V0O24uc3JjIT09cyYmdC5pbkFycmF5KG4sbyk9PT0tMSYmKG8ucHVzaChuKSwtLWk8PTAmJihzZXRUaW1lb3V0KHUpLHIudW5iaW5kKFwiLmltYWdlc0xvYWRlZFwiLGEpKSl9dmFyIG49dGhpcyxyPW4uZmluZChcImltZ1wiKS5hZGQobi5maWx0ZXIoXCJpbWdcIikpLGk9ci5sZW5ndGgscz1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIixvPVtdO3JldHVybiBpfHx1KCksci5iaW5kKFwibG9hZC5pbWFnZXNMb2FkZWQgZXJyb3IuaW1hZ2VzTG9hZGVkXCIsYSkuZWFjaChmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjO3RoaXMuc3JjPXMsdGhpcy5zcmM9ZX0pLG59O3ZhciBzPWZ1bmN0aW9uKHQpe2UuY29uc29sZSYmZS5jb25zb2xlLmVycm9yKHQpfTt0LmZuLm1hc29ucnk9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIGU9PVwic3RyaW5nXCIpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTt0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcj10LmRhdGEodGhpcyxcIm1hc29ucnlcIik7aWYoIXIpe3MoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIG1hc29ucnkgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IGF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnXCIrZStcIidcIik7cmV0dXJufWlmKCF0LmlzRnVuY3Rpb24ocltlXSl8fGUuY2hhckF0KDApPT09XCJfXCIpe3MoXCJubyBzdWNoIG1ldGhvZCAnXCIrZStcIicgZm9yIG1hc29ucnkgaW5zdGFuY2VcIik7cmV0dXJufXJbZV0uYXBwbHkocixuKX0pfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dC5kYXRhKHRoaXMsXCJtYXNvbnJ5XCIpO24/KG4ub3B0aW9uKGV8fHt9KSxuLl9pbml0KCkpOnQuZGF0YSh0aGlzLFwibWFzb25yeVwiLG5ldyB0Lk1hc29uKGUsdGhpcykpfSk7cmV0dXJuIHRoaXN9fSkod2luZG93LGpRdWVyeSk7IiwiJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLmJ4c2xpZGVyJykuYnhTbGlkZXIoe1xuICAgICAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9Db250cm9sczogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBncmlkKCkge1xuICAgICAgICAgICAgdmFyICRncmlkID0gJCgnLmdyaWQnKTtcbiAgICAgICAgICAgICRncmlkLmltYWdlc0xvYWRlZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGdyaWQubWFzb25yeSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0nLFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogZnVuY3Rpb24oIGNvbnRhaW5lcldpZHRoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICggY29udGFpbmVyV2lkdGggLyAzIC0gMTApXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcldpZHRoOiAxMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZWFyY2goKSB7XG4gICAgICAgICAgICAkKCcuaWRlYXMnKS5maW5kKCdkaXYnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciAkc2VhcmNoS2V5ID0gJCgnLnNlYXJjaF9fZmllbGQnKS52YWwoKTtcblxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3BpeGFiYXkuY29tL2FwaS8/a2V5PTI2NTA1ODQtZThmZWFiOWIxMWVkNjQ0ZGNlYzcyOGFjOSZxPScgKyAkc2VhcmNoS2V5ICsgJyZpbWFnZV90eXBlPXBob3RvJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb25wJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkaHRtbCA9ICQoJyNjb250YWluZXInKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkY29udGVudCA9IHRtcGwoJGh0bWwsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuaWRlYXMnKS5hcHBlbmQoJGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBncmlkKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IhJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWFyY2goKTtcblxuICAgICAgICAkKCcuc2VhcmNoX19idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2VhcmNoKCk7XG4gICAgICAgICAgICAkKCcuc2VhcmNoX19maWVsZCcpLnZhbCgnJyk7XG4gICAgICAgIH0pXG4gICAgfVxuKTtcbiIsIi8vIFNpbXBsZSBKYXZhU2NyaXB0IFRlbXBsYXRpbmdcbi8vIEpvaG4gUmVzaWcgLSBodHRwOi8vZWpvaG4ub3JnLyAtIE1JVCBMaWNlbnNlZFxuKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FjaGUgPSB7fTtcblxuICAgIHRoaXMudG1wbCA9IGZ1bmN0aW9uIHRtcGwoc3RyLCBkYXRhKSB7XG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgaWYgd2UncmUgZ2V0dGluZyBhIHRlbXBsYXRlLCBvciBpZiB3ZSBuZWVkIHRvXG4gICAgICAgIC8vIGxvYWQgdGhlIHRlbXBsYXRlIC0gYW5kIGJlIHN1cmUgdG8gY2FjaGUgdGhlIHJlc3VsdC5cbiAgICAgICAgdmFyIGZuID0gIS9cXFcvLnRlc3Qoc3RyKSA/XG4gICAgICAgICAgICBjYWNoZVtzdHJdID0gY2FjaGVbc3RyXSB8fFxuICAgICAgICAgICAgICAgIHRtcGwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RyKS5pbm5lckhUTUwpIDpcblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSByZXVzYWJsZSBmdW5jdGlvbiB0aGF0IHdpbGwgc2VydmUgYXMgYSB0ZW1wbGF0ZVxuICAgICAgICAgICAgLy8gZ2VuZXJhdG9yIChhbmQgd2hpY2ggd2lsbCBiZSBjYWNoZWQpLlxuICAgICAgICAgICAgbmV3IEZ1bmN0aW9uKFwib2JqXCIsXG4gICAgICAgICAgICAgICAgXCJ2YXIgcD1bXSxwcmludD1mdW5jdGlvbigpe3AucHVzaC5hcHBseShwLGFyZ3VtZW50cyk7fTtcIiArXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW50cm9kdWNlIHRoZSBkYXRhIGFzIGxvY2FsIHZhcmlhYmxlcyB1c2luZyB3aXRoKCl7fVxuICAgICAgICAgICAgICAgIFwid2l0aChvYmope3AucHVzaCgnXCIgK1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHRlbXBsYXRlIGludG8gcHVyZSBKYXZhU2NyaXB0XG4gICAgICAgICAgICAgICAgc3RyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxyXFx0XFxuXS9nLCBcIiBcIilcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiPCVcIikuam9pbihcIlxcdFwiKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKChefCU+KVteXFx0XSopJy9nLCBcIiQxXFxyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHQ9KC4qPyklPi9nLCBcIicsJDEsJ1wiKVxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCJcXHRcIikuam9pbihcIicpO1wiKVxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCIlPlwiKS5qb2luKFwicC5wdXNoKCdcIilcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiXFxyXCIpLmpvaW4oXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICsgXCInKTt9cmV0dXJuIHAuam9pbignJyk7XCIpO1xuXG4gICAgICAgIC8vIFByb3ZpZGUgc29tZSBiYXNpYyBjdXJyeWluZyB0byB0aGUgdXNlclxuICAgICAgICByZXR1cm4gZGF0YSA/IGZuKGRhdGEpIDogZm47XG4gICAgfTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
